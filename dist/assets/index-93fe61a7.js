var z2=Object.defineProperty;var U2=(n,e,t)=>e in n?z2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var F=(n,e,t)=>(U2(n,typeof e!="symbol"?e+"":e,t),t),Zw=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var a=(n,e,t)=>(Zw(n,e,"read from private field"),t?t.call(n):e.get(n)),p=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)},g=(n,e,t,i)=>(Zw(n,e,"write to private field"),i?i.call(n,t):e.set(n,t),t);var ht=(n,e,t,i)=>({set _(s){g(n,e,s,t)},get _(){return a(n,e,i)}}),S=(n,e,t)=>(Zw(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function IC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var OC={exports:{}},pw={},BC={exports:{}},ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om=Symbol.for("react.element"),H2=Symbol.for("react.portal"),$2=Symbol.for("react.fragment"),V2=Symbol.for("react.strict_mode"),W2=Symbol.for("react.profiler"),X2=Symbol.for("react.provider"),G2=Symbol.for("react.context"),Y2=Symbol.for("react.forward_ref"),q2=Symbol.for("react.suspense"),K2=Symbol.for("react.memo"),Q2=Symbol.for("react.lazy"),Nx=Symbol.iterator;function Z2(n){return n===null||typeof n!="object"?null:(n=Nx&&n[Nx]||n["@@iterator"],typeof n=="function"?n:null)}var jC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zC=Object.assign,UC={};function id(n,e,t){this.props=n,this.context=e,this.refs=UC,this.updater=t||jC}id.prototype.isReactComponent={};id.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};id.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function HC(){}HC.prototype=id.prototype;function cA(n,e,t){this.props=n,this.context=e,this.refs=UC,this.updater=t||jC}var uA=cA.prototype=new HC;uA.constructor=cA;zC(uA,id.prototype);uA.isPureReactComponent=!0;var Lx=Array.isArray,$C=Object.prototype.hasOwnProperty,hA={current:null},VC={key:!0,ref:!0,__self:!0,__source:!0};function WC(n,e,t){var i,s={},r=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(r=""+e.key),e)$C.call(e,i)&&!VC.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=t;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(n&&n.defaultProps)for(i in l=n.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:om,type:n,key:r,ref:o,props:s,_owner:hA.current}}function J2(n,e){return{$$typeof:om,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function dA(n){return typeof n=="object"&&n!==null&&n.$$typeof===om}function eR(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Dx=/\/+/g;function Jw(n,e){return typeof n=="object"&&n!==null&&n.key!=null?eR(""+n.key):e.toString(36)}function Zm(n,e,t,i,s){var r=typeof n;(r==="undefined"||r==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(r){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case om:case H2:o=!0}}if(o)return o=n,s=s(o),n=i===""?"."+Jw(o,0):i,Lx(s)?(t="",n!=null&&(t=n.replace(Dx,"$&/")+"/"),Zm(s,e,t,"",function(u){return u})):s!=null&&(dA(s)&&(s=J2(s,t+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Dx,"$&/")+"/")+n)),e.push(s)),1;if(o=0,i=i===""?".":i+":",Lx(n))for(var l=0;l<n.length;l++){r=n[l];var c=i+Jw(r,l);o+=Zm(r,e,t,c,s)}else if(c=Z2(n),typeof c=="function")for(n=c.call(n),l=0;!(r=n.next()).done;)r=r.value,c=i+Jw(r,l++),o+=Zm(r,e,t,c,s);else if(r==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function xm(n,e,t){if(n==null)return n;var i=[],s=0;return Zm(n,i,"","",function(r){return e.call(t,r,s++)}),i}function tR(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var un={current:null},Jm={transition:null},nR={ReactCurrentDispatcher:un,ReactCurrentBatchConfig:Jm,ReactCurrentOwner:hA};function XC(){throw Error("act(...) is not supported in production builds of React.")}ae.Children={map:xm,forEach:function(n,e,t){xm(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return xm(n,function(){e++}),e},toArray:function(n){return xm(n,function(e){return e})||[]},only:function(n){if(!dA(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ae.Component=id;ae.Fragment=$2;ae.Profiler=W2;ae.PureComponent=cA;ae.StrictMode=V2;ae.Suspense=q2;ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nR;ae.act=XC;ae.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=zC({},n.props),s=n.key,r=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(r=e.ref,o=hA.current),e.key!==void 0&&(s=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)$C.call(e,c)&&!VC.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=t;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:om,type:n.type,key:s,ref:r,props:i,_owner:o}};ae.createContext=function(n){return n={$$typeof:G2,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:X2,_context:n},n.Consumer=n};ae.createElement=WC;ae.createFactory=function(n){var e=WC.bind(null,n);return e.type=n,e};ae.createRef=function(){return{current:null}};ae.forwardRef=function(n){return{$$typeof:Y2,render:n}};ae.isValidElement=dA;ae.lazy=function(n){return{$$typeof:Q2,_payload:{_status:-1,_result:n},_init:tR}};ae.memo=function(n,e){return{$$typeof:K2,type:n,compare:e===void 0?null:e}};ae.startTransition=function(n){var e=Jm.transition;Jm.transition={};try{n()}finally{Jm.transition=e}};ae.unstable_act=XC;ae.useCallback=function(n,e){return un.current.useCallback(n,e)};ae.useContext=function(n){return un.current.useContext(n)};ae.useDebugValue=function(){};ae.useDeferredValue=function(n){return un.current.useDeferredValue(n)};ae.useEffect=function(n,e){return un.current.useEffect(n,e)};ae.useId=function(){return un.current.useId()};ae.useImperativeHandle=function(n,e,t){return un.current.useImperativeHandle(n,e,t)};ae.useInsertionEffect=function(n,e){return un.current.useInsertionEffect(n,e)};ae.useLayoutEffect=function(n,e){return un.current.useLayoutEffect(n,e)};ae.useMemo=function(n,e){return un.current.useMemo(n,e)};ae.useReducer=function(n,e,t){return un.current.useReducer(n,e,t)};ae.useRef=function(n){return un.current.useRef(n)};ae.useState=function(n){return un.current.useState(n)};ae.useSyncExternalStore=function(n,e,t){return un.current.useSyncExternalStore(n,e,t)};ae.useTransition=function(){return un.current.useTransition()};ae.version="18.3.1";BC.exports=ae;var M=BC.exports;const Tr=IC(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iR=M,sR=Symbol.for("react.element"),rR=Symbol.for("react.fragment"),oR=Object.prototype.hasOwnProperty,aR=iR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lR={key:!0,ref:!0,__self:!0,__source:!0};function GC(n,e,t){var i,s={},r=null,o=null;t!==void 0&&(r=""+t),e.key!==void 0&&(r=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)oR.call(e,i)&&!lR.hasOwnProperty(i)&&(s[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:sR,type:n,key:r,ref:o,props:s,_owner:aR.current}}pw.Fragment=rR;pw.jsx=GC;pw.jsxs=GC;OC.exports=pw;var C=OC.exports,jb={},YC={exports:{}},ni={},qC={exports:{}},KC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,z){var Y=D.length;D.push(z);e:for(;0<Y;){var Z=Y-1>>>1,K=D[Z];if(0<s(K,z))D[Z]=z,D[Y]=K,Y=Z;else break e}}function t(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var z=D[0],Y=D.pop();if(Y!==z){D[0]=Y;e:for(var Z=0,K=D.length,H=K>>>1;Z<H;){var fe=2*(Z+1)-1,Me=D[fe],Ee=fe+1,re=D[Ee];if(0>s(Me,Y))Ee<K&&0>s(re,Me)?(D[Z]=re,D[Ee]=Y,Z=Ee):(D[Z]=Me,D[fe]=Y,Z=fe);else if(Ee<K&&0>s(re,Y))D[Z]=re,D[Ee]=Y,Z=Ee;else break e}}return z}function s(D,z){var Y=D.sortIndex-z.sortIndex;return Y!==0?Y:D.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;n.unstable_now=function(){return r.now()}}else{var o=Date,l=o.now();n.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,m=!1,y=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(D){for(var z=t(u);z!==null;){if(z.callback===null)i(u);else if(z.startTime<=D)i(u),z.sortIndex=z.expirationTime,e(c,z);else break;z=t(u)}}function E(D){if(w=!1,A(D),!y)if(t(c)!==null)y=!0,j(_);else{var z=t(u);z!==null&&B(E,z.startTime-D)}}function _(D,z){y=!1,w&&(w=!1,v(P),P=-1),m=!0;var Y=f;try{for(A(z),d=t(c);d!==null&&(!(d.expirationTime>z)||D&&!L());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,f=d.priorityLevel;var K=Z(d.expirationTime<=z);z=n.unstable_now(),typeof K=="function"?d.callback=K:d===t(c)&&i(c),A(z)}else i(c);d=t(c)}if(d!==null)var H=!0;else{var fe=t(u);fe!==null&&B(E,fe.startTime-z),H=!1}return H}finally{d=null,f=Y,m=!1}}var k=!1,T=null,P=-1,N=5,R=-1;function L(){return!(n.unstable_now()-R<N)}function O(){if(T!==null){var D=n.unstable_now();R=D;var z=!0;try{z=T(!0,D)}finally{z?$():(k=!1,T=null)}}else k=!1}var $;if(typeof b=="function")$=function(){b(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,Q=U.port2;U.port1.onmessage=O,$=function(){Q.postMessage(null)}}else $=function(){x(O,0)};function j(D){T=D,k||(k=!0,$())}function B(D,z){P=x(function(){D(n.unstable_now())},z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){y||m||(y=!0,j(_))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(D){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var Y=f;f=z;try{return D()}finally{f=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,z){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var Y=f;f=D;try{return z()}finally{f=Y}},n.unstable_scheduleCallback=function(D,z,Y){var Z=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?Z+Y:Z):Y=Z,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=Y+K,D={id:h++,callback:z,priorityLevel:D,startTime:Y,expirationTime:K,sortIndex:-1},Y>Z?(D.sortIndex=Y,e(u,D),t(c)===null&&D===t(u)&&(w?(v(P),P=-1):w=!0,B(E,Y-Z))):(D.sortIndex=K,e(c,D),y||m||(y=!0,j(_))),D},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(D){var z=f;return function(){var Y=f;f=z;try{return D.apply(this,arguments)}finally{f=Y}}}})(KC);qC.exports=KC;var cR=qC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR=M,ei=cR;function I(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var QC=new Set,of={};function ac(n,e){Gh(n,e),Gh(n+"Capture",e)}function Gh(n,e){for(of[n]=e,n=0;n<e.length;n++)QC.add(e[n])}var Pr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zb=Object.prototype.hasOwnProperty,hR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mx={},Fx={};function dR(n){return zb.call(Fx,n)?!0:zb.call(Mx,n)?!1:hR.test(n)?Fx[n]=!0:(Mx[n]=!0,!1)}function fR(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function pR(n,e,t,i){if(e===null||typeof e>"u"||fR(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hn(n,e,t,i,s,r,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=r,this.removeEmptyString=o}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){jt[n]=new hn(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];jt[e]=new hn(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){jt[n]=new hn(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){jt[n]=new hn(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){jt[n]=new hn(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){jt[n]=new hn(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){jt[n]=new hn(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){jt[n]=new hn(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){jt[n]=new hn(n,5,!1,n.toLowerCase(),null,!1,!1)});var fA=/[\-:]([a-z])/g;function pA(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(fA,pA);jt[e]=new hn(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(fA,pA);jt[e]=new hn(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(fA,pA);jt[e]=new hn(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){jt[n]=new hn(n,1,!1,n.toLowerCase(),null,!1,!1)});jt.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){jt[n]=new hn(n,1,!1,n.toLowerCase(),null,!0,!0)});function gA(n,e,t,i){var s=jt.hasOwnProperty(e)?jt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pR(e,t,s,i)&&(t=null),i||s===null?dR(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):s.mustUseProperty?n[s.propertyName]=t===null?s.type===3?!1:"":t:(e=s.attributeName,i=s.attributeNamespace,t===null?n.removeAttribute(e):(s=s.type,t=s===3||s===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Fr=uR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Em=Symbol.for("react.element"),Ac=Symbol.for("react.portal"),xc=Symbol.for("react.fragment"),mA=Symbol.for("react.strict_mode"),Ub=Symbol.for("react.profiler"),ZC=Symbol.for("react.provider"),JC=Symbol.for("react.context"),vA=Symbol.for("react.forward_ref"),Hb=Symbol.for("react.suspense"),$b=Symbol.for("react.suspense_list"),yA=Symbol.for("react.memo"),jr=Symbol.for("react.lazy"),e_=Symbol.for("react.offscreen"),Ix=Symbol.iterator;function ud(n){return n===null||typeof n!="object"?null:(n=Ix&&n[Ix]||n["@@iterator"],typeof n=="function"?n:null)}var Ke=Object.assign,eb;function xd(n){if(eb===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);eb=e&&e[1]||""}return`
`+eb+n}var tb=!1;function nb(n,e){if(!n||tb)return"";tb=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),r=i.stack.split(`
`),o=s.length-1,l=r.length-1;1<=o&&0<=l&&s[o]!==r[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==r[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==r[l]){var c=`
`+s[o].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=o&&0<=l);break}}}finally{tb=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?xd(n):""}function gR(n){switch(n.tag){case 5:return xd(n.type);case 16:return xd("Lazy");case 13:return xd("Suspense");case 19:return xd("SuspenseList");case 0:case 2:case 15:return n=nb(n.type,!1),n;case 11:return n=nb(n.type.render,!1),n;case 1:return n=nb(n.type,!0),n;default:return""}}function Vb(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case xc:return"Fragment";case Ac:return"Portal";case Ub:return"Profiler";case mA:return"StrictMode";case Hb:return"Suspense";case $b:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case JC:return(n.displayName||"Context")+".Consumer";case ZC:return(n._context.displayName||"Context")+".Provider";case vA:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case yA:return e=n.displayName||null,e!==null?e:Vb(n.type)||"Memo";case jr:e=n._payload,n=n._init;try{return Vb(n(e))}catch{}}return null}function mR(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Vb(e);case 8:return e===mA?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ta(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function t_(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function vR(n){var e=t_(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var s=t.get,r=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,r.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Cm(n){n._valueTracker||(n._valueTracker=vR(n))}function n_(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=t_(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Hv(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Wb(n,e){var t=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Ox(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ta(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function i_(n,e){e=e.checked,e!=null&&gA(n,"checked",e,!1)}function Xb(n,e){i_(n,e);var t=ta(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Gb(n,e.type,t):e.hasOwnProperty("defaultValue")&&Gb(n,e.type,ta(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Bx(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Gb(n,e,t){(e!=="number"||Hv(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ed=Array.isArray;function jc(n,e,t,i){if(n=n.options,e){e={};for(var s=0;s<t.length;s++)e["$"+t[s]]=!0;for(t=0;t<n.length;t++)s=e.hasOwnProperty("$"+n[t].value),n[t].selected!==s&&(n[t].selected=s),s&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ta(t),e=null,s=0;s<n.length;s++){if(n[s].value===t){n[s].selected=!0,i&&(n[s].defaultSelected=!0);return}e!==null||n[s].disabled||(e=n[s])}e!==null&&(e.selected=!0)}}function Yb(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function jx(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(I(92));if(Ed(t)){if(1<t.length)throw Error(I(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ta(t)}}function s_(n,e){var t=ta(e.value),i=ta(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function zx(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function r_(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qb(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?r_(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var _m,o_=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,s){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,s)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(_m=_m||document.createElement("div"),_m.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=_m.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function af(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var qd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yR=["Webkit","ms","Moz","O"];Object.keys(qd).forEach(function(n){yR.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),qd[e]=qd[n]})});function a_(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||qd.hasOwnProperty(n)&&qd[n]?(""+e).trim():e+"px"}function l_(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,s=a_(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,s):n[t]=s}}var wR=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kb(n,e){if(e){if(wR[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function Qb(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zb=null;function wA(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Jb=null,zc=null,Uc=null;function Ux(n){if(n=cm(n)){if(typeof Jb!="function")throw Error(I(280));var e=n.stateNode;e&&(e=ww(e),Jb(n.stateNode,n.type,e))}}function c_(n){zc?Uc?Uc.push(n):Uc=[n]:zc=n}function u_(){if(zc){var n=zc,e=Uc;if(Uc=zc=null,Ux(n),e)for(n=0;n<e.length;n++)Ux(e[n])}}function h_(n,e){return n(e)}function d_(){}var ib=!1;function f_(n,e,t){if(ib)return n(e,t);ib=!0;try{return h_(n,e,t)}finally{ib=!1,(zc!==null||Uc!==null)&&(d_(),u_())}}function lf(n,e){var t=n.stateNode;if(t===null)return null;var i=ww(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(I(231,e,typeof t));return t}var eS=!1;if(Pr)try{var hd={};Object.defineProperty(hd,"passive",{get:function(){eS=!0}}),window.addEventListener("test",hd,hd),window.removeEventListener("test",hd,hd)}catch{eS=!1}function bR(n,e,t,i,s,r,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Kd=!1,$v=null,Vv=!1,tS=null,SR={onError:function(n){Kd=!0,$v=n}};function AR(n,e,t,i,s,r,o,l,c){Kd=!1,$v=null,bR.apply(SR,arguments)}function xR(n,e,t,i,s,r,o,l,c){if(AR.apply(this,arguments),Kd){if(Kd){var u=$v;Kd=!1,$v=null}else throw Error(I(198));Vv||(Vv=!0,tS=u)}}function lc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function p_(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Hx(n){if(lc(n)!==n)throw Error(I(188))}function ER(n){var e=n.alternate;if(!e){if(e=lc(n),e===null)throw Error(I(188));return e!==n?null:n}for(var t=n,i=e;;){var s=t.return;if(s===null)break;var r=s.alternate;if(r===null){if(i=s.return,i!==null){t=i;continue}break}if(s.child===r.child){for(r=s.child;r;){if(r===t)return Hx(s),n;if(r===i)return Hx(s),e;r=r.sibling}throw Error(I(188))}if(t.return!==i.return)t=s,i=r;else{for(var o=!1,l=s.child;l;){if(l===t){o=!0,t=s,i=r;break}if(l===i){o=!0,i=s,t=r;break}l=l.sibling}if(!o){for(l=r.child;l;){if(l===t){o=!0,t=r,i=s;break}if(l===i){o=!0,i=r,t=s;break}l=l.sibling}if(!o)throw Error(I(189))}}if(t.alternate!==i)throw Error(I(190))}if(t.tag!==3)throw Error(I(188));return t.stateNode.current===t?n:e}function g_(n){return n=ER(n),n!==null?m_(n):null}function m_(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=m_(n);if(e!==null)return e;n=n.sibling}return null}var v_=ei.unstable_scheduleCallback,$x=ei.unstable_cancelCallback,CR=ei.unstable_shouldYield,_R=ei.unstable_requestPaint,st=ei.unstable_now,kR=ei.unstable_getCurrentPriorityLevel,bA=ei.unstable_ImmediatePriority,y_=ei.unstable_UserBlockingPriority,Wv=ei.unstable_NormalPriority,TR=ei.unstable_LowPriority,w_=ei.unstable_IdlePriority,gw=null,Ns=null;function PR(n){if(Ns&&typeof Ns.onCommitFiberRoot=="function")try{Ns.onCommitFiberRoot(gw,n,void 0,(n.current.flags&128)===128)}catch{}}var qi=Math.clz32?Math.clz32:LR,RR=Math.log,NR=Math.LN2;function LR(n){return n>>>=0,n===0?32:31-(RR(n)/NR|0)|0}var km=64,Tm=4194304;function Cd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Xv(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,s=n.suspendedLanes,r=n.pingedLanes,o=t&268435455;if(o!==0){var l=o&~s;l!==0?i=Cd(l):(r&=o,r!==0&&(i=Cd(r)))}else o=t&~s,o!==0?i=Cd(o):r!==0&&(i=Cd(r));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,r=e&-e,s>=r||s===16&&(r&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-qi(e),s=1<<t,i|=n[t],e&=~s;return i}function DR(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MR(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,s=n.expirationTimes,r=n.pendingLanes;0<r;){var o=31-qi(r),l=1<<o,c=s[o];c===-1?(!(l&t)||l&i)&&(s[o]=DR(l,e)):c<=e&&(n.expiredLanes|=l),r&=~l}}function nS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function b_(){var n=km;return km<<=1,!(km&4194240)&&(km=64),n}function sb(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function am(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-qi(e),n[e]=t}function FR(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var s=31-qi(t),r=1<<s;e[s]=0,i[s]=-1,n[s]=-1,t&=~r}}function SA(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-qi(t),s=1<<i;s&e|n[i]&e&&(n[i]|=e),t&=~s}}var ve=0;function S_(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var A_,AA,x_,E_,C_,iS=!1,Pm=[],Xo=null,Go=null,Yo=null,cf=new Map,uf=new Map,Ur=[],IR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vx(n,e){switch(n){case"focusin":case"focusout":Xo=null;break;case"dragenter":case"dragleave":Go=null;break;case"mouseover":case"mouseout":Yo=null;break;case"pointerover":case"pointerout":cf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uf.delete(e.pointerId)}}function dd(n,e,t,i,s,r){return n===null||n.nativeEvent!==r?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:r,targetContainers:[s]},e!==null&&(e=cm(e),e!==null&&AA(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),n)}function OR(n,e,t,i,s){switch(e){case"focusin":return Xo=dd(Xo,n,e,t,i,s),!0;case"dragenter":return Go=dd(Go,n,e,t,i,s),!0;case"mouseover":return Yo=dd(Yo,n,e,t,i,s),!0;case"pointerover":var r=s.pointerId;return cf.set(r,dd(cf.get(r)||null,n,e,t,i,s)),!0;case"gotpointercapture":return r=s.pointerId,uf.set(r,dd(uf.get(r)||null,n,e,t,i,s)),!0}return!1}function __(n){var e=ba(n.target);if(e!==null){var t=lc(e);if(t!==null){if(e=t.tag,e===13){if(e=p_(t),e!==null){n.blockedOn=e,C_(n.priority,function(){x_(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ev(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=sS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);Zb=i,t.target.dispatchEvent(i),Zb=null}else return e=cm(t),e!==null&&AA(e),n.blockedOn=t,!1;e.shift()}return!0}function Wx(n,e,t){ev(n)&&t.delete(e)}function BR(){iS=!1,Xo!==null&&ev(Xo)&&(Xo=null),Go!==null&&ev(Go)&&(Go=null),Yo!==null&&ev(Yo)&&(Yo=null),cf.forEach(Wx),uf.forEach(Wx)}function fd(n,e){n.blockedOn===e&&(n.blockedOn=null,iS||(iS=!0,ei.unstable_scheduleCallback(ei.unstable_NormalPriority,BR)))}function hf(n){function e(s){return fd(s,n)}if(0<Pm.length){fd(Pm[0],n);for(var t=1;t<Pm.length;t++){var i=Pm[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Xo!==null&&fd(Xo,n),Go!==null&&fd(Go,n),Yo!==null&&fd(Yo,n),cf.forEach(e),uf.forEach(e),t=0;t<Ur.length;t++)i=Ur[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Ur.length&&(t=Ur[0],t.blockedOn===null);)__(t),t.blockedOn===null&&Ur.shift()}var Hc=Fr.ReactCurrentBatchConfig,Gv=!0;function jR(n,e,t,i){var s=ve,r=Hc.transition;Hc.transition=null;try{ve=1,xA(n,e,t,i)}finally{ve=s,Hc.transition=r}}function zR(n,e,t,i){var s=ve,r=Hc.transition;Hc.transition=null;try{ve=4,xA(n,e,t,i)}finally{ve=s,Hc.transition=r}}function xA(n,e,t,i){if(Gv){var s=sS(n,e,t,i);if(s===null)pb(n,e,i,Yv,t),Vx(n,i);else if(OR(s,n,e,t,i))i.stopPropagation();else if(Vx(n,i),e&4&&-1<IR.indexOf(n)){for(;s!==null;){var r=cm(s);if(r!==null&&A_(r),r=sS(n,e,t,i),r===null&&pb(n,e,i,Yv,t),r===s)break;s=r}s!==null&&i.stopPropagation()}else pb(n,e,i,null,t)}}var Yv=null;function sS(n,e,t,i){if(Yv=null,n=wA(i),n=ba(n),n!==null)if(e=lc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=p_(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Yv=n,null}function k_(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(kR()){case bA:return 1;case y_:return 4;case Wv:case TR:return 16;case w_:return 536870912;default:return 16}default:return 16}}var Vo=null,EA=null,tv=null;function T_(){if(tv)return tv;var n,e=EA,t=e.length,i,s="value"in Vo?Vo.value:Vo.textContent,r=s.length;for(n=0;n<t&&e[n]===s[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===s[r-i];i++);return tv=s.slice(n,1<i?1-i:void 0)}function nv(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Rm(){return!0}function Xx(){return!1}function ii(n){function e(t,i,s,r,o){this._reactName=t,this._targetInst=s,this.type=i,this.nativeEvent=r,this.target=o,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(r):r[l]);return this.isDefaultPrevented=(r.defaultPrevented!=null?r.defaultPrevented:r.returnValue===!1)?Rm:Xx,this.isPropagationStopped=Xx,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Rm)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Rm)},persist:function(){},isPersistent:Rm}),e}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},CA=ii(sd),lm=Ke({},sd,{view:0,detail:0}),UR=ii(lm),rb,ob,pd,mw=Ke({},lm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_A,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pd&&(pd&&n.type==="mousemove"?(rb=n.screenX-pd.screenX,ob=n.screenY-pd.screenY):ob=rb=0,pd=n),rb)},movementY:function(n){return"movementY"in n?n.movementY:ob}}),Gx=ii(mw),HR=Ke({},mw,{dataTransfer:0}),$R=ii(HR),VR=Ke({},lm,{relatedTarget:0}),ab=ii(VR),WR=Ke({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),XR=ii(WR),GR=Ke({},sd,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),YR=ii(GR),qR=Ke({},sd,{data:0}),Yx=ii(qR),KR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JR(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=ZR[n])?!!e[n]:!1}function _A(){return JR}var eN=Ke({},lm,{key:function(n){if(n.key){var e=KR[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=nv(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?QR[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_A,charCode:function(n){return n.type==="keypress"?nv(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?nv(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),tN=ii(eN),nN=Ke({},mw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qx=ii(nN),iN=Ke({},lm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_A}),sN=ii(iN),rN=Ke({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),oN=ii(rN),aN=Ke({},mw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),lN=ii(aN),cN=[9,13,27,32],kA=Pr&&"CompositionEvent"in window,Qd=null;Pr&&"documentMode"in document&&(Qd=document.documentMode);var uN=Pr&&"TextEvent"in window&&!Qd,P_=Pr&&(!kA||Qd&&8<Qd&&11>=Qd),Kx=String.fromCharCode(32),Qx=!1;function R_(n,e){switch(n){case"keyup":return cN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N_(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ec=!1;function hN(n,e){switch(n){case"compositionend":return N_(e);case"keypress":return e.which!==32?null:(Qx=!0,Kx);case"textInput":return n=e.data,n===Kx&&Qx?null:n;default:return null}}function dN(n,e){if(Ec)return n==="compositionend"||!kA&&R_(n,e)?(n=T_(),tv=EA=Vo=null,Ec=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return P_&&e.locale!=="ko"?null:e.data;default:return null}}var fN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zx(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!fN[n.type]:e==="textarea"}function L_(n,e,t,i){c_(i),e=qv(e,"onChange"),0<e.length&&(t=new CA("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Zd=null,df=null;function pN(n){$_(n,0)}function vw(n){var e=kc(n);if(n_(e))return n}function gN(n,e){if(n==="change")return e}var D_=!1;if(Pr){var lb;if(Pr){var cb="oninput"in document;if(!cb){var Jx=document.createElement("div");Jx.setAttribute("oninput","return;"),cb=typeof Jx.oninput=="function"}lb=cb}else lb=!1;D_=lb&&(!document.documentMode||9<document.documentMode)}function eE(){Zd&&(Zd.detachEvent("onpropertychange",M_),df=Zd=null)}function M_(n){if(n.propertyName==="value"&&vw(df)){var e=[];L_(e,df,n,wA(n)),f_(pN,e)}}function mN(n,e,t){n==="focusin"?(eE(),Zd=e,df=t,Zd.attachEvent("onpropertychange",M_)):n==="focusout"&&eE()}function vN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return vw(df)}function yN(n,e){if(n==="click")return vw(e)}function wN(n,e){if(n==="input"||n==="change")return vw(e)}function bN(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Qi=typeof Object.is=="function"?Object.is:bN;function ff(n,e){if(Qi(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var s=t[i];if(!zb.call(e,s)||!Qi(n[s],e[s]))return!1}return!0}function tE(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function nE(n,e){var t=tE(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=tE(t)}}function F_(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?F_(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function I_(){for(var n=window,e=Hv();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Hv(n.document)}return e}function TA(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function SN(n){var e=I_(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&F_(t.ownerDocument.documentElement,t)){if(i!==null&&TA(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var s=t.textContent.length,r=Math.min(i.start,s);i=i.end===void 0?r:Math.min(i.end,s),!n.extend&&r>i&&(s=i,i=r,r=s),s=nE(t,r);var o=nE(t,i);s&&o&&(n.rangeCount!==1||n.anchorNode!==s.node||n.anchorOffset!==s.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),n.removeAllRanges(),r>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var AN=Pr&&"documentMode"in document&&11>=document.documentMode,Cc=null,rS=null,Jd=null,oS=!1;function iE(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;oS||Cc==null||Cc!==Hv(i)||(i=Cc,"selectionStart"in i&&TA(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Jd&&ff(Jd,i)||(Jd=i,i=qv(rS,"onSelect"),0<i.length&&(e=new CA("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Cc)))}function Nm(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var _c={animationend:Nm("Animation","AnimationEnd"),animationiteration:Nm("Animation","AnimationIteration"),animationstart:Nm("Animation","AnimationStart"),transitionend:Nm("Transition","TransitionEnd")},ub={},O_={};Pr&&(O_=document.createElement("div").style,"AnimationEvent"in window||(delete _c.animationend.animation,delete _c.animationiteration.animation,delete _c.animationstart.animation),"TransitionEvent"in window||delete _c.transitionend.transition);function yw(n){if(ub[n])return ub[n];if(!_c[n])return n;var e=_c[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in O_)return ub[n]=e[t];return n}var B_=yw("animationend"),j_=yw("animationiteration"),z_=yw("animationstart"),U_=yw("transitionend"),H_=new Map,sE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function oa(n,e){H_.set(n,e),ac(e,[n])}for(var hb=0;hb<sE.length;hb++){var db=sE[hb],xN=db.toLowerCase(),EN=db[0].toUpperCase()+db.slice(1);oa(xN,"on"+EN)}oa(B_,"onAnimationEnd");oa(j_,"onAnimationIteration");oa(z_,"onAnimationStart");oa("dblclick","onDoubleClick");oa("focusin","onFocus");oa("focusout","onBlur");oa(U_,"onTransitionEnd");Gh("onMouseEnter",["mouseout","mouseover"]);Gh("onMouseLeave",["mouseout","mouseover"]);Gh("onPointerEnter",["pointerout","pointerover"]);Gh("onPointerLeave",["pointerout","pointerover"]);ac("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ac("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ac("onBeforeInput",["compositionend","keypress","textInput","paste"]);ac("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ac("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ac("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CN=new Set("cancel close invalid load scroll toggle".split(" ").concat(_d));function rE(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,xR(i,e,void 0,n),n.currentTarget=null}function $_(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],s=i.event;i=i.listeners;e:{var r=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==r&&s.isPropagationStopped())break e;rE(s,l,u),r=c}else for(o=0;o<i.length;o++){if(l=i[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==r&&s.isPropagationStopped())break e;rE(s,l,u),r=c}}}if(Vv)throw n=tS,Vv=!1,tS=null,n}function Fe(n,e){var t=e[hS];t===void 0&&(t=e[hS]=new Set);var i=n+"__bubble";t.has(i)||(V_(e,n,2,!1),t.add(i))}function fb(n,e,t){var i=0;e&&(i|=4),V_(t,n,i,e)}var Lm="_reactListening"+Math.random().toString(36).slice(2);function pf(n){if(!n[Lm]){n[Lm]=!0,QC.forEach(function(t){t!=="selectionchange"&&(CN.has(t)||fb(t,!1,n),fb(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Lm]||(e[Lm]=!0,fb("selectionchange",!1,e))}}function V_(n,e,t,i){switch(k_(e)){case 1:var s=jR;break;case 4:s=zR;break;default:s=xA}t=s.bind(null,e,t,n),s=void 0,!eS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?n.addEventListener(e,t,{capture:!0,passive:s}):n.addEventListener(e,t,!0):s!==void 0?n.addEventListener(e,t,{passive:s}):n.addEventListener(e,t,!1)}function pb(n,e,t,i,s){var r=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ba(l),o===null)return;if(c=o.tag,c===5||c===6){i=r=o;continue e}l=l.parentNode}}i=i.return}f_(function(){var u=r,h=wA(t),d=[];e:{var f=H_.get(n);if(f!==void 0){var m=CA,y=n;switch(n){case"keypress":if(nv(t)===0)break e;case"keydown":case"keyup":m=tN;break;case"focusin":y="focus",m=ab;break;case"focusout":y="blur",m=ab;break;case"beforeblur":case"afterblur":m=ab;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=Gx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=$R;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=sN;break;case B_:case j_:case z_:m=XR;break;case U_:m=oN;break;case"scroll":m=UR;break;case"wheel":m=lN;break;case"copy":case"cut":case"paste":m=YR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=qx}var w=(e&4)!==0,x=!w&&n==="scroll",v=w?f!==null?f+"Capture":null:f;w=[];for(var b=u,A;b!==null;){A=b;var E=A.stateNode;if(A.tag===5&&E!==null&&(A=E,v!==null&&(E=lf(b,v),E!=null&&w.push(gf(b,E,A)))),x)break;b=b.return}0<w.length&&(f=new m(f,y,null,t,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",f&&t!==Zb&&(y=t.relatedTarget||t.fromElement)&&(ba(y)||y[Rr]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(y=t.relatedTarget||t.toElement,m=u,y=y?ba(y):null,y!==null&&(x=lc(y),y!==x||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=u),m!==y)){if(w=Gx,E="onMouseLeave",v="onMouseEnter",b="mouse",(n==="pointerout"||n==="pointerover")&&(w=qx,E="onPointerLeave",v="onPointerEnter",b="pointer"),x=m==null?f:kc(m),A=y==null?f:kc(y),f=new w(E,b+"leave",m,t,h),f.target=x,f.relatedTarget=A,E=null,ba(h)===u&&(w=new w(v,b+"enter",y,t,h),w.target=A,w.relatedTarget=x,E=w),x=E,m&&y)t:{for(w=m,v=y,b=0,A=w;A;A=dc(A))b++;for(A=0,E=v;E;E=dc(E))A++;for(;0<b-A;)w=dc(w),b--;for(;0<A-b;)v=dc(v),A--;for(;b--;){if(w===v||v!==null&&w===v.alternate)break t;w=dc(w),v=dc(v)}w=null}else w=null;m!==null&&oE(d,f,m,w,!1),y!==null&&x!==null&&oE(d,x,y,w,!0)}}e:{if(f=u?kc(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var _=gN;else if(Zx(f))if(D_)_=wN;else{_=vN;var k=mN}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=yN);if(_&&(_=_(n,u))){L_(d,_,t,h);break e}k&&k(n,f,u),n==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&Gb(f,"number",f.value)}switch(k=u?kc(u):window,n){case"focusin":(Zx(k)||k.contentEditable==="true")&&(Cc=k,rS=u,Jd=null);break;case"focusout":Jd=rS=Cc=null;break;case"mousedown":oS=!0;break;case"contextmenu":case"mouseup":case"dragend":oS=!1,iE(d,t,h);break;case"selectionchange":if(AN)break;case"keydown":case"keyup":iE(d,t,h)}var T;if(kA)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Ec?R_(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(P_&&t.locale!=="ko"&&(Ec||P!=="onCompositionStart"?P==="onCompositionEnd"&&Ec&&(T=T_()):(Vo=h,EA="value"in Vo?Vo.value:Vo.textContent,Ec=!0)),k=qv(u,P),0<k.length&&(P=new Yx(P,n,null,t,h),d.push({event:P,listeners:k}),T?P.data=T:(T=N_(t),T!==null&&(P.data=T)))),(T=uN?hN(n,t):dN(n,t))&&(u=qv(u,"onBeforeInput"),0<u.length&&(h=new Yx("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=T))}$_(d,e)})}function gf(n,e,t){return{instance:n,listener:e,currentTarget:t}}function qv(n,e){for(var t=e+"Capture",i=[];n!==null;){var s=n,r=s.stateNode;s.tag===5&&r!==null&&(s=r,r=lf(n,t),r!=null&&i.unshift(gf(n,r,s)),r=lf(n,e),r!=null&&i.push(gf(n,r,s))),n=n.return}return i}function dc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function oE(n,e,t,i,s){for(var r=e._reactName,o=[];t!==null&&t!==i;){var l=t,c=l.alternate,u=l.stateNode;if(c!==null&&c===i)break;l.tag===5&&u!==null&&(l=u,s?(c=lf(t,r),c!=null&&o.unshift(gf(t,c,l))):s||(c=lf(t,r),c!=null&&o.push(gf(t,c,l)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var _N=/\r\n?/g,kN=/\u0000|\uFFFD/g;function aE(n){return(typeof n=="string"?n:""+n).replace(_N,`
`).replace(kN,"")}function Dm(n,e,t){if(e=aE(e),aE(n)!==e&&t)throw Error(I(425))}function Kv(){}var aS=null,lS=null;function cS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uS=typeof setTimeout=="function"?setTimeout:void 0,TN=typeof clearTimeout=="function"?clearTimeout:void 0,lE=typeof Promise=="function"?Promise:void 0,PN=typeof queueMicrotask=="function"?queueMicrotask:typeof lE<"u"?function(n){return lE.resolve(null).then(n).catch(RN)}:uS;function RN(n){setTimeout(function(){throw n})}function gb(n,e){var t=e,i=0;do{var s=t.nextSibling;if(n.removeChild(t),s&&s.nodeType===8)if(t=s.data,t==="/$"){if(i===0){n.removeChild(s),hf(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=s}while(t);hf(e)}function qo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function cE(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var rd=Math.random().toString(36).slice(2),Ps="__reactFiber$"+rd,mf="__reactProps$"+rd,Rr="__reactContainer$"+rd,hS="__reactEvents$"+rd,NN="__reactListeners$"+rd,LN="__reactHandles$"+rd;function ba(n){var e=n[Ps];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Rr]||t[Ps]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=cE(n);n!==null;){if(t=n[Ps])return t;n=cE(n)}return e}n=t,t=n.parentNode}return null}function cm(n){return n=n[Ps]||n[Rr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function kc(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(I(33))}function ww(n){return n[mf]||null}var dS=[],Tc=-1;function aa(n){return{current:n}}function Ie(n){0>Tc||(n.current=dS[Tc],dS[Tc]=null,Tc--)}function Le(n,e){Tc++,dS[Tc]=n.current,n.current=e}var na={},en=aa(na),_n=aa(!1),ec=na;function Yh(n,e){var t=n.type.contextTypes;if(!t)return na;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},r;for(r in t)s[r]=e[r];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=s),s}function kn(n){return n=n.childContextTypes,n!=null}function Qv(){Ie(_n),Ie(en)}function uE(n,e,t){if(en.current!==na)throw Error(I(168));Le(en,e),Le(_n,t)}function W_(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(I(108,mR(n)||"Unknown",s));return Ke({},t,i)}function Zv(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||na,ec=en.current,Le(en,n),Le(_n,_n.current),!0}function hE(n,e,t){var i=n.stateNode;if(!i)throw Error(I(169));t?(n=W_(n,e,ec),i.__reactInternalMemoizedMergedChildContext=n,Ie(_n),Ie(en),Le(en,n)):Ie(_n),Le(_n,t)}var Us=null,bw=!1,mb=!1;function X_(n){Us===null?Us=[n]:Us.push(n)}function DN(n){bw=!0,X_(n)}function la(){if(!mb&&Us!==null){mb=!0;var n=0,e=ve;try{var t=Us;for(ve=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Us=null,bw=!1}catch(s){throw Us!==null&&(Us=Us.slice(n+1)),v_(bA,la),s}finally{ve=e,mb=!1}}return null}var Pc=[],Rc=0,Jv=null,ey=0,wi=[],bi=0,tc=null,Cr=1,_r="";function da(n,e){Pc[Rc++]=ey,Pc[Rc++]=Jv,Jv=n,ey=e}function G_(n,e,t){wi[bi++]=Cr,wi[bi++]=_r,wi[bi++]=tc,tc=n;var i=Cr;n=_r;var s=32-qi(i)-1;i&=~(1<<s),t+=1;var r=32-qi(e)+s;if(30<r){var o=s-s%5;r=(i&(1<<o)-1).toString(32),i>>=o,s-=o,Cr=1<<32-qi(e)+s|t<<s|i,_r=r+n}else Cr=1<<r|t<<s|i,_r=n}function PA(n){n.return!==null&&(da(n,1),G_(n,1,0))}function RA(n){for(;n===Jv;)Jv=Pc[--Rc],Pc[Rc]=null,ey=Pc[--Rc],Pc[Rc]=null;for(;n===tc;)tc=wi[--bi],wi[bi]=null,_r=wi[--bi],wi[bi]=null,Cr=wi[--bi],wi[bi]=null}var Jn=null,Zn=null,He=!1,Gi=null;function Y_(n,e){var t=Ai(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function dE(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Jn=n,Zn=qo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Jn=n,Zn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=tc!==null?{id:Cr,overflow:_r}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ai(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Jn=n,Zn=null,!0):!1;default:return!1}}function fS(n){return(n.mode&1)!==0&&(n.flags&128)===0}function pS(n){if(He){var e=Zn;if(e){var t=e;if(!dE(n,e)){if(fS(n))throw Error(I(418));e=qo(t.nextSibling);var i=Jn;e&&dE(n,e)?Y_(i,t):(n.flags=n.flags&-4097|2,He=!1,Jn=n)}}else{if(fS(n))throw Error(I(418));n.flags=n.flags&-4097|2,He=!1,Jn=n}}}function fE(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Jn=n}function Mm(n){if(n!==Jn)return!1;if(!He)return fE(n),He=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!cS(n.type,n.memoizedProps)),e&&(e=Zn)){if(fS(n))throw q_(),Error(I(418));for(;e;)Y_(n,e),e=qo(e.nextSibling)}if(fE(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(I(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Zn=qo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Zn=null}}else Zn=Jn?qo(n.stateNode.nextSibling):null;return!0}function q_(){for(var n=Zn;n;)n=qo(n.nextSibling)}function qh(){Zn=Jn=null,He=!1}function NA(n){Gi===null?Gi=[n]:Gi.push(n)}var MN=Fr.ReactCurrentBatchConfig;function gd(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(I(309));var i=t.stateNode}if(!i)throw Error(I(147,n));var s=i,r=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===r?e.ref:(e=function(o){var l=s.refs;o===null?delete l[r]:l[r]=o},e._stringRef=r,e)}if(typeof n!="string")throw Error(I(284));if(!t._owner)throw Error(I(290,n))}return n}function Fm(n,e){throw n=Object.prototype.toString.call(e),Error(I(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function pE(n){var e=n._init;return e(n._payload)}function K_(n){function e(v,b){if(n){var A=v.deletions;A===null?(v.deletions=[b],v.flags|=16):A.push(b)}}function t(v,b){if(!n)return null;for(;b!==null;)e(v,b),b=b.sibling;return null}function i(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(v,b){return v=Jo(v,b),v.index=0,v.sibling=null,v}function r(v,b,A){return v.index=A,n?(A=v.alternate,A!==null?(A=A.index,A<b?(v.flags|=2,b):A):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function l(v,b,A,E){return b===null||b.tag!==6?(b=xb(A,v.mode,E),b.return=v,b):(b=s(b,A),b.return=v,b)}function c(v,b,A,E){var _=A.type;return _===xc?h(v,b,A.props.children,E,A.key):b!==null&&(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===jr&&pE(_)===b.type)?(E=s(b,A.props),E.ref=gd(v,b,A),E.return=v,E):(E=cv(A.type,A.key,A.props,null,v.mode,E),E.ref=gd(v,b,A),E.return=v,E)}function u(v,b,A,E){return b===null||b.tag!==4||b.stateNode.containerInfo!==A.containerInfo||b.stateNode.implementation!==A.implementation?(b=Eb(A,v.mode,E),b.return=v,b):(b=s(b,A.children||[]),b.return=v,b)}function h(v,b,A,E,_){return b===null||b.tag!==7?(b=Zl(A,v.mode,E,_),b.return=v,b):(b=s(b,A),b.return=v,b)}function d(v,b,A){if(typeof b=="string"&&b!==""||typeof b=="number")return b=xb(""+b,v.mode,A),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Em:return A=cv(b.type,b.key,b.props,null,v.mode,A),A.ref=gd(v,null,b),A.return=v,A;case Ac:return b=Eb(b,v.mode,A),b.return=v,b;case jr:var E=b._init;return d(v,E(b._payload),A)}if(Ed(b)||ud(b))return b=Zl(b,v.mode,A,null),b.return=v,b;Fm(v,b)}return null}function f(v,b,A,E){var _=b!==null?b.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return _!==null?null:l(v,b,""+A,E);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Em:return A.key===_?c(v,b,A,E):null;case Ac:return A.key===_?u(v,b,A,E):null;case jr:return _=A._init,f(v,b,_(A._payload),E)}if(Ed(A)||ud(A))return _!==null?null:h(v,b,A,E,null);Fm(v,A)}return null}function m(v,b,A,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return v=v.get(A)||null,l(b,v,""+E,_);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Em:return v=v.get(E.key===null?A:E.key)||null,c(b,v,E,_);case Ac:return v=v.get(E.key===null?A:E.key)||null,u(b,v,E,_);case jr:var k=E._init;return m(v,b,A,k(E._payload),_)}if(Ed(E)||ud(E))return v=v.get(A)||null,h(b,v,E,_,null);Fm(b,E)}return null}function y(v,b,A,E){for(var _=null,k=null,T=b,P=b=0,N=null;T!==null&&P<A.length;P++){T.index>P?(N=T,T=null):N=T.sibling;var R=f(v,T,A[P],E);if(R===null){T===null&&(T=N);break}n&&T&&R.alternate===null&&e(v,T),b=r(R,b,P),k===null?_=R:k.sibling=R,k=R,T=N}if(P===A.length)return t(v,T),He&&da(v,P),_;if(T===null){for(;P<A.length;P++)T=d(v,A[P],E),T!==null&&(b=r(T,b,P),k===null?_=T:k.sibling=T,k=T);return He&&da(v,P),_}for(T=i(v,T);P<A.length;P++)N=m(T,v,P,A[P],E),N!==null&&(n&&N.alternate!==null&&T.delete(N.key===null?P:N.key),b=r(N,b,P),k===null?_=N:k.sibling=N,k=N);return n&&T.forEach(function(L){return e(v,L)}),He&&da(v,P),_}function w(v,b,A,E){var _=ud(A);if(typeof _!="function")throw Error(I(150));if(A=_.call(A),A==null)throw Error(I(151));for(var k=_=null,T=b,P=b=0,N=null,R=A.next();T!==null&&!R.done;P++,R=A.next()){T.index>P?(N=T,T=null):N=T.sibling;var L=f(v,T,R.value,E);if(L===null){T===null&&(T=N);break}n&&T&&L.alternate===null&&e(v,T),b=r(L,b,P),k===null?_=L:k.sibling=L,k=L,T=N}if(R.done)return t(v,T),He&&da(v,P),_;if(T===null){for(;!R.done;P++,R=A.next())R=d(v,R.value,E),R!==null&&(b=r(R,b,P),k===null?_=R:k.sibling=R,k=R);return He&&da(v,P),_}for(T=i(v,T);!R.done;P++,R=A.next())R=m(T,v,P,R.value,E),R!==null&&(n&&R.alternate!==null&&T.delete(R.key===null?P:R.key),b=r(R,b,P),k===null?_=R:k.sibling=R,k=R);return n&&T.forEach(function(O){return e(v,O)}),He&&da(v,P),_}function x(v,b,A,E){if(typeof A=="object"&&A!==null&&A.type===xc&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case Em:e:{for(var _=A.key,k=b;k!==null;){if(k.key===_){if(_=A.type,_===xc){if(k.tag===7){t(v,k.sibling),b=s(k,A.props.children),b.return=v,v=b;break e}}else if(k.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===jr&&pE(_)===k.type){t(v,k.sibling),b=s(k,A.props),b.ref=gd(v,k,A),b.return=v,v=b;break e}t(v,k);break}else e(v,k);k=k.sibling}A.type===xc?(b=Zl(A.props.children,v.mode,E,A.key),b.return=v,v=b):(E=cv(A.type,A.key,A.props,null,v.mode,E),E.ref=gd(v,b,A),E.return=v,v=E)}return o(v);case Ac:e:{for(k=A.key;b!==null;){if(b.key===k)if(b.tag===4&&b.stateNode.containerInfo===A.containerInfo&&b.stateNode.implementation===A.implementation){t(v,b.sibling),b=s(b,A.children||[]),b.return=v,v=b;break e}else{t(v,b);break}else e(v,b);b=b.sibling}b=Eb(A,v.mode,E),b.return=v,v=b}return o(v);case jr:return k=A._init,x(v,b,k(A._payload),E)}if(Ed(A))return y(v,b,A,E);if(ud(A))return w(v,b,A,E);Fm(v,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,b!==null&&b.tag===6?(t(v,b.sibling),b=s(b,A),b.return=v,v=b):(t(v,b),b=xb(A,v.mode,E),b.return=v,v=b),o(v)):t(v,b)}return x}var Kh=K_(!0),Q_=K_(!1),ty=aa(null),ny=null,Nc=null,LA=null;function DA(){LA=Nc=ny=null}function MA(n){var e=ty.current;Ie(ty),n._currentValue=e}function gS(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function $c(n,e){ny=n,LA=Nc=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Cn=!0),n.firstContext=null)}function Ci(n){var e=n._currentValue;if(LA!==n)if(n={context:n,memoizedValue:e,next:null},Nc===null){if(ny===null)throw Error(I(308));Nc=n,ny.dependencies={lanes:0,firstContext:n}}else Nc=Nc.next=n;return e}var Sa=null;function FA(n){Sa===null?Sa=[n]:Sa.push(n)}function Z_(n,e,t,i){var s=e.interleaved;return s===null?(t.next=t,FA(e)):(t.next=s.next,s.next=t),e.interleaved=t,Nr(n,i)}function Nr(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var zr=!1;function IA(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function J_(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function kr(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ko(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,de&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Nr(n,t)}return s=i.interleaved,s===null?(e.next=e,FA(i)):(e.next=s.next,s.next=e),i.interleaved=e,Nr(n,t)}function iv(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,SA(n,t)}}function gE(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var s=null,r=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};r===null?s=r=o:r=r.next=o,t=t.next}while(t!==null);r===null?s=r=e:r=r.next=e}else s=r=e;t={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:r,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function iy(n,e,t,i){var s=n.updateQueue;zr=!1;var r=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?r=u:o.next=u,o=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(r!==null){var d=s.baseState;o=0,h=u=c=null,l=r;do{var f=l.lane,m=l.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=n,w=l;switch(f=e,m=t,w.tag){case 1:if(y=w.payload,typeof y=="function"){d=y.call(m,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,f=typeof y=="function"?y.call(m,d,f):y,f==null)break e;d=Ke({},d,f);break e;case 2:zr=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=m,c=d):h=h.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(h===null&&(c=d),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else r===null&&(s.shared.lanes=0);ic|=o,n.lanes=o,n.memoizedState=d}}function mE(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],s=i.callback;if(s!==null){if(i.callback=null,i=t,typeof s!="function")throw Error(I(191,s));s.call(i)}}}var um={},Ls=aa(um),vf=aa(um),yf=aa(um);function Aa(n){if(n===um)throw Error(I(174));return n}function OA(n,e){switch(Le(yf,e),Le(vf,n),Le(Ls,um),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qb(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=qb(e,n)}Ie(Ls),Le(Ls,e)}function Qh(){Ie(Ls),Ie(vf),Ie(yf)}function ek(n){Aa(yf.current);var e=Aa(Ls.current),t=qb(e,n.type);e!==t&&(Le(vf,n),Le(Ls,t))}function BA(n){vf.current===n&&(Ie(Ls),Ie(vf))}var Xe=aa(0);function sy(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vb=[];function jA(){for(var n=0;n<vb.length;n++)vb[n]._workInProgressVersionPrimary=null;vb.length=0}var sv=Fr.ReactCurrentDispatcher,yb=Fr.ReactCurrentBatchConfig,nc=0,Ye=null,gt=null,Ct=null,ry=!1,ef=!1,wf=0,FN=0;function Ht(){throw Error(I(321))}function zA(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Qi(n[t],e[t]))return!1;return!0}function UA(n,e,t,i,s,r){if(nc=r,Ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sv.current=n===null||n.memoizedState===null?jN:zN,n=t(i,s),ef){r=0;do{if(ef=!1,wf=0,25<=r)throw Error(I(301));r+=1,Ct=gt=null,e.updateQueue=null,sv.current=UN,n=t(i,s)}while(ef)}if(sv.current=oy,e=gt!==null&&gt.next!==null,nc=0,Ct=gt=Ye=null,ry=!1,e)throw Error(I(300));return n}function HA(){var n=wf!==0;return wf=0,n}function ss(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Ye.memoizedState=Ct=n:Ct=Ct.next=n,Ct}function _i(){if(gt===null){var n=Ye.alternate;n=n!==null?n.memoizedState:null}else n=gt.next;var e=Ct===null?Ye.memoizedState:Ct.next;if(e!==null)Ct=e,gt=n;else{if(n===null)throw Error(I(310));gt=n,n={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Ct===null?Ye.memoizedState=Ct=n:Ct=Ct.next=n}return Ct}function bf(n,e){return typeof e=="function"?e(n):e}function wb(n){var e=_i(),t=e.queue;if(t===null)throw Error(I(311));t.lastRenderedReducer=n;var i=gt,s=i.baseQueue,r=t.pending;if(r!==null){if(s!==null){var o=s.next;s.next=r.next,r.next=o}i.baseQueue=s=r,t.pending=null}if(s!==null){r=s.next,i=i.baseState;var l=o=null,c=null,u=r;do{var h=u.lane;if((nc&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=i):c=c.next=d,Ye.lanes|=h,ic|=h}u=u.next}while(u!==null&&u!==r);c===null?o=i:c.next=l,Qi(i,e.memoizedState)||(Cn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=c,t.lastRenderedState=i}if(n=t.interleaved,n!==null){s=n;do r=s.lane,Ye.lanes|=r,ic|=r,s=s.next;while(s!==n)}else s===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function bb(n){var e=_i(),t=e.queue;if(t===null)throw Error(I(311));t.lastRenderedReducer=n;var i=t.dispatch,s=t.pending,r=e.memoizedState;if(s!==null){t.pending=null;var o=s=s.next;do r=n(r,o.action),o=o.next;while(o!==s);Qi(r,e.memoizedState)||(Cn=!0),e.memoizedState=r,e.baseQueue===null&&(e.baseState=r),t.lastRenderedState=r}return[r,i]}function tk(){}function nk(n,e){var t=Ye,i=_i(),s=e(),r=!Qi(i.memoizedState,s);if(r&&(i.memoizedState=s,Cn=!0),i=i.queue,$A(rk.bind(null,t,i,n),[n]),i.getSnapshot!==e||r||Ct!==null&&Ct.memoizedState.tag&1){if(t.flags|=2048,Sf(9,sk.bind(null,t,i,s,e),void 0,null),_t===null)throw Error(I(349));nc&30||ik(t,e,s)}return s}function ik(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function sk(n,e,t,i){e.value=t,e.getSnapshot=i,ok(e)&&ak(n)}function rk(n,e,t){return t(function(){ok(e)&&ak(n)})}function ok(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Qi(n,t)}catch{return!0}}function ak(n){var e=Nr(n,1);e!==null&&Ki(e,n,1,-1)}function vE(n){var e=ss();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bf,lastRenderedState:n},e.queue=n,n=n.dispatch=BN.bind(null,Ye,n),[e.memoizedState,n]}function Sf(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Ye.updateQueue,e===null?(e={lastEffect:null,stores:null},Ye.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function lk(){return _i().memoizedState}function rv(n,e,t,i){var s=ss();Ye.flags|=n,s.memoizedState=Sf(1|e,t,void 0,i===void 0?null:i)}function Sw(n,e,t,i){var s=_i();i=i===void 0?null:i;var r=void 0;if(gt!==null){var o=gt.memoizedState;if(r=o.destroy,i!==null&&zA(i,o.deps)){s.memoizedState=Sf(e,t,r,i);return}}Ye.flags|=n,s.memoizedState=Sf(1|e,t,r,i)}function yE(n,e){return rv(8390656,8,n,e)}function $A(n,e){return Sw(2048,8,n,e)}function ck(n,e){return Sw(4,2,n,e)}function uk(n,e){return Sw(4,4,n,e)}function hk(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function dk(n,e,t){return t=t!=null?t.concat([n]):null,Sw(4,4,hk.bind(null,e,n),t)}function VA(){}function fk(n,e){var t=_i();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&zA(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function pk(n,e){var t=_i();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&zA(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function gk(n,e,t){return nc&21?(Qi(t,e)||(t=b_(),Ye.lanes|=t,ic|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Cn=!0),n.memoizedState=t)}function IN(n,e){var t=ve;ve=t!==0&&4>t?t:4,n(!0);var i=yb.transition;yb.transition={};try{n(!1),e()}finally{ve=t,yb.transition=i}}function mk(){return _i().memoizedState}function ON(n,e,t){var i=Zo(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},vk(n))yk(e,t);else if(t=Z_(n,e,t,i),t!==null){var s=cn();Ki(t,n,i,s),wk(t,e,i)}}function BN(n,e,t){var i=Zo(n),s={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(vk(n))yk(e,s);else{var r=n.alternate;if(n.lanes===0&&(r===null||r.lanes===0)&&(r=e.lastRenderedReducer,r!==null))try{var o=e.lastRenderedState,l=r(o,t);if(s.hasEagerState=!0,s.eagerState=l,Qi(l,o)){var c=e.interleaved;c===null?(s.next=s,FA(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}t=Z_(n,e,s,i),t!==null&&(s=cn(),Ki(t,n,i,s),wk(t,e,i))}}function vk(n){var e=n.alternate;return n===Ye||e!==null&&e===Ye}function yk(n,e){ef=ry=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function wk(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,SA(n,t)}}var oy={readContext:Ci,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},jN={readContext:Ci,useCallback:function(n,e){return ss().memoizedState=[n,e===void 0?null:e],n},useContext:Ci,useEffect:yE,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,rv(4194308,4,hk.bind(null,e,n),t)},useLayoutEffect:function(n,e){return rv(4194308,4,n,e)},useInsertionEffect:function(n,e){return rv(4,2,n,e)},useMemo:function(n,e){var t=ss();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=ss();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=ON.bind(null,Ye,n),[i.memoizedState,n]},useRef:function(n){var e=ss();return n={current:n},e.memoizedState=n},useState:vE,useDebugValue:VA,useDeferredValue:function(n){return ss().memoizedState=n},useTransition:function(){var n=vE(!1),e=n[0];return n=IN.bind(null,n[1]),ss().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Ye,s=ss();if(He){if(t===void 0)throw Error(I(407));t=t()}else{if(t=e(),_t===null)throw Error(I(349));nc&30||ik(i,e,t)}s.memoizedState=t;var r={value:t,getSnapshot:e};return s.queue=r,yE(rk.bind(null,i,r,n),[n]),i.flags|=2048,Sf(9,sk.bind(null,i,r,t,e),void 0,null),t},useId:function(){var n=ss(),e=_t.identifierPrefix;if(He){var t=_r,i=Cr;t=(i&~(1<<32-qi(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=wf++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=FN++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},zN={readContext:Ci,useCallback:fk,useContext:Ci,useEffect:$A,useImperativeHandle:dk,useInsertionEffect:ck,useLayoutEffect:uk,useMemo:pk,useReducer:wb,useRef:lk,useState:function(){return wb(bf)},useDebugValue:VA,useDeferredValue:function(n){var e=_i();return gk(e,gt.memoizedState,n)},useTransition:function(){var n=wb(bf)[0],e=_i().memoizedState;return[n,e]},useMutableSource:tk,useSyncExternalStore:nk,useId:mk,unstable_isNewReconciler:!1},UN={readContext:Ci,useCallback:fk,useContext:Ci,useEffect:$A,useImperativeHandle:dk,useInsertionEffect:ck,useLayoutEffect:uk,useMemo:pk,useReducer:bb,useRef:lk,useState:function(){return bb(bf)},useDebugValue:VA,useDeferredValue:function(n){var e=_i();return gt===null?e.memoizedState=n:gk(e,gt.memoizedState,n)},useTransition:function(){var n=bb(bf)[0],e=_i().memoizedState;return[n,e]},useMutableSource:tk,useSyncExternalStore:nk,useId:mk,unstable_isNewReconciler:!1};function Ni(n,e){if(n&&n.defaultProps){e=Ke({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function mS(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Ke({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Aw={isMounted:function(n){return(n=n._reactInternals)?lc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=cn(),s=Zo(n),r=kr(i,s);r.payload=e,t!=null&&(r.callback=t),e=Ko(n,r,s),e!==null&&(Ki(e,n,s,i),iv(e,n,s))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=cn(),s=Zo(n),r=kr(i,s);r.tag=1,r.payload=e,t!=null&&(r.callback=t),e=Ko(n,r,s),e!==null&&(Ki(e,n,s,i),iv(e,n,s))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=cn(),i=Zo(n),s=kr(t,i);s.tag=2,e!=null&&(s.callback=e),e=Ko(n,s,i),e!==null&&(Ki(e,n,i,t),iv(e,n,i))}};function wE(n,e,t,i,s,r,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,r,o):e.prototype&&e.prototype.isPureReactComponent?!ff(t,i)||!ff(s,r):!0}function bk(n,e,t){var i=!1,s=na,r=e.contextType;return typeof r=="object"&&r!==null?r=Ci(r):(s=kn(e)?ec:en.current,i=e.contextTypes,r=(i=i!=null)?Yh(n,s):na),e=new e(t,r),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Aw,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=s,n.__reactInternalMemoizedMaskedChildContext=r),e}function bE(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Aw.enqueueReplaceState(e,e.state,null)}function vS(n,e,t,i){var s=n.stateNode;s.props=t,s.state=n.memoizedState,s.refs={},IA(n);var r=e.contextType;typeof r=="object"&&r!==null?s.context=Ci(r):(r=kn(e)?ec:en.current,s.context=Yh(n,r)),s.state=n.memoizedState,r=e.getDerivedStateFromProps,typeof r=="function"&&(mS(n,e,r,t),s.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Aw.enqueueReplaceState(s,s.state,null),iy(n,t,s,i),s.state=n.memoizedState),typeof s.componentDidMount=="function"&&(n.flags|=4194308)}function Zh(n,e){try{var t="",i=e;do t+=gR(i),i=i.return;while(i);var s=t}catch(r){s=`
Error generating stack: `+r.message+`
`+r.stack}return{value:n,source:e,stack:s,digest:null}}function Sb(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function yS(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var HN=typeof WeakMap=="function"?WeakMap:Map;function Sk(n,e,t){t=kr(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){ly||(ly=!0,TS=i),yS(n,e)},t}function Ak(n,e,t){t=kr(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;t.payload=function(){return i(s)},t.callback=function(){yS(n,e)}}var r=n.stateNode;return r!==null&&typeof r.componentDidCatch=="function"&&(t.callback=function(){yS(n,e),typeof i!="function"&&(Qo===null?Qo=new Set([this]):Qo.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function SE(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new HN;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(t)||(s.add(t),n=nL.bind(null,n,e,t),e.then(n,n))}function AE(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function xE(n,e,t,i,s){return n.mode&1?(n.flags|=65536,n.lanes=s,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=kr(-1,1),e.tag=2,Ko(t,e,1))),t.lanes|=1),n)}var $N=Fr.ReactCurrentOwner,Cn=!1;function ln(n,e,t,i){e.child=n===null?Q_(e,null,t,i):Kh(e,n.child,t,i)}function EE(n,e,t,i,s){t=t.render;var r=e.ref;return $c(e,s),i=UA(n,e,t,i,r,s),t=HA(),n!==null&&!Cn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Lr(n,e,s)):(He&&t&&PA(e),e.flags|=1,ln(n,e,i,s),e.child)}function CE(n,e,t,i,s){if(n===null){var r=t.type;return typeof r=="function"&&!ZA(r)&&r.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=r,xk(n,e,r,i,s)):(n=cv(t.type,null,i,e,e.mode,s),n.ref=e.ref,n.return=e,e.child=n)}if(r=n.child,!(n.lanes&s)){var o=r.memoizedProps;if(t=t.compare,t=t!==null?t:ff,t(o,i)&&n.ref===e.ref)return Lr(n,e,s)}return e.flags|=1,n=Jo(r,i),n.ref=e.ref,n.return=e,e.child=n}function xk(n,e,t,i,s){if(n!==null){var r=n.memoizedProps;if(ff(r,i)&&n.ref===e.ref)if(Cn=!1,e.pendingProps=i=r,(n.lanes&s)!==0)n.flags&131072&&(Cn=!0);else return e.lanes=n.lanes,Lr(n,e,s)}return wS(n,e,t,i,s)}function Ek(n,e,t){var i=e.pendingProps,s=i.children,r=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Dc,Kn),Kn|=t;else{if(!(t&1073741824))return n=r!==null?r.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Le(Dc,Kn),Kn|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=r!==null?r.baseLanes:t,Le(Dc,Kn),Kn|=i}else r!==null?(i=r.baseLanes|t,e.memoizedState=null):i=t,Le(Dc,Kn),Kn|=i;return ln(n,e,s,t),e.child}function Ck(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function wS(n,e,t,i,s){var r=kn(t)?ec:en.current;return r=Yh(e,r),$c(e,s),t=UA(n,e,t,i,r,s),i=HA(),n!==null&&!Cn?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~s,Lr(n,e,s)):(He&&i&&PA(e),e.flags|=1,ln(n,e,t,s),e.child)}function _E(n,e,t,i,s){if(kn(t)){var r=!0;Zv(e)}else r=!1;if($c(e,s),e.stateNode===null)ov(n,e),bk(e,t,i),vS(e,t,i,s),i=!0;else if(n===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Ci(u):(u=kn(t)?ec:en.current,u=Yh(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||c!==u)&&bE(e,o,i,u),zr=!1;var f=e.memoizedState;o.state=f,iy(e,i,o,s),c=e.memoizedState,l!==i||f!==c||_n.current||zr?(typeof h=="function"&&(mS(e,t,h,i),c=e.memoizedState),(l=zr||wE(e,t,l,i,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),o.props=i,o.state=c,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,J_(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ni(e.type,l),o.props=u,d=e.pendingProps,f=o.context,c=t.contextType,typeof c=="object"&&c!==null?c=Ci(c):(c=kn(t)?ec:en.current,c=Yh(e,c));var m=t.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&bE(e,o,i,c),zr=!1,f=e.memoizedState,o.state=f,iy(e,i,o,s);var y=e.memoizedState;l!==d||f!==y||_n.current||zr?(typeof m=="function"&&(mS(e,t,m,i),y=e.memoizedState),(u=zr||wE(e,t,u,i,f,y,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),o.props=i,o.state=y,o.context=c,i=u):(typeof o.componentDidUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),i=!1)}return bS(n,e,t,i,r,s)}function bS(n,e,t,i,s,r){Ck(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&hE(e,t,!1),Lr(n,e,r);i=e.stateNode,$N.current=e;var l=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Kh(e,n.child,null,r),e.child=Kh(e,null,l,r)):ln(n,e,l,r),e.memoizedState=i.state,s&&hE(e,t,!0),e.child}function _k(n){var e=n.stateNode;e.pendingContext?uE(n,e.pendingContext,e.pendingContext!==e.context):e.context&&uE(n,e.context,!1),OA(n,e.containerInfo)}function kE(n,e,t,i,s){return qh(),NA(s),e.flags|=256,ln(n,e,t,i),e.child}var SS={dehydrated:null,treeContext:null,retryLane:0};function AS(n){return{baseLanes:n,cachePool:null,transitions:null}}function kk(n,e,t){var i=e.pendingProps,s=Xe.current,r=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=n!==null&&n.memoizedState===null?!1:(s&2)!==0),l?(r=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(s|=1),Le(Xe,s&1),n===null)return pS(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,r?(i=e.mode,r=e.child,o={mode:"hidden",children:o},!(i&1)&&r!==null?(r.childLanes=0,r.pendingProps=o):r=Cw(o,i,0,null),n=Zl(n,i,t,null),r.return=e,n.return=e,r.sibling=n,e.child=r,e.child.memoizedState=AS(t),e.memoizedState=SS,n):WA(e,o));if(s=n.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return VN(n,e,o,i,l,s,t);if(r){r=i.fallback,o=e.mode,s=n.child,l=s.sibling;var c={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Jo(s,c),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?r=Jo(l,r):(r=Zl(r,o,t,null),r.flags|=2),r.return=e,i.return=e,i.sibling=r,e.child=i,i=r,r=e.child,o=n.child.memoizedState,o=o===null?AS(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},r.memoizedState=o,r.childLanes=n.childLanes&~t,e.memoizedState=SS,i}return r=n.child,n=r.sibling,i=Jo(r,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function WA(n,e){return e=Cw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Im(n,e,t,i){return i!==null&&NA(i),Kh(e,n.child,null,t),n=WA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function VN(n,e,t,i,s,r,o){if(t)return e.flags&256?(e.flags&=-257,i=Sb(Error(I(422))),Im(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(r=i.fallback,s=e.mode,i=Cw({mode:"visible",children:i.children},s,0,null),r=Zl(r,s,o,null),r.flags|=2,i.return=e,r.return=e,i.sibling=r,e.child=i,e.mode&1&&Kh(e,n.child,null,o),e.child.memoizedState=AS(o),e.memoizedState=SS,r);if(!(e.mode&1))return Im(n,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,r=Error(I(419)),i=Sb(r,i,void 0),Im(n,e,o,i)}if(l=(o&n.childLanes)!==0,Cn||l){if(i=_t,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==r.retryLane&&(r.retryLane=s,Nr(n,s),Ki(i,n,s,-1))}return QA(),i=Sb(Error(I(421))),Im(n,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=n.child,e=iL.bind(null,n),s._reactRetry=e,null):(n=r.treeContext,Zn=qo(s.nextSibling),Jn=e,He=!0,Gi=null,n!==null&&(wi[bi++]=Cr,wi[bi++]=_r,wi[bi++]=tc,Cr=n.id,_r=n.overflow,tc=e),e=WA(e,i.children),e.flags|=4096,e)}function TE(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),gS(n.return,e,t)}function Ab(n,e,t,i,s){var r=n.memoizedState;r===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:s}:(r.isBackwards=e,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=t,r.tailMode=s)}function Tk(n,e,t){var i=e.pendingProps,s=i.revealOrder,r=i.tail;if(ln(n,e,i.children,t),i=Xe.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&TE(n,t,e);else if(n.tag===19)TE(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Le(Xe,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(t=e.child,s=null;t!==null;)n=t.alternate,n!==null&&sy(n)===null&&(s=t),t=t.sibling;t=s,t===null?(s=e.child,e.child=null):(s=t.sibling,t.sibling=null),Ab(e,!1,s,t,r);break;case"backwards":for(t=null,s=e.child,e.child=null;s!==null;){if(n=s.alternate,n!==null&&sy(n)===null){e.child=s;break}n=s.sibling,s.sibling=t,t=s,s=n}Ab(e,!0,t,null,r);break;case"together":Ab(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ov(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Lr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),ic|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(I(153));if(e.child!==null){for(n=e.child,t=Jo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Jo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function WN(n,e,t){switch(e.tag){case 3:_k(e),qh();break;case 5:ek(e);break;case 1:kn(e.type)&&Zv(e);break;case 4:OA(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Le(ty,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Le(Xe,Xe.current&1),e.flags|=128,null):t&e.child.childLanes?kk(n,e,t):(Le(Xe,Xe.current&1),n=Lr(n,e,t),n!==null?n.sibling:null);Le(Xe,Xe.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return Tk(n,e,t);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Le(Xe,Xe.current),i)break;return null;case 22:case 23:return e.lanes=0,Ek(n,e,t)}return Lr(n,e,t)}var Pk,xS,Rk,Nk;Pk=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};xS=function(){};Rk=function(n,e,t,i){var s=n.memoizedProps;if(s!==i){n=e.stateNode,Aa(Ls.current);var r=null;switch(t){case"input":s=Wb(n,s),i=Wb(n,i),r=[];break;case"select":s=Ke({},s,{value:void 0}),i=Ke({},i,{value:void 0}),r=[];break;case"textarea":s=Yb(n,s),i=Yb(n,i),r=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=Kv)}Kb(t,i);var o;t=null;for(u in s)if(!i.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(o in l)l.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(of.hasOwnProperty(u)?r||(r=[]):(r=r||[]).push(u,null));for(u in i){var c=i[u];if(l=s!=null?s[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(t||(t={}),t[o]=c[o])}else t||(r||(r=[]),r.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(r=r||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(r=r||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(of.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Fe("scroll",n),r||l===c||(r=[])):(r=r||[]).push(u,c))}t&&(r=r||[]).push("style",t);var u=r;(e.updateQueue=u)&&(e.flags|=4)}};Nk=function(n,e,t,i){t!==i&&(e.flags|=4)};function md(n,e){if(!He)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function $t(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=n,s=s.sibling;else for(s=n.child;s!==null;)t|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=n,s=s.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function XN(n,e,t){var i=e.pendingProps;switch(RA(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $t(e),null;case 1:return kn(e.type)&&Qv(),$t(e),null;case 3:return i=e.stateNode,Qh(),Ie(_n),Ie(en),jA(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Mm(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Gi!==null&&(NS(Gi),Gi=null))),xS(n,e),$t(e),null;case 5:BA(e);var s=Aa(yf.current);if(t=e.type,n!==null&&e.stateNode!=null)Rk(n,e,t,i,s),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(I(166));return $t(e),null}if(n=Aa(Ls.current),Mm(e)){i=e.stateNode,t=e.type;var r=e.memoizedProps;switch(i[Ps]=e,i[mf]=r,n=(e.mode&1)!==0,t){case"dialog":Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":case"embed":Fe("load",i);break;case"video":case"audio":for(s=0;s<_d.length;s++)Fe(_d[s],i);break;case"source":Fe("error",i);break;case"img":case"image":case"link":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"input":Ox(i,r),Fe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!r.multiple},Fe("invalid",i);break;case"textarea":jx(i,r),Fe("invalid",i)}Kb(t,r),s=null;for(var o in r)if(r.hasOwnProperty(o)){var l=r[o];o==="children"?typeof l=="string"?i.textContent!==l&&(r.suppressHydrationWarning!==!0&&Dm(i.textContent,l,n),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(r.suppressHydrationWarning!==!0&&Dm(i.textContent,l,n),s=["children",""+l]):of.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Fe("scroll",i)}switch(t){case"input":Cm(i),Bx(i,r,!0);break;case"textarea":Cm(i),zx(i);break;case"select":case"option":break;default:typeof r.onClick=="function"&&(i.onclick=Kv)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=r_(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Ps]=e,n[mf]=i,Pk(n,e,!1,!1),e.stateNode=n;e:{switch(o=Qb(t,i),t){case"dialog":Fe("cancel",n),Fe("close",n),s=i;break;case"iframe":case"object":case"embed":Fe("load",n),s=i;break;case"video":case"audio":for(s=0;s<_d.length;s++)Fe(_d[s],n);s=i;break;case"source":Fe("error",n),s=i;break;case"img":case"image":case"link":Fe("error",n),Fe("load",n),s=i;break;case"details":Fe("toggle",n),s=i;break;case"input":Ox(n,i),s=Wb(n,i),Fe("invalid",n);break;case"option":s=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},s=Ke({},i,{value:void 0}),Fe("invalid",n);break;case"textarea":jx(n,i),s=Yb(n,i),Fe("invalid",n);break;default:s=i}Kb(t,s),l=s;for(r in l)if(l.hasOwnProperty(r)){var c=l[r];r==="style"?l_(n,c):r==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&o_(n,c)):r==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&af(n,c):typeof c=="number"&&af(n,""+c):r!=="suppressContentEditableWarning"&&r!=="suppressHydrationWarning"&&r!=="autoFocus"&&(of.hasOwnProperty(r)?c!=null&&r==="onScroll"&&Fe("scroll",n):c!=null&&gA(n,r,c,o))}switch(t){case"input":Cm(n),Bx(n,i,!1);break;case"textarea":Cm(n),zx(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ta(i.value));break;case"select":n.multiple=!!i.multiple,r=i.value,r!=null?jc(n,!!i.multiple,r,!1):i.defaultValue!=null&&jc(n,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(n.onclick=Kv)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return $t(e),null;case 6:if(n&&e.stateNode!=null)Nk(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(I(166));if(t=Aa(yf.current),Aa(Ls.current),Mm(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ps]=e,(r=i.nodeValue!==t)&&(n=Jn,n!==null))switch(n.tag){case 3:Dm(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Dm(i.nodeValue,t,(n.mode&1)!==0)}r&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ps]=e,e.stateNode=i}return $t(e),null;case 13:if(Ie(Xe),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(He&&Zn!==null&&e.mode&1&&!(e.flags&128))q_(),qh(),e.flags|=98560,r=!1;else if(r=Mm(e),i!==null&&i.dehydrated!==null){if(n===null){if(!r)throw Error(I(318));if(r=e.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(I(317));r[Ps]=e}else qh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;$t(e),r=!1}else Gi!==null&&(NS(Gi),Gi=null),r=!0;if(!r)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Xe.current&1?mt===0&&(mt=3):QA())),e.updateQueue!==null&&(e.flags|=4),$t(e),null);case 4:return Qh(),xS(n,e),n===null&&pf(e.stateNode.containerInfo),$t(e),null;case 10:return MA(e.type._context),$t(e),null;case 17:return kn(e.type)&&Qv(),$t(e),null;case 19:if(Ie(Xe),r=e.memoizedState,r===null)return $t(e),null;if(i=(e.flags&128)!==0,o=r.rendering,o===null)if(i)md(r,!1);else{if(mt!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=sy(n),o!==null){for(e.flags|=128,md(r,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)r=t,n=i,r.flags&=14680066,o=r.alternate,o===null?(r.childLanes=0,r.lanes=n,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=o.childLanes,r.lanes=o.lanes,r.child=o.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=o.memoizedProps,r.memoizedState=o.memoizedState,r.updateQueue=o.updateQueue,r.type=o.type,n=o.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Le(Xe,Xe.current&1|2),e.child}n=n.sibling}r.tail!==null&&st()>Jh&&(e.flags|=128,i=!0,md(r,!1),e.lanes=4194304)}else{if(!i)if(n=sy(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),md(r,!0),r.tail===null&&r.tailMode==="hidden"&&!o.alternate&&!He)return $t(e),null}else 2*st()-r.renderingStartTime>Jh&&t!==1073741824&&(e.flags|=128,i=!0,md(r,!1),e.lanes=4194304);r.isBackwards?(o.sibling=e.child,e.child=o):(t=r.last,t!==null?t.sibling=o:e.child=o,r.last=o)}return r.tail!==null?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=st(),e.sibling=null,t=Xe.current,Le(Xe,i?t&1|2:t&1),e):($t(e),null);case 22:case 23:return KA(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Kn&1073741824&&($t(e),e.subtreeFlags&6&&(e.flags|=8192)):$t(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function GN(n,e){switch(RA(e),e.tag){case 1:return kn(e.type)&&Qv(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Qh(),Ie(_n),Ie(en),jA(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return BA(e),null;case 13:if(Ie(Xe),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(I(340));qh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Ie(Xe),null;case 4:return Qh(),null;case 10:return MA(e.type._context),null;case 22:case 23:return KA(),null;case 24:return null;default:return null}}var Om=!1,Zt=!1,YN=typeof WeakSet=="function"?WeakSet:Set,X=null;function Lc(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){et(n,e,i)}else t.current=null}function ES(n,e,t){try{t()}catch(i){et(n,e,i)}}var PE=!1;function qN(n,e){if(aS=Gv,n=I_(),TA(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var s=i.anchorOffset,r=i.focusNode;i=i.focusOffset;try{t.nodeType,r.nodeType}catch{t=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=n,f=null;t:for(;;){for(var m;d!==t||s!==0&&d.nodeType!==3||(l=o+s),d!==r||i!==0&&d.nodeType!==3||(c=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===n)break t;if(f===t&&++u===s&&(l=o),f===r&&++h===i&&(c=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(lS={focusedElem:n,selectionRange:t},Gv=!1,X=e;X!==null;)if(e=X,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,X=n;else for(;X!==null;){e=X;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,x=y.memoizedState,v=e.stateNode,b=v.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ni(e.type,w),x);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(E){et(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,X=n;break}X=e.return}return y=PE,PE=!1,y}function tf(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&n)===n){var r=s.destroy;s.destroy=void 0,r!==void 0&&ES(e,t,r)}s=s.next}while(s!==i)}}function xw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function CS(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Lk(n){var e=n.alternate;e!==null&&(n.alternate=null,Lk(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ps],delete e[mf],delete e[hS],delete e[NN],delete e[LN])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Dk(n){return n.tag===5||n.tag===3||n.tag===4}function RE(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Dk(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function _S(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Kv));else if(i!==4&&(n=n.child,n!==null))for(_S(n,e,t),n=n.sibling;n!==null;)_S(n,e,t),n=n.sibling}function kS(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(kS(n,e,t),n=n.sibling;n!==null;)kS(n,e,t),n=n.sibling}var It=null,Xi=!1;function Or(n,e,t){for(t=t.child;t!==null;)Mk(n,e,t),t=t.sibling}function Mk(n,e,t){if(Ns&&typeof Ns.onCommitFiberUnmount=="function")try{Ns.onCommitFiberUnmount(gw,t)}catch{}switch(t.tag){case 5:Zt||Lc(t,e);case 6:var i=It,s=Xi;It=null,Or(n,e,t),It=i,Xi=s,It!==null&&(Xi?(n=It,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):It.removeChild(t.stateNode));break;case 18:It!==null&&(Xi?(n=It,t=t.stateNode,n.nodeType===8?gb(n.parentNode,t):n.nodeType===1&&gb(n,t),hf(n)):gb(It,t.stateNode));break;case 4:i=It,s=Xi,It=t.stateNode.containerInfo,Xi=!0,Or(n,e,t),It=i,Xi=s;break;case 0:case 11:case 14:case 15:if(!Zt&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var r=s,o=r.destroy;r=r.tag,o!==void 0&&(r&2||r&4)&&ES(t,e,o),s=s.next}while(s!==i)}Or(n,e,t);break;case 1:if(!Zt&&(Lc(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(l){et(t,e,l)}Or(n,e,t);break;case 21:Or(n,e,t);break;case 22:t.mode&1?(Zt=(i=Zt)||t.memoizedState!==null,Or(n,e,t),Zt=i):Or(n,e,t);break;default:Or(n,e,t)}}function NE(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new YN),e.forEach(function(i){var s=sL.bind(null,n,i);t.has(i)||(t.add(i),i.then(s,s))})}}function Ti(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var s=t[i];try{var r=n,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:It=l.stateNode,Xi=!1;break e;case 3:It=l.stateNode.containerInfo,Xi=!0;break e;case 4:It=l.stateNode.containerInfo,Xi=!0;break e}l=l.return}if(It===null)throw Error(I(160));Mk(r,o,s),It=null,Xi=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){et(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fk(e,n),e=e.sibling}function Fk(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ti(e,n),es(n),i&4){try{tf(3,n,n.return),xw(3,n)}catch(w){et(n,n.return,w)}try{tf(5,n,n.return)}catch(w){et(n,n.return,w)}}break;case 1:Ti(e,n),es(n),i&512&&t!==null&&Lc(t,t.return);break;case 5:if(Ti(e,n),es(n),i&512&&t!==null&&Lc(t,t.return),n.flags&32){var s=n.stateNode;try{af(s,"")}catch(w){et(n,n.return,w)}}if(i&4&&(s=n.stateNode,s!=null)){var r=n.memoizedProps,o=t!==null?t.memoizedProps:r,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&r.type==="radio"&&r.name!=null&&i_(s,r),Qb(l,o);var u=Qb(l,r);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?l_(s,d):h==="dangerouslySetInnerHTML"?o_(s,d):h==="children"?af(s,d):gA(s,h,d,u)}switch(l){case"input":Xb(s,r);break;case"textarea":s_(s,r);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!r.multiple;var m=r.value;m!=null?jc(s,!!r.multiple,m,!1):f!==!!r.multiple&&(r.defaultValue!=null?jc(s,!!r.multiple,r.defaultValue,!0):jc(s,!!r.multiple,r.multiple?[]:"",!1))}s[mf]=r}catch(w){et(n,n.return,w)}}break;case 6:if(Ti(e,n),es(n),i&4){if(n.stateNode===null)throw Error(I(162));s=n.stateNode,r=n.memoizedProps;try{s.nodeValue=r}catch(w){et(n,n.return,w)}}break;case 3:if(Ti(e,n),es(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{hf(e.containerInfo)}catch(w){et(n,n.return,w)}break;case 4:Ti(e,n),es(n);break;case 13:Ti(e,n),es(n),s=n.child,s.flags&8192&&(r=s.memoizedState!==null,s.stateNode.isHidden=r,!r||s.alternate!==null&&s.alternate.memoizedState!==null||(YA=st())),i&4&&NE(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(Zt=(u=Zt)||h,Ti(e,n),Zt=u):Ti(e,n),es(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&n.mode&1)for(X=n,h=n.child;h!==null;){for(d=X=h;X!==null;){switch(f=X,m=f.child,f.tag){case 0:case 11:case 14:case 15:tf(4,f,f.return);break;case 1:Lc(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){i=f,t=f.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){et(i,t,w)}}break;case 5:Lc(f,f.return);break;case 22:if(f.memoizedState!==null){DE(d);continue}}m!==null?(m.return=f,X=m):DE(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,u?(r=s.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=a_("display",o))}catch(w){et(n,n.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){et(n,n.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ti(e,n),es(n),i&4&&NE(n);break;case 21:break;default:Ti(e,n),es(n)}}function es(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Dk(t)){var i=t;break e}t=t.return}throw Error(I(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(af(s,""),i.flags&=-33);var r=RE(n);kS(n,r,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=RE(n);_S(n,l,o);break;default:throw Error(I(161))}}catch(c){et(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function KN(n,e,t){X=n,Ik(n)}function Ik(n,e,t){for(var i=(n.mode&1)!==0;X!==null;){var s=X,r=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Om;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Zt;l=Om;var u=Zt;if(Om=o,(Zt=c)&&!u)for(X=s;X!==null;)o=X,c=o.child,o.tag===22&&o.memoizedState!==null?ME(s):c!==null?(c.return=o,X=c):ME(s);for(;r!==null;)X=r,Ik(r),r=r.sibling;X=s,Om=l,Zt=u}LE(n)}else s.subtreeFlags&8772&&r!==null?(r.return=s,X=r):LE(n)}}function LE(n){for(;X!==null;){var e=X;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zt||xw(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Zt)if(t===null)i.componentDidMount();else{var s=e.elementType===e.type?t.memoizedProps:Ni(e.type,t.memoizedProps);i.componentDidUpdate(s,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var r=e.updateQueue;r!==null&&mE(e,r,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}mE(e,o,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&hf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}Zt||e.flags&512&&CS(e)}catch(f){et(e,e.return,f)}}if(e===n){X=null;break}if(t=e.sibling,t!==null){t.return=e.return,X=t;break}X=e.return}}function DE(n){for(;X!==null;){var e=X;if(e===n){X=null;break}var t=e.sibling;if(t!==null){t.return=e.return,X=t;break}X=e.return}}function ME(n){for(;X!==null;){var e=X;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{xw(4,e)}catch(c){et(e,t,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(c){et(e,s,c)}}var r=e.return;try{CS(e)}catch(c){et(e,r,c)}break;case 5:var o=e.return;try{CS(e)}catch(c){et(e,o,c)}}}catch(c){et(e,e.return,c)}if(e===n){X=null;break}var l=e.sibling;if(l!==null){l.return=e.return,X=l;break}X=e.return}}var QN=Math.ceil,ay=Fr.ReactCurrentDispatcher,XA=Fr.ReactCurrentOwner,Ei=Fr.ReactCurrentBatchConfig,de=0,_t=null,ut=null,Bt=0,Kn=0,Dc=aa(0),mt=0,Af=null,ic=0,Ew=0,GA=0,nf=null,En=null,YA=0,Jh=1/0,Bs=null,ly=!1,TS=null,Qo=null,Bm=!1,Wo=null,cy=0,sf=0,PS=null,av=-1,lv=0;function cn(){return de&6?st():av!==-1?av:av=st()}function Zo(n){return n.mode&1?de&2&&Bt!==0?Bt&-Bt:MN.transition!==null?(lv===0&&(lv=b_()),lv):(n=ve,n!==0||(n=window.event,n=n===void 0?16:k_(n.type)),n):1}function Ki(n,e,t,i){if(50<sf)throw sf=0,PS=null,Error(I(185));am(n,t,i),(!(de&2)||n!==_t)&&(n===_t&&(!(de&2)&&(Ew|=t),mt===4&&Hr(n,Bt)),Tn(n,i),t===1&&de===0&&!(e.mode&1)&&(Jh=st()+500,bw&&la()))}function Tn(n,e){var t=n.callbackNode;MR(n,e);var i=Xv(n,n===_t?Bt:0);if(i===0)t!==null&&$x(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&$x(t),e===1)n.tag===0?DN(FE.bind(null,n)):X_(FE.bind(null,n)),PN(function(){!(de&6)&&la()}),t=null;else{switch(S_(i)){case 1:t=bA;break;case 4:t=y_;break;case 16:t=Wv;break;case 536870912:t=w_;break;default:t=Wv}t=Vk(t,Ok.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Ok(n,e){if(av=-1,lv=0,de&6)throw Error(I(327));var t=n.callbackNode;if(Vc()&&n.callbackNode!==t)return null;var i=Xv(n,n===_t?Bt:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=uy(n,i);else{e=i;var s=de;de|=2;var r=jk();(_t!==n||Bt!==e)&&(Bs=null,Jh=st()+500,Ql(n,e));do try{eL();break}catch(l){Bk(n,l)}while(1);DA(),ay.current=r,de=s,ut!==null?e=0:(_t=null,Bt=0,e=mt)}if(e!==0){if(e===2&&(s=nS(n),s!==0&&(i=s,e=RS(n,s))),e===1)throw t=Af,Ql(n,0),Hr(n,i),Tn(n,st()),t;if(e===6)Hr(n,i);else{if(s=n.current.alternate,!(i&30)&&!ZN(s)&&(e=uy(n,i),e===2&&(r=nS(n),r!==0&&(i=r,e=RS(n,r))),e===1))throw t=Af,Ql(n,0),Hr(n,i),Tn(n,st()),t;switch(n.finishedWork=s,n.finishedLanes=i,e){case 0:case 1:throw Error(I(345));case 2:fa(n,En,Bs);break;case 3:if(Hr(n,i),(i&130023424)===i&&(e=YA+500-st(),10<e)){if(Xv(n,0)!==0)break;if(s=n.suspendedLanes,(s&i)!==i){cn(),n.pingedLanes|=n.suspendedLanes&s;break}n.timeoutHandle=uS(fa.bind(null,n,En,Bs),e);break}fa(n,En,Bs);break;case 4:if(Hr(n,i),(i&4194240)===i)break;for(e=n.eventTimes,s=-1;0<i;){var o=31-qi(i);r=1<<o,o=e[o],o>s&&(s=o),i&=~r}if(i=s,i=st()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*QN(i/1960))-i,10<i){n.timeoutHandle=uS(fa.bind(null,n,En,Bs),i);break}fa(n,En,Bs);break;case 5:fa(n,En,Bs);break;default:throw Error(I(329))}}}return Tn(n,st()),n.callbackNode===t?Ok.bind(null,n):null}function RS(n,e){var t=nf;return n.current.memoizedState.isDehydrated&&(Ql(n,e).flags|=256),n=uy(n,e),n!==2&&(e=En,En=t,e!==null&&NS(e)),n}function NS(n){En===null?En=n:En.push.apply(En,n)}function ZN(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var s=t[i],r=s.getSnapshot;s=s.value;try{if(!Qi(r(),s))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Hr(n,e){for(e&=~GA,e&=~Ew,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-qi(e),i=1<<t;n[t]=-1,e&=~i}}function FE(n){if(de&6)throw Error(I(327));Vc();var e=Xv(n,0);if(!(e&1))return Tn(n,st()),null;var t=uy(n,e);if(n.tag!==0&&t===2){var i=nS(n);i!==0&&(e=i,t=RS(n,i))}if(t===1)throw t=Af,Ql(n,0),Hr(n,e),Tn(n,st()),t;if(t===6)throw Error(I(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,fa(n,En,Bs),Tn(n,st()),null}function qA(n,e){var t=de;de|=1;try{return n(e)}finally{de=t,de===0&&(Jh=st()+500,bw&&la())}}function sc(n){Wo!==null&&Wo.tag===0&&!(de&6)&&Vc();var e=de;de|=1;var t=Ei.transition,i=ve;try{if(Ei.transition=null,ve=1,n)return n()}finally{ve=i,Ei.transition=t,de=e,!(de&6)&&la()}}function KA(){Kn=Dc.current,Ie(Dc)}function Ql(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,TN(t)),ut!==null)for(t=ut.return;t!==null;){var i=t;switch(RA(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Qv();break;case 3:Qh(),Ie(_n),Ie(en),jA();break;case 5:BA(i);break;case 4:Qh();break;case 13:Ie(Xe);break;case 19:Ie(Xe);break;case 10:MA(i.type._context);break;case 22:case 23:KA()}t=t.return}if(_t=n,ut=n=Jo(n.current,null),Bt=Kn=e,mt=0,Af=null,GA=Ew=ic=0,En=nf=null,Sa!==null){for(e=0;e<Sa.length;e++)if(t=Sa[e],i=t.interleaved,i!==null){t.interleaved=null;var s=i.next,r=t.pending;if(r!==null){var o=r.next;r.next=s,i.next=o}t.pending=i}Sa=null}return n}function Bk(n,e){do{var t=ut;try{if(DA(),sv.current=oy,ry){for(var i=Ye.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ry=!1}if(nc=0,Ct=gt=Ye=null,ef=!1,wf=0,XA.current=null,t===null||t.return===null){mt=1,Af=e,ut=null;break}e:{var r=n,o=t.return,l=t,c=e;if(e=Bt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=AE(o);if(m!==null){m.flags&=-257,xE(m,o,l,r,e),m.mode&1&&SE(r,u,e),e=m,c=u;var y=e.updateQueue;if(y===null){var w=new Set;w.add(c),e.updateQueue=w}else y.add(c);break e}else{if(!(e&1)){SE(r,u,e),QA();break e}c=Error(I(426))}}else if(He&&l.mode&1){var x=AE(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),xE(x,o,l,r,e),NA(Zh(c,l));break e}}r=c=Zh(c,l),mt!==4&&(mt=2),nf===null?nf=[r]:nf.push(r),r=o;do{switch(r.tag){case 3:r.flags|=65536,e&=-e,r.lanes|=e;var v=Sk(r,c,e);gE(r,v);break e;case 1:l=c;var b=r.type,A=r.stateNode;if(!(r.flags&128)&&(typeof b.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Qo===null||!Qo.has(A)))){r.flags|=65536,e&=-e,r.lanes|=e;var E=Ak(r,l,e);gE(r,E);break e}}r=r.return}while(r!==null)}Uk(t)}catch(_){e=_,ut===t&&t!==null&&(ut=t=t.return);continue}break}while(1)}function jk(){var n=ay.current;return ay.current=oy,n===null?oy:n}function QA(){(mt===0||mt===3||mt===2)&&(mt=4),_t===null||!(ic&268435455)&&!(Ew&268435455)||Hr(_t,Bt)}function uy(n,e){var t=de;de|=2;var i=jk();(_t!==n||Bt!==e)&&(Bs=null,Ql(n,e));do try{JN();break}catch(s){Bk(n,s)}while(1);if(DA(),de=t,ay.current=i,ut!==null)throw Error(I(261));return _t=null,Bt=0,mt}function JN(){for(;ut!==null;)zk(ut)}function eL(){for(;ut!==null&&!CR();)zk(ut)}function zk(n){var e=$k(n.alternate,n,Kn);n.memoizedProps=n.pendingProps,e===null?Uk(n):ut=e,XA.current=null}function Uk(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=GN(t,e),t!==null){t.flags&=32767,ut=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{mt=6,ut=null;return}}else if(t=XN(t,e,Kn),t!==null){ut=t;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=n}while(e!==null);mt===0&&(mt=5)}function fa(n,e,t){var i=ve,s=Ei.transition;try{Ei.transition=null,ve=1,tL(n,e,t,i)}finally{Ei.transition=s,ve=i}return null}function tL(n,e,t,i){do Vc();while(Wo!==null);if(de&6)throw Error(I(327));t=n.finishedWork;var s=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(I(177));n.callbackNode=null,n.callbackPriority=0;var r=t.lanes|t.childLanes;if(FR(n,r),n===_t&&(ut=_t=null,Bt=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Bm||(Bm=!0,Vk(Wv,function(){return Vc(),null})),r=(t.flags&15990)!==0,t.subtreeFlags&15990||r){r=Ei.transition,Ei.transition=null;var o=ve;ve=1;var l=de;de|=4,XA.current=null,qN(n,t),Fk(t,n),SN(lS),Gv=!!aS,lS=aS=null,n.current=t,KN(t),_R(),de=l,ve=o,Ei.transition=r}else n.current=t;if(Bm&&(Bm=!1,Wo=n,cy=s),r=n.pendingLanes,r===0&&(Qo=null),PR(t.stateNode),Tn(n,st()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)s=e[t],i(s.value,{componentStack:s.stack,digest:s.digest});if(ly)throw ly=!1,n=TS,TS=null,n;return cy&1&&n.tag!==0&&Vc(),r=n.pendingLanes,r&1?n===PS?sf++:(sf=0,PS=n):sf=0,la(),null}function Vc(){if(Wo!==null){var n=S_(cy),e=Ei.transition,t=ve;try{if(Ei.transition=null,ve=16>n?16:n,Wo===null)var i=!1;else{if(n=Wo,Wo=null,cy=0,de&6)throw Error(I(331));var s=de;for(de|=4,X=n.current;X!==null;){var r=X,o=r.child;if(X.flags&16){var l=r.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(X=u;X!==null;){var h=X;switch(h.tag){case 0:case 11:case 15:tf(8,h,r)}var d=h.child;if(d!==null)d.return=h,X=d;else for(;X!==null;){h=X;var f=h.sibling,m=h.return;if(Lk(h),h===u){X=null;break}if(f!==null){f.return=m,X=f;break}X=m}}}var y=r.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}X=r}}if(r.subtreeFlags&2064&&o!==null)o.return=r,X=o;else e:for(;X!==null;){if(r=X,r.flags&2048)switch(r.tag){case 0:case 11:case 15:tf(9,r,r.return)}var v=r.sibling;if(v!==null){v.return=r.return,X=v;break e}X=r.return}}var b=n.current;for(X=b;X!==null;){o=X;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,X=A;else e:for(o=b;X!==null;){if(l=X,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:xw(9,l)}}catch(_){et(l,l.return,_)}if(l===o){X=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,X=E;break e}X=l.return}}if(de=s,la(),Ns&&typeof Ns.onPostCommitFiberRoot=="function")try{Ns.onPostCommitFiberRoot(gw,n)}catch{}i=!0}return i}finally{ve=t,Ei.transition=e}}return!1}function IE(n,e,t){e=Zh(t,e),e=Sk(n,e,1),n=Ko(n,e,1),e=cn(),n!==null&&(am(n,1,e),Tn(n,e))}function et(n,e,t){if(n.tag===3)IE(n,n,t);else for(;e!==null;){if(e.tag===3){IE(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Qo===null||!Qo.has(i))){n=Zh(t,n),n=Ak(e,n,1),e=Ko(e,n,1),n=cn(),e!==null&&(am(e,1,n),Tn(e,n));break}}e=e.return}}function nL(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=cn(),n.pingedLanes|=n.suspendedLanes&t,_t===n&&(Bt&t)===t&&(mt===4||mt===3&&(Bt&130023424)===Bt&&500>st()-YA?Ql(n,0):GA|=t),Tn(n,e)}function Hk(n,e){e===0&&(n.mode&1?(e=Tm,Tm<<=1,!(Tm&130023424)&&(Tm=4194304)):e=1);var t=cn();n=Nr(n,e),n!==null&&(am(n,e,t),Tn(n,t))}function iL(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),Hk(n,t)}function sL(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,s=n.memoizedState;s!==null&&(t=s.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(I(314))}i!==null&&i.delete(e),Hk(n,t)}var $k;$k=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||_n.current)Cn=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Cn=!1,WN(n,e,t);Cn=!!(n.flags&131072)}else Cn=!1,He&&e.flags&1048576&&G_(e,ey,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ov(n,e),n=e.pendingProps;var s=Yh(e,en.current);$c(e,t),s=UA(null,e,i,n,s,t);var r=HA();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kn(i)?(r=!0,Zv(e)):r=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,IA(e),s.updater=Aw,e.stateNode=s,s._reactInternals=e,vS(e,i,n,t),e=bS(null,e,i,!0,r,t)):(e.tag=0,He&&r&&PA(e),ln(null,e,s,t),e=e.child),e;case 16:i=e.elementType;e:{switch(ov(n,e),n=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=oL(i),n=Ni(i,n),s){case 0:e=wS(null,e,i,n,t);break e;case 1:e=_E(null,e,i,n,t);break e;case 11:e=EE(null,e,i,n,t);break e;case 14:e=CE(null,e,i,Ni(i.type,n),t);break e}throw Error(I(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ni(i,s),wS(n,e,i,s,t);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ni(i,s),_E(n,e,i,s,t);case 3:e:{if(_k(e),n===null)throw Error(I(387));i=e.pendingProps,r=e.memoizedState,s=r.element,J_(n,e),iy(e,i,null,t);var o=e.memoizedState;if(i=o.element,r.isDehydrated)if(r={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=r,e.memoizedState=r,e.flags&256){s=Zh(Error(I(423)),e),e=kE(n,e,i,t,s);break e}else if(i!==s){s=Zh(Error(I(424)),e),e=kE(n,e,i,t,s);break e}else for(Zn=qo(e.stateNode.containerInfo.firstChild),Jn=e,He=!0,Gi=null,t=Q_(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(qh(),i===s){e=Lr(n,e,t);break e}ln(n,e,i,t)}e=e.child}return e;case 5:return ek(e),n===null&&pS(e),i=e.type,s=e.pendingProps,r=n!==null?n.memoizedProps:null,o=s.children,cS(i,s)?o=null:r!==null&&cS(i,r)&&(e.flags|=32),Ck(n,e),ln(n,e,o,t),e.child;case 6:return n===null&&pS(e),null;case 13:return kk(n,e,t);case 4:return OA(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Kh(e,null,i,t):ln(n,e,i,t),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ni(i,s),EE(n,e,i,s,t);case 7:return ln(n,e,e.pendingProps,t),e.child;case 8:return ln(n,e,e.pendingProps.children,t),e.child;case 12:return ln(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,r=e.memoizedProps,o=s.value,Le(ty,i._currentValue),i._currentValue=o,r!==null)if(Qi(r.value,o)){if(r.children===s.children&&!_n.current){e=Lr(n,e,t);break e}}else for(r=e.child,r!==null&&(r.return=e);r!==null;){var l=r.dependencies;if(l!==null){o=r.child;for(var c=l.firstContext;c!==null;){if(c.context===i){if(r.tag===1){c=kr(-1,t&-t),c.tag=2;var u=r.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}r.lanes|=t,c=r.alternate,c!==null&&(c.lanes|=t),gS(r.return,t,e),l.lanes|=t;break}c=c.next}}else if(r.tag===10)o=r.type===e.type?null:r.child;else if(r.tag===18){if(o=r.return,o===null)throw Error(I(341));o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),gS(o,t,e),o=r.sibling}else o=r.child;if(o!==null)o.return=r;else for(o=r;o!==null;){if(o===e){o=null;break}if(r=o.sibling,r!==null){r.return=o.return,o=r;break}o=o.return}r=o}ln(n,e,s.children,t),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,$c(e,t),s=Ci(s),i=i(s),e.flags|=1,ln(n,e,i,t),e.child;case 14:return i=e.type,s=Ni(i,e.pendingProps),s=Ni(i.type,s),CE(n,e,i,s,t);case 15:return xk(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ni(i,s),ov(n,e),e.tag=1,kn(i)?(n=!0,Zv(e)):n=!1,$c(e,t),bk(e,i,s),vS(e,i,s,t),bS(null,e,i,!0,n,t);case 19:return Tk(n,e,t);case 22:return Ek(n,e,t)}throw Error(I(156,e.tag))};function Vk(n,e){return v_(n,e)}function rL(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ai(n,e,t,i){return new rL(n,e,t,i)}function ZA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function oL(n){if(typeof n=="function")return ZA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===vA)return 11;if(n===yA)return 14}return 2}function Jo(n,e){var t=n.alternate;return t===null?(t=Ai(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function cv(n,e,t,i,s,r){var o=2;if(i=n,typeof n=="function")ZA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case xc:return Zl(t.children,s,r,e);case mA:o=8,s|=8;break;case Ub:return n=Ai(12,t,e,s|2),n.elementType=Ub,n.lanes=r,n;case Hb:return n=Ai(13,t,e,s),n.elementType=Hb,n.lanes=r,n;case $b:return n=Ai(19,t,e,s),n.elementType=$b,n.lanes=r,n;case e_:return Cw(t,s,r,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ZC:o=10;break e;case JC:o=9;break e;case vA:o=11;break e;case yA:o=14;break e;case jr:o=16,i=null;break e}throw Error(I(130,n==null?n:typeof n,""))}return e=Ai(o,t,e,s),e.elementType=n,e.type=i,e.lanes=r,e}function Zl(n,e,t,i){return n=Ai(7,n,i,e),n.lanes=t,n}function Cw(n,e,t,i){return n=Ai(22,n,i,e),n.elementType=e_,n.lanes=t,n.stateNode={isHidden:!1},n}function xb(n,e,t){return n=Ai(6,n,null,e),n.lanes=t,n}function Eb(n,e,t){return e=Ai(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function aL(n,e,t,i,s){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sb(0),this.expirationTimes=sb(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sb(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function JA(n,e,t,i,s,r,o,l,c){return n=new aL(n,e,t,l,c),e===1?(e=1,r===!0&&(e|=8)):e=0,r=Ai(3,null,null,e),n.current=r,r.stateNode=n,r.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},IA(r),n}function lL(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ac,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function Wk(n){if(!n)return na;n=n._reactInternals;e:{if(lc(n)!==n||n.tag!==1)throw Error(I(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(n.tag===1){var t=n.type;if(kn(t))return W_(n,t,e)}return e}function Xk(n,e,t,i,s,r,o,l,c){return n=JA(t,i,!0,n,s,r,o,l,c),n.context=Wk(null),t=n.current,i=cn(),s=Zo(t),r=kr(i,s),r.callback=e??null,Ko(t,r,s),n.current.lanes=s,am(n,s,i),Tn(n,i),n}function _w(n,e,t,i){var s=e.current,r=cn(),o=Zo(s);return t=Wk(t),e.context===null?e.context=t:e.pendingContext=t,e=kr(r,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ko(s,e,o),n!==null&&(Ki(n,s,o,r),iv(n,s,o)),o}function hy(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function OE(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function ex(n,e){OE(n,e),(n=n.alternate)&&OE(n,e)}function cL(){return null}var Gk=typeof reportError=="function"?reportError:function(n){console.error(n)};function tx(n){this._internalRoot=n}kw.prototype.render=tx.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(I(409));_w(n,e,null,null)};kw.prototype.unmount=tx.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;sc(function(){_w(null,n,null,null)}),e[Rr]=null}};function kw(n){this._internalRoot=n}kw.prototype.unstable_scheduleHydration=function(n){if(n){var e=E_();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ur.length&&e!==0&&e<Ur[t].priority;t++);Ur.splice(t,0,n),t===0&&__(n)}};function nx(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Tw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function BE(){}function uL(n,e,t,i,s){if(s){if(typeof i=="function"){var r=i;i=function(){var u=hy(o);r.call(u)}}var o=Xk(e,i,n,0,null,!1,!1,"",BE);return n._reactRootContainer=o,n[Rr]=o.current,pf(n.nodeType===8?n.parentNode:n),sc(),o}for(;s=n.lastChild;)n.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var u=hy(c);l.call(u)}}var c=JA(n,0,!1,null,null,!1,!1,"",BE);return n._reactRootContainer=c,n[Rr]=c.current,pf(n.nodeType===8?n.parentNode:n),sc(function(){_w(e,c,t,i)}),c}function Pw(n,e,t,i,s){var r=t._reactRootContainer;if(r){var o=r;if(typeof s=="function"){var l=s;s=function(){var c=hy(o);l.call(c)}}_w(e,o,n,s)}else o=uL(t,e,n,s,i);return hy(o)}A_=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Cd(e.pendingLanes);t!==0&&(SA(e,t|1),Tn(e,st()),!(de&6)&&(Jh=st()+500,la()))}break;case 13:sc(function(){var i=Nr(n,1);if(i!==null){var s=cn();Ki(i,n,1,s)}}),ex(n,1)}};AA=function(n){if(n.tag===13){var e=Nr(n,134217728);if(e!==null){var t=cn();Ki(e,n,134217728,t)}ex(n,134217728)}};x_=function(n){if(n.tag===13){var e=Zo(n),t=Nr(n,e);if(t!==null){var i=cn();Ki(t,n,e,i)}ex(n,e)}};E_=function(){return ve};C_=function(n,e){var t=ve;try{return ve=n,e()}finally{ve=t}};Jb=function(n,e,t){switch(e){case"input":if(Xb(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var s=ww(i);if(!s)throw Error(I(90));n_(i),Xb(i,s)}}}break;case"textarea":s_(n,t);break;case"select":e=t.value,e!=null&&jc(n,!!t.multiple,e,!1)}};h_=qA;d_=sc;var hL={usingClientEntryPoint:!1,Events:[cm,kc,ww,c_,u_,qA]},vd={findFiberByHostInstance:ba,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dL={bundleType:vd.bundleType,version:vd.version,rendererPackageName:vd.rendererPackageName,rendererConfig:vd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=g_(n),n===null?null:n.stateNode},findFiberByHostInstance:vd.findFiberByHostInstance||cL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jm.isDisabled&&jm.supportsFiber)try{gw=jm.inject(dL),Ns=jm}catch{}}ni.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hL;ni.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nx(e))throw Error(I(200));return lL(n,e,null,t)};ni.createRoot=function(n,e){if(!nx(n))throw Error(I(299));var t=!1,i="",s=Gk;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=JA(n,1,!1,null,null,t,!1,i,s),n[Rr]=e.current,pf(n.nodeType===8?n.parentNode:n),new tx(e)};ni.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(I(188)):(n=Object.keys(n).join(","),Error(I(268,n)));return n=g_(e),n=n===null?null:n.stateNode,n};ni.flushSync=function(n){return sc(n)};ni.hydrate=function(n,e,t){if(!Tw(e))throw Error(I(200));return Pw(null,n,e,!0,t)};ni.hydrateRoot=function(n,e,t){if(!nx(n))throw Error(I(405));var i=t!=null&&t.hydratedSources||null,s=!1,r="",o=Gk;if(t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=Xk(e,null,n,1,t??null,s,!1,r,o),n[Rr]=e.current,pf(n),i)for(n=0;n<i.length;n++)t=i[n],s=t._getVersion,s=s(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,s]:e.mutableSourceEagerHydrationData.push(t,s);return new kw(e)};ni.render=function(n,e,t){if(!Tw(e))throw Error(I(200));return Pw(null,n,e,!1,t)};ni.unmountComponentAtNode=function(n){if(!Tw(n))throw Error(I(40));return n._reactRootContainer?(sc(function(){Pw(null,null,n,!1,function(){n._reactRootContainer=null,n[Rr]=null})}),!0):!1};ni.unstable_batchedUpdates=qA;ni.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Tw(t))throw Error(I(200));if(n==null||n._reactInternals===void 0)throw Error(I(38));return Pw(n,e,t,!1,i)};ni.version="18.3.1-next-f1338f8080-20240426";function Yk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Yk)}catch(n){console.error(n)}}Yk(),YC.exports=ni;var fL=YC.exports,jE=fL;jb.createRoot=jE.createRoot,jb.hydrateRoot=jE.hydrateRoot;var pL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const gL=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mL=(n,e)=>{const t=M.forwardRef(({color:i="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:o,children:l,...c},u)=>M.createElement("svg",{ref:u,...pL,width:s,height:s,stroke:i,strokeWidth:o?Number(r)*24/Number(s):r,className:`lucide lucide-${gL(n)}`,...c},[...e.map(([h,d])=>M.createElement(h,d)),...(Array.isArray(l)?l:[l])||[]]));return t.displayName=`${n}`,t};var cc=mL;const zE=cc("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),vL=cc("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Cb=cc("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),_b=cc("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),kb=cc("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]),yL=cc("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),kd=cc("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),wL="modulepreload",bL=function(n){return"/"+n},UE={},SL=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(r=>{if(r=bL(r),r in UE)return;UE[r]=!0;const o=r.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!i)for(let h=s.length-1;h>=0;h--){const d=s[h];if(d.href===r&&(!o||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":wL,o||(u.as="script",u.crossOrigin=""),u.href=r,document.head.appendChild(u),o)return new Promise((h,d)=>{u.addEventListener("load",h),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>e()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})},an=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),LS=[.001,0,0,.001,0,0],Tb=1.35,qn={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Rs={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},xf="pdfjs_internal_editor_",J={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},le={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},qk={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Pt={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},rf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},tt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},pc={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},hm={ERRORS:0,WARNINGS:1,INFOS:5},ed={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},zm={moveTo:0,lineTo:1,curveTo:2,closePath:3},Kk={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Rw=hm.WARNINGS;function AL(n){Number.isInteger(n)&&(Rw=n)}function xL(){return Rw}function Nw(n){Rw>=hm.INFOS&&console.info(`Info: ${n}`)}function ee(n){Rw>=hm.WARNINGS&&console.warn(`Warning: ${n}`)}function Te(n){throw new Error(n)}function ue(n,e){n||Te(e)}function EL(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function ix(n,e=null,t=null){if(!n)return null;if(t&&typeof n=="string"){if(t.addDefaultProtocol&&n.startsWith("www.")){const s=n.match(/\./g);(s==null?void 0:s.length)>=2&&(n=`http://${n}`)}if(t.tryConvertEncoding)try{n=PL(n)}catch{}}const i=e?URL.parse(n,e):URL.parse(n);return EL(i)?i:null}function sx(n,e,t=!1){const i=URL.parse(n);return i?(i.hash=e,i.href):t&&ix(n,"http://example.com")?n.split("#",1)[0]+`${e?`#${e}`:""}`:""}function ie(n,e,t,i=!1){return Object.defineProperty(n,e,{value:t,enumerable:!i,configurable:!0,writable:!1}),t}const uc=function(){function e(t,i){this.message=t,this.name=i}return e.prototype=new Error,e.constructor=e,e}();class HE extends uc{constructor(e,t){super(e,"PasswordException"),this.code=t}}class Pb extends uc{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class dy extends uc{constructor(e){super(e,"InvalidPDFException")}}class Ef extends uc{constructor(e,t,i){super(e,"ResponseException"),this.status=t,this.missing=i}}class CL extends uc{constructor(e){super(e,"FormatError")}}class Dr extends uc{constructor(e){super(e,"AbortException")}}function Qk(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&Te("Invalid argument for bytesToString");const e=n.length,t=8192;if(e<t)return String.fromCharCode.apply(null,n);const i=[];for(let s=0;s<e;s+=t){const r=Math.min(s+t,e),o=n.subarray(s,r);i.push(String.fromCharCode.apply(null,o))}return i.join("")}function dm(n){typeof n!="string"&&Te("Invalid argument for stringToBytes");const e=n.length,t=new Uint8Array(e);for(let i=0;i<e;++i)t[i]=n.charCodeAt(i)&255;return t}function _L(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function kL(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function TL(){try{return new Function(""),!0}catch{return!1}}class kt{static get isLittleEndian(){return ie(this,"isLittleEndian",kL())}static get isEvalSupported(){return ie(this,"isEvalSupported",TL())}static get isOffscreenCanvasSupported(){return ie(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ie(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return ie(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return ie(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const Rb=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Yc,uv,Nf,DS;class V{static makeHexColor(e,t,i){return`#${Rb[e]}${Rb[t]}${Rb[i]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let i;e[0]?(e[0]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[3],t[3]*=e[3]):(i=t[0],t[0]=t[1],t[1]=i,i=t[2],t[2]=t[3],t[3]=i,e[1]<0&&(i=t[1],t[1]=t[3],t[3]=i),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(i=t[0],t[0]=t[2],t[2]=i),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,i=0){const s=e[i],r=e[i+1];e[i]=s*t[0]+r*t[2]+t[4],e[i+1]=s*t[1]+r*t[3]+t[5]}static applyTransformToBezier(e,t,i=0){const s=t[0],r=t[1],o=t[2],l=t[3],c=t[4],u=t[5];for(let h=0;h<6;h+=2){const d=e[i+h],f=e[i+h+1];e[i+h]=d*s+f*o+c,e[i+h+1]=d*r+f*l+u}}static applyInverseTransform(e,t){const i=e[0],s=e[1],r=t[0]*t[3]-t[1]*t[2];e[0]=(i*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/r,e[1]=(-i*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/r}static axialAlignedBoundingBox(e,t,i){const s=t[0],r=t[1],o=t[2],l=t[3],c=t[4],u=t[5],h=e[0],d=e[1],f=e[2],m=e[3];let y=s*h+c,w=y,x=s*f+c,v=x,b=l*d+u,A=b,E=l*m+u,_=E;if(r!==0||o!==0){const k=r*h,T=r*f,P=o*d,N=o*m;y+=P,v+=P,x+=N,w+=N,b+=k,_+=k,E+=T,A+=T}i[0]=Math.min(i[0],y,x,w,v),i[1]=Math.min(i[1],b,E,A,_),i[2]=Math.max(i[2],y,x,w,v),i[3]=Math.max(i[3],b,E,A,_)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const i=e[0],s=e[1],r=e[2],o=e[3],l=i**2+s**2,c=i*r+s*o,u=r**2+o**2,h=(l+u)/2,d=Math.sqrt(h**2-(l*u-c**2));t[0]=Math.sqrt(h+d||1),t[1]=Math.sqrt(h-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const i=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(i>s)return null;const r=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return r>o?null:[i,r,s,o]}static pointBoundingBox(e,t,i){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}static rectBoundingBox(e,t,i,s,r){r[0]=Math.min(r[0],e,i),r[1]=Math.min(r[1],t,s),r[2]=Math.max(r[2],e,i),r[3]=Math.max(r[3],t,s)}static bezierBoundingBox(e,t,i,s,r,o,l,c,u){u[0]=Math.min(u[0],e,l),u[1]=Math.min(u[1],t,c),u[2]=Math.max(u[2],e,l),u[3]=Math.max(u[3],t,c),S(this,Nf,DS).call(this,e,i,r,l,t,s,o,c,3*(-e+3*(i-r)+l),6*(e-2*i+r),3*(i-e),u),S(this,Nf,DS).call(this,e,i,r,l,t,s,o,c,3*(-t+3*(s-o)+c),6*(t-2*s+o),3*(s-t),u)}}Yc=new WeakSet,uv=function(e,t,i,s,r,o,l,c,u,h){if(u<=0||u>=1)return;const d=1-u,f=u*u,m=f*u,y=d*(d*(d*e+3*u*t)+3*f*i)+m*s,w=d*(d*(d*r+3*u*o)+3*f*l)+m*c;h[0]=Math.min(h[0],y),h[1]=Math.min(h[1],w),h[2]=Math.max(h[2],y),h[3]=Math.max(h[3],w)},Nf=new WeakSet,DS=function(e,t,i,s,r,o,l,c,u,h,d,f){if(Math.abs(u)<1e-12){Math.abs(h)>=1e-12&&S(this,Yc,uv).call(this,e,t,i,s,r,o,l,c,-d/h,f);return}const m=h**2-4*d*u;if(m<0)return;const y=Math.sqrt(m),w=2*u;S(this,Yc,uv).call(this,e,t,i,s,r,o,l,c,(-h+y)/w,f),S(this,Yc,uv).call(this,e,t,i,s,r,o,l,c,(-h-y)/w,f)},p(V,Yc),p(V,Nf);function PL(n){return decodeURIComponent(escape(n))}let Nb=null,$E=null;function Zk(n){return Nb||(Nb=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,$E=new Map([["","t"]])),n.replaceAll(Nb,(e,t,i)=>t?t.normalize("NFKC"):$E.get(i))}function rx(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),Qk(n)}const ox="pdfjs_internal_id_";function RL(n,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[i,s,...r]=t;if(!n(i)&&!Number.isInteger(i)||!e(s))return!1;const o=r.length;let l=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Qt(n,e,t){return Math.min(Math.max(n,e),t)}function Jk(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(Qk(n))}function NL(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):dm(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...e){return new Promise(t=>{t(n(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((e,t)=>e+t,0)});class Cf{static textContent(e){const t=[],i={items:t,styles:Object.create(null)};function s(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(Cf.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&t.push({str:o}),!!r.children)for(const u of r.children)s(u)}return s(e),i}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class ax{static setupStorage(e,t,i,s,r){const o=s.getValue(t,{value:null});switch(i.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),r==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})});break;case"input":if(i.attributes.type==="radio"||i.attributes.type==="checkbox"){if(o.value===i.attributes.xfaOn?e.setAttribute("checked",!0):o.value===i.attributes.xfaOff&&e.removeAttribute("checked"),r==="print")break;e.addEventListener("change",l=>{s.setValue(t,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),r==="print")break;e.addEventListener("input",l=>{s.setValue(t,{value:l.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const l of i.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}e.addEventListener("input",l=>{const c=l.target.options,u=c.selectedIndex===-1?"":c[c.selectedIndex].value;s.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:i=null,intent:s,linkService:r}){const{attributes:o}=t,l=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[c,u]of Object.entries(o))if(u!=null)switch(c){case"class":u.length&&e.setAttribute(c,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!l||c!=="href"&&c!=="newWindow")&&e.setAttribute(c,u)}l&&r.addLinkAttributes(e,o.href,o.newWindow),i&&o.dataId&&this.setupStorage(e,o.dataId,t,i)}static render(e){var d,f;const t=e.annotationStorage,i=e.linkService,s=e.xfaHtml,r=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:r,linkService:i});const l=r!=="richText",c=e.div;if(c.append(o),e.viewport){const m=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=m}l&&c.setAttribute("class","xfaLayer xfaFont");const u=[];if(s.children.length===0){if(s.value){const m=document.createTextNode(s.value);o.append(m),l&&Cf.shouldBuildText(s.name)&&u.push(m)}return{textDivs:u}}const h=[[s,-1,o]];for(;h.length>0;){const[m,y,w]=h.at(-1);if(y+1===m.children.length){h.pop();continue}const x=m.children[++h.at(-1)[1]];if(x===null)continue;const{name:v}=x;if(v==="#text"){const A=document.createTextNode(x.value);u.push(A),w.append(A);continue}const b=(d=x==null?void 0:x.attributes)!=null&&d.xmlns?document.createElementNS(x.attributes.xmlns,v):document.createElement(v);if(w.append(b),x.attributes&&this.setAttributes({html:b,element:x,storage:t,intent:r,linkService:i}),((f=x.children)==null?void 0:f.length)>0)h.push([x,-1,b]);else if(x.value){const A=document.createTextNode(x.value);l&&Cf.shouldBuildText(v)&&u.push(A),b.append(A)}}for(const m of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))m.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Fs="http://www.w3.org/2000/svg",va=class va{};F(va,"CSS",96),F(va,"PDF",72),F(va,"PDF_TO_CSS_UNITS",va.CSS/va.PDF);let Mr=va;async function od(n,e="text"){if(Td(n,document.baseURI)){const t=await fetch(n);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,i)=>{const s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}i(new Error(s.statusText))}},s.send(null)})}class fm{constructor({viewBox:e,userUnit:t,scale:i,rotation:s,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=e,this.userUnit=t,this.scale=i,this.rotation=s,this.offsetX=r,this.offsetY=o,i*=t;const c=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let h,d,f,m;switch(s%=360,s<0&&(s+=360),s){case 180:h=-1,d=0,f=0,m=1;break;case 90:h=0,d=1,f=1,m=0;break;case 270:h=0,d=-1,f=-1,m=0;break;case 0:h=1,d=0,f=0,m=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(f=-f,m=-m);let y,w,x,v;h===0?(y=Math.abs(u-e[1])*i+r,w=Math.abs(c-e[0])*i+o,x=(e[3]-e[1])*i,v=(e[2]-e[0])*i):(y=Math.abs(c-e[0])*i+r,w=Math.abs(u-e[1])*i+o,x=(e[2]-e[0])*i,v=(e[3]-e[1])*i),this.transform=[h*i,d*i,f*i,m*i,y-h*i*c-f*i*u,w-d*i*c-m*i*u],this.width=x,this.height=v}get rawDims(){const e=this.viewBox;return ie(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:i=this.offsetX,offsetY:s=this.offsetY,dontFlip:r=!1}={}){return new fm({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}convertToViewportPoint(e,t){const i=[e,t];return V.applyTransform(i,this.transform),i}convertToViewportRectangle(e){const t=[e[0],e[1]];V.applyTransform(t,this.transform);const i=[e[2],e[3]];return V.applyTransform(i,this.transform),[t[0],t[1],i[0],i[1]]}convertToPdfPoint(e,t){const i=[e,t];return V.applyInverseTransform(i,this.transform),i}}class Lw extends uc{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function pm(n){const e=n.length;let t=0;for(;t<e&&n[t].trim()==="";)t++;return n.substring(t,t+5).toLowerCase()==="data:"}function Dw(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function eT(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function tT(n,e="document.pdf"){if(typeof n!="string")return e;if(pm(n))return ee('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const i=(l=>{try{return new URL(l)}catch{try{return new URL(decodeURIComponent(l))}catch{try{return new URL(l,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(l),"https://foo.bar")}catch{return null}}}}})(n);if(!i)return e;const s=l=>{try{let c=decodeURIComponent(l);return c.includes("/")?(c=c.split("/").at(-1),c.test(/^\.pdf$/i)?c:l):c}catch{return l}},r=/\.pdf$/i,o=i.pathname.split("/").at(-1);if(r.test(o))return s(o);if(i.searchParams.size>0){const l=Array.from(i.searchParams.values()).reverse();for(const u of l)if(r.test(u))return s(u);const c=Array.from(i.searchParams.keys()).reverse();for(const u of c)if(r.test(u))return s(u)}if(i.hash){const c=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(i.hash);if(c)return s(c[0])}return e}class VE{constructor(){F(this,"started",Object.create(null));F(this,"times",[])}time(e){e in this.started&&ee(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||ee(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:i}of this.times)t=Math.max(i.length,t);for(const{name:i,start:s,end:r}of this.times)e.push(`${i.padEnd(t)} ${r-s}ms
`);return e.join("")}}function Td(n,e){const t=e?URL.parse(n,e):URL.parse(n);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function ti(n){n.preventDefault()}function Ge(n){n.preventDefault(),n.stopPropagation()}function LL(n){console.log("Deprecated API usage: "+n)}var Lf;class _f{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;a(this,Lf)||g(this,Lf,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=a(this,Lf).exec(e);if(!t)return null;const i=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let r=parseInt(t[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(t[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(t[6],10);c=c>=0&&c<=59?c:0;const u=t[7]||"Z";let h=parseInt(t[8],10);h=h>=0&&h<=23?h:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,u==="-"?(o+=h,l+=d):u==="+"&&(o-=h,l-=d),new Date(Date.UTC(i,s,r,o,l,c))}}Lf=new WeakMap,p(_f,Lf,void 0);function nT(n,{scale:e=1,rotation:t=0}){const{width:i,height:s}=n.attributes.style,r=[0,0,parseInt(i),parseInt(s)];return new fm({viewBox:r,userUnit:1,scale:e,rotation:t})}function ad(n){if(n.startsWith("#")){const e=parseInt(n.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(e=>parseInt(e)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(ee(`Not a valid color format: "${n}"`),[0,0,0])}function DL(n){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of n.keys()){e.style.color=t;const i=window.getComputedStyle(e).color;n.set(t,ad(i))}e.remove()}function We(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform();return[e,t,i,s,r,o]}function ts(n){const{a:e,b:t,c:i,d:s,e:r,f:o}=n.getTransform().invertSelf();return[e,t,i,s,r,o]}function ia(n,e,t=!1,i=!0){if(e instanceof fm){const{pageWidth:s,pageHeight:r}=e.rawDims,{style:o}=n,l=kt.isCSSRoundSupported,c=`var(--total-scale-factor) * ${s}px`,u=`var(--total-scale-factor) * ${r}px`,h=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,d=l?`round(down, ${u}, var(--scale-round-y))`:`calc(${u})`;!t||e.rotation%180===0?(o.width=h,o.height=d):(o.width=d,o.height=h)}i&&n.setAttribute("data-main-rotation",e.rotation)}class Zi{constructor(){const{pixelRatio:e}=Zi;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,i,s,r=-1){let o=1/0,l=1/0,c=1/0;i=Zi.capPixels(i,r),i>0&&(o=Math.sqrt(i/(e*t))),s!==-1&&(l=s/e,c=s/t);const u=Math.min(o,l,c);return this.sx>u||this.sy>u?(this.sx=u,this.sy=u,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const i=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,i):i}return e}}const fy=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class ML{static get isDarkMode(){var e;return ie(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class iT{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:i}=window.getComputedStyle(e);return e.remove(),ie(this,"commentForegroundColor",ad(i))}}function sT(n,e,t,i){i=Math.min(Math.max(i??1,0),1);const s=255*(1-i);return n=Math.round(n*i+s),e=Math.round(e*i+s),t=Math.round(t*i+s),[n,e,t]}function WE(n,e){const t=n[0]/255,i=n[1]/255,s=n[2]/255,r=Math.max(t,i,s),o=Math.min(t,i,s),l=(r+o)/2;if(r===o)e[0]=e[1]=0;else{const c=r-o;switch(e[1]=l<.5?c/(r+o):c/(2-r-o),r){case t:e[0]=((i-s)/c+(i<s?6:0))*60;break;case i:e[0]=((s-t)/c+2)*60;break;case s:e[0]=((t-i)/c+4)*60;break}}e[2]=l}function MS(n,e){const t=n[0],i=n[1],s=n[2],r=(1-Math.abs(2*s-1))*i,o=r*(1-Math.abs(t/60%2-1)),l=s-r/2;switch(Math.floor(t/60)){case 0:e[0]=r+l,e[1]=o+l,e[2]=l;break;case 1:e[0]=o+l,e[1]=r+l,e[2]=l;break;case 2:e[0]=l,e[1]=r+l,e[2]=o+l;break;case 3:e[0]=l,e[1]=o+l,e[2]=r+l;break;case 4:e[0]=o+l,e[1]=l,e[2]=r+l;break;case 5:case 6:e[0]=r+l,e[1]=l,e[2]=o+l;break}}function XE(n){return n<=.03928?n/12.92:((n+.055)/1.055)**2.4}function GE(n,e,t){MS(n,t),t.map(XE);const i=.2126*t[0]+.7152*t[1]+.0722*t[2];MS(e,t),t.map(XE);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return i>s?(i+.05)/(s+.05):(s+.05)/(i+.05)}const YE=new Map;function rT(n,e){const t=n[0]+n[1]*256+n[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let i=YE.get(t);if(i)return i;const s=new Float32Array(9),r=s.subarray(0,3),o=s.subarray(3,6);WE(n,o);const l=s.subarray(6,9);WE(e,l);const c=l[2]<.5,u=c?12:4.5;if(o[2]=c?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),GE(o,l,r)<u){let h,d;c?(h=o[2],d=1):(h=0,d=o[2]);const f=.005;for(;d-h>f;){const m=o[2]=(h+d)/2;c===GE(o,l,r)<u?h=m:d=m}o[2]=c?d:h}return MS(o,r),i=V.makeHexColor(Math.round(r[0]*255),Math.round(r[1]*255),Math.round(r[2]*255)),YE.set(t,i),i}function lx({html:n,dir:e,className:t},i){const s=document.createDocumentFragment();if(typeof n=="string"){const r=document.createElement("p");r.dir=e||"auto";const o=n.split(/(?:\r\n?|\n)/);for(let l=0,c=o.length;l<c;++l){const u=o[l];r.append(document.createTextNode(u)),l<c-1&&r.append(document.createElement("br"))}s.append(r)}else ax.render({xfaHtml:n,div:s,intent:"richText"});s.firstChild.classList.add("richText",t),i.append(s)}var $r,Vr,ai,li,Df,Wr,qc,Kc,Mf,Ey,oT,Cy,aT,_y,lT,Xr,gc,xa,Pd;const js=class js{constructor(e){p(this,Cy);p(this,_y);p(this,Xr);p(this,xa);p(this,$r,null);p(this,Vr,null);p(this,ai,void 0);p(this,li,null);p(this,Df,null);p(this,Wr,null);p(this,qc,null);p(this,Kc,null);g(this,ai,e),a(js,Mf)||g(js,Mf,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=g(this,$r,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=a(this,ai)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",ti,{signal:t}),e.addEventListener("pointerdown",S(js,Ey,oT),{signal:t}));const i=g(this,li,document.createElement("div"));i.className="buttons",e.append(i);const s=a(this,ai).toolbarPosition;if(s){const{style:r}=e,o=a(this,ai)._uiManager.direction==="ltr"?1-s[0]:s[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return a(this,$r)}hide(){var e;a(this,$r).classList.add("hidden"),(e=a(this,Vr))==null||e.hideDropdown()}show(){var e,t;a(this,$r).classList.remove("hidden"),(e=a(this,Df))==null||e.shown(),(t=a(this,Wr))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=a(this,ai),i=document.createElement("button");i.classList.add("basic","deleteButton"),i.tabIndex=0,i.setAttribute("data-l10n-id",a(js,Mf)[e]),S(this,Xr,gc).call(this,i)&&i.addEventListener("click",s=>{t.delete()},{signal:t._signal}),a(this,li).append(i)}async addAltText(e){const t=await e.render();S(this,Xr,gc).call(this,t),a(this,li).append(t,a(this,xa,Pd)),g(this,Df,e)}addComment(e,t=null){if(a(this,Wr))return;const i=e.renderForToolbar();if(!i)return;S(this,Xr,gc).call(this,i);const s=g(this,qc,a(this,xa,Pd));t?(a(this,li).insertBefore(i,t),a(this,li).insertBefore(s,t)):a(this,li).append(i,s),g(this,Wr,e),e.toolbar=this}addColorPicker(e){if(a(this,Vr))return;g(this,Vr,e);const t=e.renderButton();S(this,Xr,gc).call(this,t),a(this,li).append(t,a(this,xa,Pd))}async addEditSignatureButton(e){const t=g(this,Kc,await e.renderEditButton(a(this,ai)));S(this,Xr,gc).call(this,t),a(this,li).append(t,a(this,xa,Pd))}removeButton(e){var t,i;switch(e){case"comment":(t=a(this,Wr))==null||t.removeToolbarCommentButton(),g(this,Wr,null),(i=a(this,qc))==null||i.remove(),g(this,qc,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,i){const s=a(this,li).querySelector(i);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){a(this,Kc)&&(a(this,Kc).title=e)}remove(){var e;a(this,$r).remove(),(e=a(this,Vr))==null||e.destroy(),g(this,Vr,null)}};$r=new WeakMap,Vr=new WeakMap,ai=new WeakMap,li=new WeakMap,Df=new WeakMap,Wr=new WeakMap,qc=new WeakMap,Kc=new WeakMap,Mf=new WeakMap,Ey=new WeakSet,oT=function(e){e.stopPropagation()},Cy=new WeakSet,aT=function(e){a(this,ai)._focusEventsAllowed=!1,Ge(e)},_y=new WeakSet,lT=function(e){a(this,ai)._focusEventsAllowed=!0,Ge(e)},Xr=new WeakSet,gc=function(e){const t=a(this,ai)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",S(this,Cy,aT).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",S(this,_y,lT).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ti,{signal:t}),!0)},xa=new WeakSet,Pd=function(){const e=document.createElement("div");return e.className="divider",e},p(js,Ey),p(js,Mf,null);let FS=js;var Ff,Ea,Hs,ky,cT,Ty,uT,If,IS;class FL{constructor(e){p(this,ky);p(this,Ty);p(this,If);p(this,Ff,null);p(this,Ea,null);p(this,Hs,void 0);g(this,Hs,e)}show(e,t,i){const[s,r]=S(this,Ty,uT).call(this,t,i),{style:o}=a(this,Ea)||g(this,Ea,S(this,ky,cT).call(this));e.append(a(this,Ea)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Ea).remove()}}Ff=new WeakMap,Ea=new WeakMap,Hs=new WeakMap,ky=new WeakSet,cT=function(){const e=g(this,Ea,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=a(this,Hs)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",ti,{signal:t});const i=g(this,Ff,document.createElement("div"));return i.className="buttons",e.append(i),a(this,Hs).hasCommentManager()&&S(this,If,IS).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{a(this,Hs).commentSelection("floating_button")}),S(this,If,IS).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{a(this,Hs).highlightSelection("floating_button")}),e},Ty=new WeakSet,uT=function(e,t){let i=0,s=0;for(const r of e){const o=r.y+r.height;if(o<i)continue;const l=r.x+(t?r.width:0);if(o>i){s=l,i=o;continue}t?l>s&&(s=l):l<s&&(s=l)}return[t?1-s:s,i]},If=new WeakSet,IS=function(e,t,i,s){const r=document.createElement("button");r.classList.add("basic",e),r.tabIndex=0,r.setAttribute("data-l10n-id",t);const o=document.createElement("span");r.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",i);const l=a(this,Hs)._signal;l instanceof AbortSignal&&!l.aborted&&(r.addEventListener("contextmenu",ti,{signal:l}),r.addEventListener("click",s,{signal:l})),a(this,Ff).append(r)};function hT(n,e,t){for(const i of t)e.addEventListener(i,n[i].bind(n))}var Py;class IL{constructor(){p(this,Py,0)}get id(){return`${xf}${ht(this,Py)._++}`}}Py=new WeakMap;var Qc,Of,Wt,Zc,hv;const Ex=class Ex{constructor(){p(this,Zc);p(this,Qc,rx());p(this,Of,0);p(this,Wt,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',i=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const r=s.decode().then(()=>(i.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(i.getImageData(0,0,1,1).data.buffer)[0]===0));return ie(this,"_isSVGFittingCanvas",r)}async getFromFile(e){const{lastModified:t,name:i,size:s,type:r}=e;return S(this,Zc,hv).call(this,`${t}_${i}_${s}_${r}`,e)}async getFromUrl(e){return S(this,Zc,hv).call(this,e,e)}async getFromBlob(e,t){const i=await t;return S(this,Zc,hv).call(this,e,i)}async getFromId(e){a(this,Wt)||g(this,Wt,new Map);const t=a(this,Wt).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:i}=t;return delete t.blobPromise,this.getFromBlob(t.id,i)}return this.getFromUrl(t.url)}getFromCanvas(e,t){a(this,Wt)||g(this,Wt,new Map);let i=a(this,Wt).get(e);if(i!=null&&i.bitmap)return i.refCounter+=1,i;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),i={bitmap:s.transferToImageBitmap(),id:`image_${a(this,Qc)}_${ht(this,Of)._++}`,refCounter:1,isSvg:!1},a(this,Wt).set(e,i),a(this,Wt).set(i.id,i),i}getSvgUrl(e){const t=a(this,Wt).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;a(this,Wt)||g(this,Wt,new Map);const t=a(this,Wt).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:i}=t;if(!t.url&&!t.file){const r=new OffscreenCanvas(i.width,i.height);r.getContext("bitmaprenderer").transferFromImageBitmap(i),t.blobPromise=r.convertToBlob()}(s=i.close)==null||s.call(i),t.bitmap=null}isValidId(e){return e.startsWith(`image_${a(this,Qc)}_`)}};Qc=new WeakMap,Of=new WeakMap,Wt=new WeakMap,Zc=new WeakSet,hv=async function(e,t){a(this,Wt)||g(this,Wt,new Map);let i=a(this,Wt).get(e);if(i===null)return null;if(i!=null&&i.bitmap)return i.refCounter+=1,i;try{i||(i={bitmap:null,id:`image_${a(this,Qc)}_${ht(this,Of)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(i.url=t,s=await od(t,"blob")):t instanceof File?s=i.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const r=Ex._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((u,h)=>{l.onload=()=>{i.bitmap=l,i.isSvg=!0,u()},o.onload=async()=>{const d=i.svgUrl=o.result;l.src=await r?`${d}#svgView(preserveAspectRatio(none))`:d},l.onerror=o.onerror=h});o.readAsDataURL(s),await c}else i.bitmap=await createImageBitmap(s);i.refCounter=1}catch(s){ee(s),i=null}return a(this,Wt).set(e,i),i&&a(this,Wt).set(i.id,i),i};let OS=Ex;var nt,Gr,Bf,Ve;class OL{constructor(e=128){p(this,nt,[]);p(this,Gr,!1);p(this,Bf,void 0);p(this,Ve,-1);g(this,Bf,e)}add({cmd:e,undo:t,post:i,mustExec:s,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(s&&e(),a(this,Gr))return;const c={cmd:e,undo:t,post:i,type:r};if(a(this,Ve)===-1){a(this,nt).length>0&&(a(this,nt).length=0),g(this,Ve,0),a(this,nt).push(c);return}if(o&&a(this,nt)[a(this,Ve)].type===r){l&&(c.undo=a(this,nt)[a(this,Ve)].undo),a(this,nt)[a(this,Ve)]=c;return}const u=a(this,Ve)+1;u===a(this,Bf)?a(this,nt).splice(0,1):(g(this,Ve,u),u<a(this,nt).length&&a(this,nt).splice(u)),a(this,nt).push(c)}undo(){if(a(this,Ve)===-1)return;g(this,Gr,!0);const{undo:e,post:t}=a(this,nt)[a(this,Ve)];e(),t==null||t(),g(this,Gr,!1),g(this,Ve,a(this,Ve)-1)}redo(){if(a(this,Ve)<a(this,nt).length-1){g(this,Ve,a(this,Ve)+1),g(this,Gr,!0);const{cmd:e,post:t}=a(this,nt)[a(this,Ve)];e(),t==null||t(),g(this,Gr,!1)}}hasSomethingToUndo(){return a(this,Ve)!==-1}hasSomethingToRedo(){return a(this,Ve)<a(this,nt).length-1}cleanType(e){if(a(this,Ve)!==-1){for(let t=a(this,Ve);t>=0;t--)if(a(this,nt)[t].type!==e){a(this,nt).splice(t+1,a(this,Ve)-t),g(this,Ve,t);return}a(this,nt).length=0,g(this,Ve,-1)}}destroy(){g(this,nt,null)}}nt=new WeakMap,Gr=new WeakMap,Bf=new WeakMap,Ve=new WeakMap;var Ry,dT;class gm{constructor(e){p(this,Ry);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=kt.platform;for(const[i,s,r={}]of e)for(const o of i){const l=o.startsWith("mac+");t&&l?(this.callbacks.set(o.slice(4),{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1))):!t&&!l&&(this.callbacks.set(o,{callback:s,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const i=this.callbacks.get(S(this,Ry,dT).call(this,t));if(!i)return;const{callback:s,options:{bubbles:r=!1,args:o=[],checker:l=null}}=i;l&&!l(e,t)||(s.bind(e,...o,t)(),r||Ge(t))}}Ry=new WeakSet,dT=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ny=class Ny{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return DL(e),ie(this,"_colors",e)}convert(e){const t=ad(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[i,s]of this._colors)if(s.every((r,o)=>r===t[o]))return Ny._colorsMapping.get(i);return t}getHexCode(e){const t=this._colors.get(e);return t?V.makeHexColor(...t):e}};F(Ny,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let BS=Ny;var Jc,Nn,eu,Qe,ft,tu,ci,nu,ui,Xt,Yr,qr,iu,Kr,rs,hi,Ca,jf,zf,su,Uf,os,Qr,ru,Zr,as,Ly,Jr,ou,Hf,eo,_a,au,to,$f,lt,ge,$s,no,io,Vf,lu,Wf,so,ls,Vs,Xf,Gf,di,cu,dv,Yf,jS,Dy,fT,My,pT,ka,Rd,Fy,gT,Iy,mT,Oy,vT,qf,zS,By,yT,Kf,US,Qf,HS,jy,wT,Rt,tn,Li,Is,zy,bT,Uy,ST,Zf,$S,Hy,AT,Ta,Nd,Jf,VS;const Fc=class Fc{constructor(e,t,i,s,r,o,l,c,u,h,d,f,m,y,w,x){p(this,cu);p(this,Yf);p(this,Dy);p(this,My);p(this,ka);p(this,Fy);p(this,Iy);p(this,Oy);p(this,qf);p(this,By);p(this,Kf);p(this,Qf);p(this,jy);p(this,Rt);p(this,Li);p(this,zy);p(this,Uy);p(this,Zf);p(this,Hy);p(this,Ta);p(this,Jf);p(this,Jc,new AbortController);p(this,Nn,null);p(this,eu,null);p(this,Qe,new Map);p(this,ft,new Map);p(this,tu,null);p(this,ci,null);p(this,nu,null);p(this,ui,new OL);p(this,Xt,null);p(this,Yr,null);p(this,qr,null);p(this,iu,0);p(this,Kr,new Set);p(this,rs,null);p(this,hi,null);p(this,Ca,new Set);F(this,"_editorUndoBar",null);p(this,jf,!1);p(this,zf,!1);p(this,su,!1);p(this,Uf,null);p(this,os,null);p(this,Qr,null);p(this,ru,null);p(this,Zr,!1);p(this,as,null);p(this,Ly,new IL);p(this,Jr,!1);p(this,ou,!1);p(this,Hf,!1);p(this,eo,null);p(this,_a,null);p(this,au,null);p(this,to,null);p(this,$f,null);p(this,lt,J.NONE);p(this,ge,new Set);p(this,$s,null);p(this,no,null);p(this,io,null);p(this,Vf,null);p(this,lu,null);p(this,Wf,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});p(this,so,[0,0]);p(this,ls,null);p(this,Vs,null);p(this,Xf,null);p(this,Gf,null);p(this,di,null);const v=this._signal=a(this,Jc).signal;g(this,Vs,e),g(this,Xf,t),g(this,Gf,i),g(this,tu,s),g(this,Xt,r),g(this,no,o),g(this,lu,c),this._eventBus=l,l._on("editingaction",this.onEditingAction.bind(this),{signal:v}),l._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),l._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),l._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),l._on("setpreference",this.onSetPreference.bind(this),{signal:v}),l._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:v}),window.addEventListener("pointerdown",()=>{g(this,ou,!0)},{capture:!0,signal:v}),window.addEventListener("pointerup",()=>{g(this,ou,!1)},{capture:!0,signal:v}),S(this,Fy,gT).call(this),S(this,jy,wT).call(this),S(this,qf,zS).call(this),g(this,ci,c.annotationStorage),g(this,Uf,c.filterFactory),g(this,io,u),g(this,ru,h||null),g(this,jf,d),g(this,zf,f),g(this,su,m),g(this,$f,y||null),this.viewParameters={realScale:Mr.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=w||null,this._supportsPinchToZoom=x!==!1,r==null||r.setSidebarUiManager(this)}static get _keyboardManager(){const e=Fc.prototype,t=o=>a(o,Vs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),i=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},s=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return ie(this,"_keyboardManager",new gm([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:i}],[["ctrl+z","mac+meta+z"],e.undo,{checker:i}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:i}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:i}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Vs).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,Vs).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}]]))}destroy(){var e,t,i,s,r,o,l,c,u;(e=a(this,di))==null||e.resolve(),g(this,di,null),(t=a(this,Jc))==null||t.abort(),g(this,Jc,null),this._signal=null;for(const h of a(this,ft).values())h.destroy();a(this,ft).clear(),a(this,Qe).clear(),a(this,Ca).clear(),(i=a(this,to))==null||i.clear(),g(this,Nn,null),a(this,ge).clear(),a(this,ui).destroy(),(s=a(this,tu))==null||s.destroy(),(r=a(this,Xt))==null||r.destroy(),(o=a(this,no))==null||o.destroy(),(l=a(this,as))==null||l.hide(),g(this,as,null),(c=a(this,au))==null||c.destroy(),g(this,au,null),g(this,eu,null),a(this,os)&&(clearTimeout(a(this,os)),g(this,os,null)),a(this,ls)&&(clearTimeout(a(this,ls)),g(this,ls,null)),(u=this._editorUndoBar)==null||u.destroy(),g(this,lu,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return a(this,$f)}get useNewAltTextFlow(){return a(this,zf)}get useNewAltTextWhenAddingImage(){return a(this,su)}get hcmFilter(){return ie(this,"hcmFilter",a(this,io)?a(this,Uf).addHCMFilter(a(this,io).foreground,a(this,io).background):"none")}get direction(){return ie(this,"direction",getComputedStyle(a(this,Vs)).direction)}get _highlightColors(){return ie(this,"_highlightColors",a(this,ru)?new Map(a(this,ru).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return ie(this,"highlightColors",null);const t=new Map,i=!!a(this,io);for(const[s,r]of e){const o=s.endsWith("_HCM");if(i&&o){t.set(s.replace("_HCM",""),r);continue}!i&&!o&&t.set(s,r)}return ie(this,"highlightColors",t)}get highlightColorNames(){return ie(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),g(this,qr,e)}setMainHighlightColorPicker(e){g(this,au,e)}editAltText(e,t=!1){var i;(i=a(this,tu))==null||i.editAltText(this,e,t)}hasCommentManager(){return!!a(this,Xt)}editComment(e,t,i,s){var r;(r=a(this,Xt))==null||r.showDialog(this,e,t,i,s)}selectComment(e,t){const i=a(this,ft).get(e),s=i==null?void 0:i.getEditorByUID(t);s==null||s.toggleComment(!0,!0)}updateComment(e){var t;(t=a(this,Xt))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=a(this,Xt))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=a(this,Xt))==null||t.removeComments([e.uid])}toggleComment(e,t,i=void 0){var s;(s=a(this,Xt))==null||s.toggleCommentPopup(e,t,i)}makeCommentColor(e,t){var i;return e&&((i=a(this,Xt))==null?void 0:i.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=a(this,Xt))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(a(this,ft).has(e-1))return;const{resolve:t,promise:i}=Promise.withResolvers(),s=r=>{r.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await i}getSignature(e){var t;(t=a(this,no))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return a(this,no)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":g(this,su,t);break}}onPageChanging({pageNumber:e}){g(this,iu,e-1)}focusMainContainer(){a(this,Vs).focus()}findParent(e,t){for(const i of a(this,ft).values()){const{x:s,y:r,width:o,height:l}=i.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=r&&t<=r+l)return i}return null}disableUserSelect(e=!1){a(this,Xf).classList.toggle("noUserSelect",e)}addShouldRescale(e){a(this,Ca).add(e)}removeShouldRescale(e){a(this,Ca).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Mr.PDF_TO_CSS_UNITS;for(const i of a(this,Ca))i.onScaleChanging();(t=a(this,qr))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const i=document.getSelection();if(!i||i.isCollapsed)return;const{anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l}=i,c=i.toString(),h=S(this,cu,dv).call(this,i).closest(".textLayer"),d=this.getSelectionBoxes(h);if(!d)return;i.empty();const f=S(this,Yf,jS).call(this,h),m=a(this,lt)===J.NONE,y=()=>{const w=f==null?void 0:f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:d,anchorNode:s,anchorOffset:r,focusNode:o,focusOffset:l,text:c});m&&this.showAllEditors("highlight",!0,!0),t&&(w==null||w.editComment())};if(m){this.switchToMode(J.HIGHLIGHT,y);return}y()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!a(this,ci))return null;const t=`${xf}${e}`,i=a(this,ci).getRawValue(t);return i&&a(this,ci).remove(t),i}addToAnnotationStorage(e){!e.isEmpty()&&a(this,ci)&&!a(this,ci).has(e.id)&&a(this,ci).setValue(e.id,e)}a11yAlert(e,t=null){const i=a(this,Gf);i&&(i.setAttribute("data-l10n-id",e),t?i.setAttribute("data-l10n-args",JSON.stringify(t)):i.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,a(this,Zr)&&(g(this,Zr,!1),S(this,ka,Rd).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of a(this,ge))if(t.div.contains(e)){g(this,_a,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!a(this,_a))return;const[e,t]=a(this,_a);g(this,_a,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){S(this,qf,zS).call(this),S(this,Kf,US).call(this)}removeEditListeners(){S(this,By,yT).call(this),S(this,Qf,HS).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const i of a(this,hi))if(i.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const i of a(this,hi))if(i.isHandlingMimeForPasting(t.type)){i.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var i;if(e.preventDefault(),(i=a(this,Nn))==null||i.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of a(this,ge)){const r=s.serialize(!0);r&&t.push(r)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const r of t.items)for(const o of a(this,hi))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let i=t.getData("application/pdfjs");if(!i)return;try{i=JSON.parse(i)}catch(r){ee(`paste: "${r.message}".`);return}if(!Array.isArray(i))return;this.unselectAll();const s=this.currentLayer;try{const r=[];for(const c of i){const u=await s.deserialize(c);if(!u)return;r.push(u)}const o=()=>{for(const c of r)S(this,Zf,$S).call(this,c);S(this,Jf,VS).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){ee(`paste: "${r.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,lt)!==J.NONE&&!this.isEditorHandlingKeyboard&&Fc._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,Zr)&&(g(this,Zr,!1),S(this,ka,Rd).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(S(this,Iy,mT).call(this),S(this,Kf,US).call(this),S(this,Rt,tn).call(this,{isEditing:a(this,lt)!==J.NONE,isEmpty:S(this,Ta,Nd).call(this),hasSomethingToUndo:a(this,ui).hasSomethingToUndo(),hasSomethingToRedo:a(this,ui).hasSomethingToRedo(),hasSelectedEditor:!1})):(S(this,Oy,vT).call(this),S(this,Qf,HS).call(this),S(this,Rt,tn).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!a(this,hi)){g(this,hi,e);for(const t of a(this,hi))S(this,Li,Is).call(this,t.defaultPropertiesToUpdate)}}getId(){return a(this,Ly).id}get currentLayer(){return a(this,ft).get(a(this,iu))}getLayer(e){return a(this,ft).get(e)}get currentPageIndex(){return a(this,iu)}addLayer(e){a(this,ft).set(e.pageIndex,e),a(this,Jr)?e.enable():e.disable()}removeLayer(e){a(this,ft).delete(e.pageIndex)}async updateMode(e,t=null,i=!1,s=!1,r=!1){var o,l,c,u,h,d;if(a(this,lt)!==e&&!(a(this,di)&&(await a(this,di).promise,!a(this,di)))){if(g(this,di,Promise.withResolvers()),(o=a(this,qr))==null||o.commitOrRemove(),a(this,lt)===J.POPUP&&((l=a(this,Xt))==null||l.hideSidebar()),(c=a(this,Xt))==null||c.destroyPopup(),g(this,lt,e),e===J.NONE){this.setEditingState(!1),S(this,Uy,ST).call(this);for(const f of a(this,Qe).values())f.hideStandaloneCommentButton();(u=this._editorUndoBar)==null||u.hide(),this.toggleComment(null),a(this,di).resolve();return}for(const f of a(this,Qe).values())f.addStandaloneCommentButton();e===J.SIGNATURE&&await((h=a(this,no))==null?void 0:h.loadSignatures()),this.setEditingState(!0),await S(this,zy,bT).call(this),this.unselectAll();for(const f of a(this,ft).values())f.updateMode(e);if(e===J.POPUP){a(this,eu)||g(this,eu,await a(this,lu).getAnnotationsByType(new Set(a(this,hi).map(y=>y._editorType))));const f=new Set,m=[];for(const y of a(this,Qe).values()){const{annotationElementId:w,hasComment:x,deleted:v}=y;w&&f.add(w),x&&!v&&m.push(y.getData())}for(const y of a(this,eu)){const{id:w,popupRef:x,contentsObj:v}=y;x&&(v!=null&&v.str)&&!f.has(w)&&!a(this,Kr).has(w)&&m.push(y)}(d=a(this,Xt))==null||d.showSidebar(m)}if(!t){i&&this.addNewEditorFromKeyboard(),a(this,di).resolve();return}for(const f of a(this,Qe).values())f.uid===t?(this.setSelected(f),r?f.editComment():s?f.enterInEditMode():f.focus()):f.unselect();a(this,di).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==a(this,lt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(a(this,hi)){switch(e){case le.CREATE:this.currentLayer.addNewEditor(t);return;case le.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Vf)||g(this,Vf,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const i of a(this,ge))i.updateParams(e,t);else for(const i of a(this,hi))i.updateDefaultParams(e,t)}}showAllEditors(e,t,i=!1){var r;for(const o of a(this,Qe).values())o.editorType===e&&o.show(t);(((r=a(this,Vf))==null?void 0:r.get(le.HIGHLIGHT_SHOW_ALL))??!0)!==t&&S(this,Li,Is).call(this,[[le.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(a(this,Hf)!==e){g(this,Hf,e);for(const t of a(this,ft).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of a(this,Qe).values())t.pageIndex===e&&(yield t)}getEditor(e){return a(this,Qe).get(e)}addEditor(e){a(this,Qe).set(e.id,e)}removeEditor(e){var t,i;e.div.contains(document.activeElement)&&(a(this,os)&&clearTimeout(a(this,os)),g(this,os,setTimeout(()=>{this.focusMainContainer(),g(this,os,null)},0))),a(this,Qe).delete(e.id),e.annotationElementId&&((t=a(this,to))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!a(this,Kr).has(e.annotationElementId))&&((i=a(this,ci))==null||i.remove(e.id))}addDeletedAnnotationElement(e){a(this,Kr).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return a(this,Kr).has(e)}removeDeletedAnnotationElement(e){a(this,Kr).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){a(this,Nn)!==e&&(g(this,Nn,e),e&&S(this,Li,Is).call(this,e.propertiesToUpdate))}updateUI(e){a(this,Hy,AT)===e&&S(this,Li,Is).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){S(this,Li,Is).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(a(this,ge).has(e)){a(this,ge).delete(e),e.unselect(),S(this,Rt,tn).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,ge).add(e),e.select(),S(this,Li,Is).call(this,e.propertiesToUpdate),S(this,Rt,tn).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=a(this,qr))==null||t.commitOrRemove();for(const i of a(this,ge))i!==e&&i.unselect();a(this,ge).clear(),a(this,ge).add(e),e.select(),S(this,Li,Is).call(this,e.propertiesToUpdate),S(this,Rt,tn).call(this,{hasSelectedEditor:!0})}isSelected(e){return a(this,ge).has(e)}get firstSelectedEditor(){return a(this,ge).values().next().value}unselect(e){e.unselect(),a(this,ge).delete(e),S(this,Rt,tn).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,ge).size!==0}get isEnterHandled(){return a(this,ge).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;a(this,ui).undo(),S(this,Rt,tn).call(this,{hasSomethingToUndo:a(this,ui).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:S(this,Ta,Nd).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){a(this,ui).redo(),S(this,Rt,tn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,ui).hasSomethingToRedo(),isEmpty:S(this,Ta,Nd).call(this)})}addCommands(e){a(this,ui).add(e),S(this,Rt,tn).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:S(this,Ta,Nd).call(this)})}cleanUndoStack(e){a(this,ui).cleanType(e)}delete(){var r;this.commitOrRemove();const e=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...a(this,ge)],i=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,t.length===1?t[0].editorType:t.length);for(const l of t)l.remove()},s=()=>{for(const o of t)S(this,Zf,$S).call(this,o)};this.addCommands({cmd:i,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=a(this,Nn))==null||e.commitOrRemove()}hasSomethingToControl(){return a(this,Nn)||this.hasSelection}selectAll(){for(const e of a(this,ge))e.commit();S(this,Jf,VS).call(this,a(this,Qe).values())}unselectAll(){var e;if(!(a(this,Nn)&&(a(this,Nn).commitOrRemove(),a(this,lt)!==J.NONE))&&!((e=a(this,qr))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of a(this,ge))t.unselect();a(this,ge).clear(),S(this,Rt,tn).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,i=!1){if(i||this.commitOrRemove(),!this.hasSelection)return;a(this,so)[0]+=e,a(this,so)[1]+=t;const[s,r]=a(this,so),o=[...a(this,ge)],l=1e3;a(this,ls)&&clearTimeout(a(this,ls)),g(this,ls,setTimeout(()=>{g(this,ls,null),a(this,so)[0]=a(this,so)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,Qe).has(c.id)&&(c.translateInPage(s,r),c.translationDone())},undo:()=>{for(const c of o)a(this,Qe).has(c.id)&&(c.translateInPage(-s,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(e,t),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),g(this,rs,new Map);for(const e of a(this,ge))a(this,rs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,rs))return!1;this.disableUserSelect(!1);const e=a(this,rs);g(this,rs,null);let t=!1;for(const[{x:s,y:r,pageIndex:o},l]of e)l.newX=s,l.newY=r,l.newPageIndex=o,t||(t=s!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!t)return!1;const i=(s,r,o,l)=>{if(a(this,Qe).has(s.id)){const c=a(this,ft).get(l);c?s._setParentAndPosition(c,r,o):(s.pageIndex=l,s.x=r,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:r,newY:o,newPageIndex:l}]of e)i(s,r,o,l)},undo:()=>{for(const[s,{savedX:r,savedY:o,savedPageIndex:l}]of e)i(s,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(a(this,rs))for(const i of a(this,rs).keys())i.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||a(this,ge).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return a(this,Nn)===e}getActive(){return a(this,Nn)}getMode(){return a(this,lt)}isEditingMode(){return a(this,lt)!==J.NONE}get imageManager(){return ie(this,"imageManager",new OS)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,h=t.rangeCount;u<h;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:i,y:s,width:r,height:o}=e.getBoundingClientRect();let l;switch(e.getAttribute("data-main-rotation")){case"90":l=(u,h,d,f)=>({x:(h-s)/o,y:1-(u+d-i)/r,width:f/o,height:d/r});break;case"180":l=(u,h,d,f)=>({x:1-(u+d-i)/r,y:1-(h+f-s)/o,width:d/r,height:f/o});break;case"270":l=(u,h,d,f)=>({x:1-(h+f-s)/o,y:(u-i)/r,width:f/o,height:d/r});break;default:l=(u,h,d,f)=>({x:(u-i)/r,y:(h-s)/o,width:d/r,height:f/o});break}const c=[];for(let u=0,h=t.rangeCount;u<h;u++){const d=t.getRangeAt(u);if(!d.collapsed)for(const{x:f,y:m,width:y,height:w}of d.getClientRects())y===0||w===0||c.push(l(f,m,y,w))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:e,id:t}){(a(this,nu)||g(this,nu,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=a(this,nu))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=a(this,nu))==null?void 0:s.get(e.data.id);if(!t)return;const i=a(this,ci).getRawValue(t);i&&(a(this,lt)===J.NONE&&!i.hasBeenModified||i.renderAnnotationElement(e))}setMissingCanvas(e,t,i){var r;const s=(r=a(this,to))==null?void 0:r.get(e);s&&(s.setCanvas(t,i),a(this,to).delete(e))}addMissingCanvas(e,t){(a(this,to)||g(this,to,new Map)).set(e,t)}};Jc=new WeakMap,Nn=new WeakMap,eu=new WeakMap,Qe=new WeakMap,ft=new WeakMap,tu=new WeakMap,ci=new WeakMap,nu=new WeakMap,ui=new WeakMap,Xt=new WeakMap,Yr=new WeakMap,qr=new WeakMap,iu=new WeakMap,Kr=new WeakMap,rs=new WeakMap,hi=new WeakMap,Ca=new WeakMap,jf=new WeakMap,zf=new WeakMap,su=new WeakMap,Uf=new WeakMap,os=new WeakMap,Qr=new WeakMap,ru=new WeakMap,Zr=new WeakMap,as=new WeakMap,Ly=new WeakMap,Jr=new WeakMap,ou=new WeakMap,Hf=new WeakMap,eo=new WeakMap,_a=new WeakMap,au=new WeakMap,to=new WeakMap,$f=new WeakMap,lt=new WeakMap,ge=new WeakMap,$s=new WeakMap,no=new WeakMap,io=new WeakMap,Vf=new WeakMap,lu=new WeakMap,Wf=new WeakMap,so=new WeakMap,ls=new WeakMap,Vs=new WeakMap,Xf=new WeakMap,Gf=new WeakMap,di=new WeakMap,cu=new WeakSet,dv=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Yf=new WeakSet,jS=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const i of a(this,ft).values())if(i.hasTextLayer(e))return i;return null},Dy=new WeakSet,fT=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const i=S(this,cu,dv).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(i);s&&(a(this,as)||g(this,as,new FL(this)),a(this,as).show(i,s,this.direction==="ltr"))},My=new WeakSet,pT=function(){var r,o,l;const e=document.getSelection();if(!e||e.isCollapsed){a(this,$s)&&((r=a(this,as))==null||r.hide(),g(this,$s,null),S(this,Rt,tn).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===a(this,$s))return;const s=S(this,cu,dv).call(this,e).closest(".textLayer");if(!s){a(this,$s)&&((o=a(this,as))==null||o.hide(),g(this,$s,null),S(this,Rt,tn).call(this,{hasSelectedText:!1}));return}if((l=a(this,as))==null||l.hide(),g(this,$s,t),S(this,Rt,tn).call(this,{hasSelectedText:!0}),!(a(this,lt)!==J.HIGHLIGHT&&a(this,lt)!==J.NONE)&&(a(this,lt)===J.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),g(this,Zr,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,lt)===J.HIGHLIGHT?S(this,Yf,jS).call(this,s):null;if(c==null||c.toggleDrawing(),a(this,ou)){const u=new AbortController,h=this.combinedSignal(u),d=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),c==null||c.toggleDrawing(!0),f.type==="pointerup"&&S(this,ka,Rd).call(this,"main_toolbar"))};window.addEventListener("pointerup",d,{signal:h}),window.addEventListener("blur",d,{signal:h})}else c==null||c.toggleDrawing(!0),S(this,ka,Rd).call(this,"main_toolbar")}},ka=new WeakSet,Rd=function(e=""){a(this,lt)===J.HIGHLIGHT?this.highlightSelection(e):a(this,jf)&&S(this,Dy,fT).call(this)},Fy=new WeakSet,gT=function(){document.addEventListener("selectionchange",S(this,My,pT).bind(this),{signal:this._signal})},Iy=new WeakSet,mT=function(){if(a(this,Qr))return;g(this,Qr,new AbortController);const e=this.combinedSignal(a(this,Qr));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},Oy=new WeakSet,vT=function(){var e;(e=a(this,Qr))==null||e.abort(),g(this,Qr,null)},qf=new WeakSet,zS=function(){if(a(this,eo))return;g(this,eo,new AbortController);const e=this.combinedSignal(a(this,eo));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},By=new WeakSet,yT=function(){var e;(e=a(this,eo))==null||e.abort(),g(this,eo,null)},Kf=new WeakSet,US=function(){if(a(this,Yr))return;g(this,Yr,new AbortController);const e=this.combinedSignal(a(this,Yr));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Qf=new WeakSet,HS=function(){var e;(e=a(this,Yr))==null||e.abort(),g(this,Yr,null)},jy=new WeakSet,wT=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Rt=new WeakSet,tn=function(e){Object.entries(e).some(([i,s])=>a(this,Wf)[i]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,Wf),e)}),a(this,lt)===J.HIGHLIGHT&&e.hasSelectedEditor===!1&&S(this,Li,Is).call(this,[[le.HIGHLIGHT_FREE,!0]]))},Li=new WeakSet,Is=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},zy=new WeakSet,bT=async function(){if(!a(this,Jr)){g(this,Jr,!0);const e=[];for(const t of a(this,ft).values())e.push(t.enable());await Promise.all(e);for(const t of a(this,Qe).values())t.enable()}},Uy=new WeakSet,ST=function(){if(this.unselectAll(),a(this,Jr)){g(this,Jr,!1);for(const e of a(this,ft).values())e.disable();for(const e of a(this,Qe).values())e.disable()}},Zf=new WeakSet,$S=function(e){const t=a(this,ft).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},Hy=new WeakSet,AT=function(){let e=null;for(e of a(this,ge));return e},Ta=new WeakSet,Nd=function(){if(a(this,Qe).size===0)return!0;if(a(this,Qe).size===1)for(const e of a(this,Qe).values())return e.isEmpty();return!1},Jf=new WeakSet,VS=function(e){for(const t of a(this,ge))t.unselect();a(this,ge).clear();for(const t of e)t.isEmpty()||(a(this,ge).add(t),t.select());S(this,Rt,tn).call(this,{hasSelectedEditor:this.hasSelection})},F(Fc,"TRANSLATE_SMALL",1),F(Fc,"TRANSLATE_BIG",10);let sa=Fc;var vt,cs,Di,uu,us,Ln,hu,hs,mn,Ws,Pa,ds,ro,Ra,Ld,du,fv;const nn=class nn{constructor(e){p(this,Ra);p(this,du);p(this,vt,null);p(this,cs,!1);p(this,Di,null);p(this,uu,null);p(this,us,null);p(this,Ln,null);p(this,hu,!1);p(this,hs,null);p(this,mn,null);p(this,Ws,null);p(this,Pa,null);p(this,ds,!1);g(this,mn,e),g(this,ds,e._uiManager.useNewAltTextFlow),a(nn,ro)||g(nn,ro,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){nn._l10n??(nn._l10n=e)}async render(){const e=g(this,Di,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=g(this,uu,document.createElement("span"));e.append(t),a(this,ds)?(e.classList.add("new"),e.setAttribute("data-l10n-id",a(nn,ro).missing),t.setAttribute("data-l10n-id",a(nn,ro)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const i=a(this,mn)._uiManager._signal;e.addEventListener("contextmenu",ti,{signal:i}),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),a(this,mn)._uiManager.editAltText(a(this,mn)),a(this,ds)&&a(this,mn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,Ra,Ld)}})};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(g(this,hu,!0),s(r))},{signal:i}),await S(this,du,fv).call(this),e}finish(){a(this,Di)&&(a(this,Di).focus({focusVisible:a(this,hu)}),g(this,hu,!1))}isEmpty(){return a(this,ds)?a(this,vt)===null:!a(this,vt)&&!a(this,cs)}hasData(){return a(this,ds)?a(this,vt)!==null||!!a(this,Ws):this.isEmpty()}get guessedText(){return a(this,Ws)}async setGuessedText(e){a(this,vt)===null&&(g(this,Ws,e),g(this,Pa,await nn._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),S(this,du,fv).call(this))}toggleAltTextBadge(e=!1){var t;if(!a(this,ds)||a(this,vt)){(t=a(this,hs))==null||t.remove(),g(this,hs,null);return}if(!a(this,hs)){const i=g(this,hs,document.createElement("div"));i.className="noAltTextBadge",a(this,mn).div.append(i)}a(this,hs).classList.toggle("hidden",!e)}serialize(e){let t=a(this,vt);return!e&&a(this,Ws)===t&&(t=a(this,Pa)),{altText:t,decorative:a(this,cs),guessedText:a(this,Ws),textWithDisclaimer:a(this,Pa)}}get data(){return{altText:a(this,vt),decorative:a(this,cs)}}set data({altText:e,decorative:t,guessedText:i,textWithDisclaimer:s,cancel:r=!1}){i&&(g(this,Ws,i),g(this,Pa,s)),!(a(this,vt)===e&&a(this,cs)===t)&&(r||(g(this,vt,e),g(this,cs,t)),S(this,du,fv).call(this))}toggle(e=!1){a(this,Di)&&(!e&&a(this,Ln)&&(clearTimeout(a(this,Ln)),g(this,Ln,null)),a(this,Di).disabled=!e)}shown(){a(this,mn)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,Ra,Ld)}})}destroy(){var e,t;(e=a(this,Di))==null||e.remove(),g(this,Di,null),g(this,uu,null),g(this,us,null),(t=a(this,hs))==null||t.remove(),g(this,hs,null)}};vt=new WeakMap,cs=new WeakMap,Di=new WeakMap,uu=new WeakMap,us=new WeakMap,Ln=new WeakMap,hu=new WeakMap,hs=new WeakMap,mn=new WeakMap,Ws=new WeakMap,Pa=new WeakMap,ds=new WeakMap,ro=new WeakMap,Ra=new WeakSet,Ld=function(){return a(this,vt)&&"added"||a(this,vt)===null&&this.guessedText&&"review"||"missing"},du=new WeakSet,fv=async function(){var s,r,o;const e=a(this,Di);if(!e)return;if(a(this,ds)){if(e.classList.toggle("done",!!a(this,vt)),e.setAttribute("data-l10n-id",a(nn,ro)[a(this,Ra,Ld)]),(s=a(this,uu))==null||s.setAttribute("data-l10n-id",a(nn,ro)[`${a(this,Ra,Ld)}-label`]),!a(this,vt)){(r=a(this,us))==null||r.remove();return}}else{if(!a(this,vt)&&!a(this,cs)){e.classList.remove("done"),(o=a(this,us))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=a(this,us);if(!t){g(this,us,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${a(this,mn).id}`;const l=100,c=a(this,mn)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,Ln)),g(this,Ln,null)},{once:!0}),e.addEventListener("mouseenter",()=>{g(this,Ln,setTimeout(()=>{g(this,Ln,null),a(this,us).classList.add("show"),a(this,mn)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),e.addEventListener("mouseleave",()=>{var u;a(this,Ln)&&(clearTimeout(a(this,Ln)),g(this,Ln,null)),(u=a(this,us))==null||u.classList.remove("show")},{signal:c})}a(this,cs)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=a(this,vt)),t.parentNode||e.append(t);const i=a(this,mn).getElementForAltText();i==null||i.setAttribute("aria-describedby",t.id)},p(nn,ro,null),F(nn,"_l10n",null);let py=nn;var Nt,fi,Na,Re,ep,La,Mi,Da,Ma,Fa,tp,WS;class Um{constructor(e){p(this,tp);p(this,Nt,null);p(this,fi,null);p(this,Na,!1);p(this,Re,null);p(this,ep,null);p(this,La,null);p(this,Mi,null);p(this,Da,null);p(this,Ma,!1);p(this,Fa,null);g(this,Re,e)}renderForToolbar(){const e=g(this,fi,document.createElement("button"));return e.className="comment",S(this,tp,WS).call(this,e,!1)}renderForStandalone(){const e=g(this,Nt,document.createElement("button"));e.className="annotationCommentButton";const t=a(this,Re).commentButtonPosition;if(t){const{style:i}=e;i.insetInlineEnd=`calc(${100*(a(this,Re)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,i.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=a(this,Re).commentButtonColor;s&&(i.backgroundColor=s)}return S(this,tp,WS).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=a(this,Nt)??a(this,fi))==null||e.focus()},0)}onUpdatedColor(){if(!a(this,Nt))return;const e=a(this,Re).commentButtonColor;e&&(a(this,Nt).style.backgroundColor=e),a(this,Re)._uiManager.updatePopupColor(a(this,Re))}get commentButtonWidth(){var e;return(((e=a(this,Nt))==null?void 0:e.getBoundingClientRect().width)??0)/a(this,Re).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(a(this,Fa))return a(this,Fa);if(!a(this,Nt))return null;const{x:e,y:t,height:i}=a(this,Nt).getBoundingClientRect(),{x:s,y:r,width:o,height:l}=a(this,Re).parent.boundingClientRect;return[(e-s)/o,(t+i-r)/l]}set commentPopupPositionInLayer(e){g(this,Fa,e)}hasDefaultPopupPosition(){return a(this,Fa)===null}removeStandaloneCommentButton(){var e;(e=a(this,Nt))==null||e.remove(),g(this,Nt,null)}removeToolbarCommentButton(){var e;(e=a(this,fi))==null||e.remove(),g(this,fi,null)}setCommentButtonStates({selected:e,hasPopup:t}){a(this,Nt)&&(a(this,Nt).classList.toggle("selected",e),a(this,Nt).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let i,s;if(t)[i,s]=t;else{[i,s]=a(this,Re).commentButtonPosition;const{width:h,height:d,x:f,y:m}=a(this,Re);i=f+i*h,s=m+s*d}const r=a(this,Re).parent.boundingClientRect,{x:o,y:l,width:c,height:u}=r;a(this,Re)._uiManager.editComment(a(this,Re),o+i*c,l+s*u,{...e,parentDimensions:r})}finish(){a(this,fi)&&(a(this,fi).focus({focusVisible:a(this,Na)}),g(this,Na,!1))}isDeleted(){return a(this,Ma)||a(this,Mi)===""}isEmpty(){return a(this,Mi)===null}hasBeenEdited(){return this.isDeleted()||a(this,Mi)!==a(this,ep)}serialize(){return this.data}get data(){return{text:a(this,Mi),richText:a(this,La),date:a(this,Da),deleted:this.isDeleted()}}set data(e){if(e!==a(this,Mi)&&g(this,La,null),e===null){g(this,Mi,""),g(this,Ma,!0);return}g(this,Mi,e),g(this,Da,new Date),g(this,Ma,!1)}setInitialText(e,t=null){g(this,ep,e),this.data=e,g(this,Da,null),g(this,La,t)}shown(){}destroy(){var e,t;(e=a(this,fi))==null||e.remove(),g(this,fi,null),(t=a(this,Nt))==null||t.remove(),g(this,Nt,null),g(this,Mi,""),g(this,La,null),g(this,Da,null),g(this,Re,null),g(this,Na,!1),g(this,Ma,!1)}}Nt=new WeakMap,fi=new WeakMap,Na=new WeakMap,Re=new WeakMap,ep=new WeakMap,La=new WeakMap,Mi=new WeakMap,Da=new WeakMap,Ma=new WeakMap,Fa=new WeakMap,tp=new WeakSet,WS=function(e,t){if(!a(this,Re)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[a(this,Re)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const i=a(this,Re)._uiManager._signal;if(!(i instanceof AbortSignal)||i.aborted)return e;e.addEventListener("contextmenu",ti,{signal:i}),t&&(e.addEventListener("focusin",r=>{a(this,Re)._focusEventsAllowed=!1,Ge(r)},{capture:!0,signal:i}),e.addEventListener("focusout",r=>{a(this,Re)._focusEventsAllowed=!0,Ge(r)},{capture:!0,signal:i})),e.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:i});const s=r=>{r.preventDefault(),e===a(this,fi)?this.edit():a(this,Re).toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:i}),e.addEventListener("keydown",r=>{r.target===e&&r.key==="Enter"&&(g(this,Na,!0),s(r))},{signal:i}),e.addEventListener("pointerenter",()=>{a(this,Re).toggleComment(!1,!0)},{signal:i}),e.addEventListener("pointerleave",()=>{a(this,Re).toggleComment(!1,!1)},{signal:i}),e};var fu,Ia,np,ip,sp,rp,op,Xs,Oa,Gs,Ba,Ys,$y,xT,Vy,ET,Wy,CT;const Cx=class Cx{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:i=null,onPinchStart:s=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){p(this,$y);p(this,Vy);p(this,Wy);p(this,fu,void 0);p(this,Ia,!1);p(this,np,null);p(this,ip,void 0);p(this,sp,void 0);p(this,rp,void 0);p(this,op,void 0);p(this,Xs,null);p(this,Oa,void 0);p(this,Gs,null);p(this,Ba,void 0);p(this,Ys,null);g(this,fu,e),g(this,np,i),g(this,ip,t),g(this,sp,s),g(this,rp,r),g(this,op,o),g(this,Ba,new AbortController),g(this,Oa,AbortSignal.any([l,a(this,Ba).signal])),e.addEventListener("touchstart",S(this,$y,xT).bind(this),{passive:!1,signal:a(this,Oa)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Zi.pixelRatio}destroy(){var e,t;(e=a(this,Ba))==null||e.abort(),g(this,Ba,null),(t=a(this,Xs))==null||t.abort(),g(this,Xs,null)}};fu=new WeakMap,Ia=new WeakMap,np=new WeakMap,ip=new WeakMap,sp=new WeakMap,rp=new WeakMap,op=new WeakMap,Xs=new WeakMap,Oa=new WeakMap,Gs=new WeakMap,Ba=new WeakMap,Ys=new WeakMap,$y=new WeakSet,xT=function(e){var s,r,o;if((s=a(this,ip))!=null&&s.call(this))return;if(e.touches.length===1){if(a(this,Xs))return;const l=g(this,Xs,new AbortController),c=AbortSignal.any([a(this,Oa),l.signal]),u=a(this,fu),h={capture:!0,signal:c,passive:!1},d=f=>{var m;f.pointerType==="touch"&&((m=a(this,Xs))==null||m.abort(),g(this,Xs,null))};u.addEventListener("pointerdown",f=>{f.pointerType==="touch"&&(Ge(f),d(f))},h),u.addEventListener("pointerup",d,h),u.addEventListener("pointercancel",d,h);return}if(!a(this,Ys)){g(this,Ys,new AbortController);const l=AbortSignal.any([a(this,Oa),a(this,Ys).signal]),c=a(this,fu),u={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",S(this,Vy,ET).bind(this),u);const h=S(this,Wy,CT).bind(this);c.addEventListener("touchend",h,u),c.addEventListener("touchcancel",h,u),u.capture=!0,c.addEventListener("pointerdown",Ge,u),c.addEventListener("pointermove",Ge,u),c.addEventListener("pointercancel",Ge,u),c.addEventListener("pointerup",Ge,u),(r=a(this,sp))==null||r.call(this)}if(Ge(e),e.touches.length!==2||(o=a(this,np))!=null&&o.call(this)){g(this,Gs,null);return}let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]),g(this,Gs,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:i.screenX,touch1Y:i.screenY})},Vy=new WeakSet,ET=function(e){var E;if(!a(this,Gs)||e.touches.length!==2)return;Ge(e);let[t,i]=e.touches;t.identifier>i.identifier&&([t,i]=[i,t]);const{screenX:s,screenY:r}=t,{screenX:o,screenY:l}=i,c=a(this,Gs),{touch0X:u,touch0Y:h,touch1X:d,touch1Y:f}=c,m=d-u,y=f-h,w=o-s,x=l-r,v=Math.hypot(w,x)||1,b=Math.hypot(m,y)||1;if(!a(this,Ia)&&Math.abs(b-v)<=Cx.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=s,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,Ia)){g(this,Ia,!0);return}const A=[(s+o)/2,(r+l)/2];(E=a(this,rp))==null||E.call(this,A,b,v)},Wy=new WeakSet,CT=function(e){var t;e.touches.length>=2||(a(this,Ys)&&(a(this,Ys).abort(),g(this,Ys,null),(t=a(this,op))==null||t.call(this)),a(this,Gs)&&(Ge(e),g(this,Gs,null),g(this,Ia,!1)))};let kf=Cx;var ja,Fi,Be,Ce,qs,pu,oo,ap,Lt,za,Ks,fs,ao,lp,Ua,Dn,cp,Ha,Qs,ps,gu,mu,pi,$a,up,Xy,hp,XS,dp,GS,vu,pv,Gy,_T,Yy,kT,fp,YS,yu,gv,pp,qS,qy,TT,Ky,PT,Qy,RT,gp,KS,Zy,NT,mp,QS,Jy,LT,e0,DT,t0,MT,vp,ZS,Va,Dd;const te=class te{constructor(e){p(this,hp);p(this,vu);p(this,Gy);p(this,Yy);p(this,fp);p(this,yu);p(this,pp);p(this,qy);p(this,Ky);p(this,Qy);p(this,gp);p(this,Zy);p(this,mp);p(this,Jy);p(this,e0);p(this,t0);p(this,vp);p(this,Va);p(this,ja,null);p(this,Fi,null);p(this,Be,null);p(this,Ce,null);p(this,qs,null);p(this,pu,!1);p(this,oo,null);p(this,ap,"");p(this,Lt,null);p(this,za,null);p(this,Ks,null);p(this,fs,null);p(this,ao,null);p(this,lp,"");p(this,Ua,!1);p(this,Dn,null);p(this,cp,!1);p(this,Ha,!1);p(this,Qs,!1);p(this,ps,null);p(this,gu,0);p(this,mu,0);p(this,pi,null);p(this,$a,null);F(this,"isSelected",!1);F(this,"_isCopy",!1);F(this,"_editToolbar",null);F(this,"_initialOptions",Object.create(null));F(this,"_initialData",null);F(this,"_isVisible",!0);F(this,"_uiManager",null);F(this,"_focusEventsAllowed",!0);p(this,up,!1);p(this,Xy,te._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,s],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=e.x/l,this.y=e.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=te.prototype._resizeWithKeyboard,t=sa.TRANSLATE_SMALL,i=sa.TRANSLATE_BIG;return ie(this,"_resizerKeyboardManager",new gm([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-i,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[i,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-i]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,i]}],[["Escape","mac+Escape"],te.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return ie(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new BL({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(te._l10n??(te._l10n=e),te._l10nResizer||(te._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),te._borderLineWidth!==-1)return;const i=getComputedStyle(document.documentElement);te._borderLineWidth=parseFloat(i.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Te("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,up)}set _isDraggable(e){var t;g(this,up,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,Xy)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(S(this,Va,Dd).call(this),(t=a(this,fs))==null||t.remove(),g(this,fs,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(a(this,Ua)?g(this,Ua,!1):this.parent.setSelected(this))}focusout(e){var i;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(i=this.parent)!=null&&i.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,i,s){const[r,o]=this.parentDimensions;[i,s]=this.screenToPageTranslation(i,s),this.x=(e+i)/r,this.y=(t+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[i,s]=this.parentDimensions;this.setAt(e*i,t*s,this.width*i,this.height*s),this._onTranslated()}translate(e,t){S(this,hp,XS).call(this,this.parentDimensions,e,t)}translateInPage(e,t){a(this,Dn)||g(this,Dn,[this.x,this.y,this.width,this.height]),S(this,hp,XS).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){a(this,Dn)||g(this,Dn,[this.x,this.y,this.width,this.height]);const{div:i,parentDimensions:[s,r]}=this;if(this.x+=e/s,this.y+=t/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:d,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,d,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,u]=this.getBaseTranslation();o+=c,l+=u;const{style:h}=i;h.left=`${(100*o).toFixed(2)}%`,h.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),i.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!a(this,Dn)&&(a(this,Dn)[0]!==this.x||a(this,Dn)[1]!==this.y)}get _hasBeenResized(){return!!a(this,Dn)&&(a(this,Dn)[2]!==this.width||a(this,Dn)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:i}=te,s=i/e,r=i/t;switch(this.rotation){case 90:return[-s,r];case 180:return[s,r];case 270:return[s,-r];default:return[-s,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[i,s]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=i,c*=s,r*=i,o*=s,this._mustFixPosition)switch(e){case 0:r=Qt(r,0,i-l),o=Qt(o,0,s-c);break;case 90:r=Qt(r,0,i-c),o=Qt(o,l,s);break;case 180:r=Qt(r,l,i),o=Qt(o,c,s);break;case 270:r=Qt(r,c,i),o=Qt(o,0,s-l);break}this.x=r/=i,this.y=o/=s;const[u,h]=this.getBaseTranslation();r+=u,o+=h,t.left=`${(100*r).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var i;return S(i=te,dp,GS).call(i,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var i;return S(i=te,dp,GS).call(i,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,i]}=this;return[t*e,i*e]}setDims(){const{div:{style:e},width:t,height:i}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*i).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=a(this,Be))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||a(this,Ha))return this._editToolbar;this._editToolbar=new FS(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,i]of e)await this._editToolbar.addButton(t,i);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=a(this,Be))==null||t.destroy()}addContainer(e){var i;const t=(i=this._editToolbar)==null?void 0:i.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return a(this,Be)||(py.initialize(te._l10n),g(this,Be,new py(this)),a(this,ja)&&(a(this,Be).data=a(this,ja),g(this,ja,null))),a(this,Be)}get altTextData(){var e;return(e=a(this,Be))==null?void 0:e.data}set altTextData(e){a(this,Be)&&(a(this,Be).data=e)}get guessedAltText(){var e;return(e=a(this,Be))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=a(this,Be))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=a(this,Be))==null?void 0:t.serialize(e)}hasAltText(){return!!a(this,Be)&&!a(this,Be).isEmpty()}hasAltTextData(){var e;return((e=a(this,Be))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=a(this,Ce))==null||e.focusButton()}addCommentButton(){return a(this,Ce)||g(this,Ce,new Um(this))}addStandaloneCommentButton(){if(a(this,qs)){this._uiManager.isEditingMode()&&a(this,qs).classList.remove("hidden");return}this.hasComment&&(g(this,qs,a(this,Ce).renderForStandalone()),this.div.append(a(this,qs)))}removeStandaloneCommentButton(){a(this,Ce).removeStandaloneCommentButton(),g(this,qs,null)}hideStandaloneCommentButton(){var e;(e=a(this,qs))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:i,deleted:s}}=a(this,Ce);return{text:t,richText:e,date:i,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){a(this,Ce)||g(this,Ce,new Um(this)),a(this,Ce).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:i}){if(!t||(a(this,Ce)||g(this,Ce,new Um(this)),a(this,Ce).setInitialText(e,i),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var e;return(e=a(this,Ce))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=a(this,Ce))==null?void 0:e.isDeleted()}get hasComment(){return!!a(this,Ce)&&!a(this,Ce).isEmpty()&&!a(this,Ce).isDeleted()}async editComment(e){a(this,Ce)||g(this,Ce,new Um(this)),a(this,Ce).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){a(this,Ce).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[r]=this.pageDimensions,[o]=this.pageTranslation,l=o+r+1,c=s-100,u=l+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[l,c,u,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){a(this,Ce).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=a(this,pu)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),S(this,mp,QS).call(this);const[t,i]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*i/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/i).toFixed(2)}%`);const[s,r]=this.getInitialTranslation();return this.translate(s,r),hT(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,$a)||g(this,$a,new kf({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:S(this,qy,TT).bind(this),onPinching:S(this,Ky,PT).bind(this),onPinchEnd:S(this,Qy,RT).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=kt.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(g(this,Ua,!0),this._isDraggable){S(this,Zy,NT).call(this,e);return}S(this,gp,KS).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,ps)&&clearTimeout(a(this,ps)),g(this,ps,setTimeout(()=>{var e;g(this,ps,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,i){e.changeParent(this),this.x=t,this.y=i,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,i=this.rotation){const s=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,u=e/s,h=t/s,d=this.x*r,f=this.y*o,m=this.width*r,y=this.height*o;switch(i){case 0:return[d+u+l,o-f-h-y+c,d+u+m+l,o-f-h+c];case 90:return[d+h+l,o-f+u+c,d+h+y+l,o-f+u+m+c];case 180:return[d-u-m+l,o-f+h+c,d-u+l,o-f+h+y+c];case 270:return[d-h-y+l,o-f-u-m+c,d-h+l,o-f-u+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[i,s,r,o]=e,l=r-i,c=o-s;switch(this.rotation){case 0:return[i,t-o,l,c];case 90:return[i,t-s,c,l];case 180:return[r,t-s,l,c];case 270:return[r,t-o,c,l];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&te._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=a(this,Ce))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:i,opacity:s,deleted:r,richText:o},uid:l,pageIndex:c,creationDate:u,modificationDate:h}=this;return{id:l,pageIndex:c,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:u,modificationDate:i||h,popupRef:!r,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),g(this,Ha,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),g(this,Ha,!1),!0):!1}isInEditMode(){return a(this,Ha)}shouldGetKeyboardEvents(){return a(this,Qs)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:i,right:s}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return t<o&&s>0&&e<r&&i>0}rebuild(){S(this,mp,QS).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var i;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((i=this._initialData)==null?void 0:i.popupRef)||""}}static async deserialize(e,t,i){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:i,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,g(s,ja,e.accessibilityData),s._isCopy=e.isCopy||!1;const[r,o]=s.pageDimensions,[l,c,u,h]=s.getRectInCurrentCoords(e.rect,o);return s.x=l/r,s.y=c/o,s.width=u/r,s.height=h/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=a(this,ao))==null||e.abort(),g(this,ao,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,ps)&&(clearTimeout(a(this,ps)),g(this,ps,null)),S(this,Va,Dd).call(this),this.removeEditToolbar(),a(this,pi)){for(const i of a(this,pi).values())clearTimeout(i);g(this,pi,null)}this.parent=null,(t=a(this,$a))==null||t.destroy(),g(this,$a,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(S(this,Gy,_T).call(this),a(this,Lt).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[i,s,r,o]=this.getPDFRect();return[te._round(i+(r-i)*e),te._round(s+(o-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return a(this,Ce).commentPopupPositionInLayer}set commentPopupPosition(e){a(this,Ce).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return a(this,Ce).hasDefaultPopupPosition()}get commentButtonWidth(){return a(this,Ce).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){a(this,Ce).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),g(this,Ks,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=a(this,Lt).children;if(!a(this,Fi)){g(this,Fi,Array.from(t));const o=S(this,Jy,LT).bind(this),l=S(this,e0,DT).bind(this),c=this._uiManager._signal;for(const u of a(this,Fi)){const h=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",o,{signal:c}),u.addEventListener("blur",l,{signal:c}),u.addEventListener("focus",S(this,t0,MT).bind(this,h),{signal:c}),u.setAttribute("data-l10n-id",te._l10nResizer[h])}}const i=a(this,Fi)[0];let s=0;for(const o of t){if(o===i)break;s++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,Fi).length/4);if(r!==s){if(r<s)for(let l=0;l<s-r;l++)a(this,Lt).append(a(this,Lt).firstChild);else if(r>s)for(let l=0;l<r-s;l++)a(this,Lt).firstChild.before(a(this,Lt).lastChild);let o=0;for(const l of t){const u=a(this,Fi)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",te._l10nResizer[u])}}S(this,vp,ZS).call(this,0),g(this,Qs,!0),a(this,Lt).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){a(this,Qs)&&S(this,pp,qS).call(this,a(this,lp),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){S(this,Va,Dd).call(this),this.div.focus()}select(){var e,t,i;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,r;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(t=this._editToolbar)==null||t.show(),(i=a(this,Be))==null||i.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,i,s,r;this.isSelected&&(this.isSelected=!1,(e=a(this,Lt))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(i=this.div)!=null&&i.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(r=a(this,Be))==null||r.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,cp)}set isEditing(e){g(this,cp,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){a(this,pi)||g(this,pi,new Map);const{action:i}=e;let s=a(this,pi).get(i);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),a(this,pi).delete(i),a(this,pi).size===0&&g(this,pi,null)},te._telemetryTimeout),a(this,pi).set(i,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),g(this,pu,!1)}disable(){this.div&&(this.div.tabIndex=-1),g(this,pu,!0)}updateFakeAnnotationElement(e){if(!a(this,fs)&&!this.deleted){g(this,fs,e.addFakeAnnotation(this));return}if(this.deleted){a(this,fs).remove(),g(this,fs,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&a(this,fs).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const i=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),i.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};ja=new WeakMap,Fi=new WeakMap,Be=new WeakMap,Ce=new WeakMap,qs=new WeakMap,pu=new WeakMap,oo=new WeakMap,ap=new WeakMap,Lt=new WeakMap,za=new WeakMap,Ks=new WeakMap,fs=new WeakMap,ao=new WeakMap,lp=new WeakMap,Ua=new WeakMap,Dn=new WeakMap,cp=new WeakMap,Ha=new WeakMap,Qs=new WeakMap,ps=new WeakMap,gu=new WeakMap,mu=new WeakMap,pi=new WeakMap,$a=new WeakMap,up=new WeakMap,Xy=new WeakMap,hp=new WeakSet,XS=function([e,t],i,s){[i,s]=this.screenToPageTranslation(i,s),this.x+=i/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},dp=new WeakSet,GS=function(e,t,i){switch(i){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},vu=new WeakSet,pv=function(e){switch(e){case 90:{const[t,i]=this.pageDimensions;return[0,-t/i,i/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,i]=this.pageDimensions;return[0,t/i,-i/t,0]}default:return[1,0,0,1]}},Gy=new WeakSet,_T=function(){if(a(this,Lt))return;g(this,Lt,document.createElement("div")),a(this,Lt).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const i of e){const s=document.createElement("div");a(this,Lt).append(s),s.classList.add("resizer",i),s.setAttribute("data-resizer-name",i),s.addEventListener("pointerdown",S(this,Yy,kT).bind(this,i),{signal:t}),s.addEventListener("contextmenu",ti,{signal:t}),s.tabIndex=-1}this.div.prepend(a(this,Lt))},Yy=new WeakSet,kT=function(e,t){var h;t.preventDefault();const{isMac:i}=kt.platform;if(t.button!==0||t.ctrlKey&&i)return;(h=a(this,Be))==null||h.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,g(this,za,[t.screenX,t.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",S(this,pp,qS).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Ge,{passive:!1,signal:o}),window.addEventListener("contextmenu",ti,{signal:o}),g(this,Ks,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var d;r.abort(),this.parent.togglePointerEvents(!0),(d=a(this,Be))==null||d.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=l,this.div.style.cursor=c,S(this,yu,gv).call(this)};window.addEventListener("pointerup",u,{signal:o}),window.addEventListener("blur",u,{signal:o})},fp=new WeakSet,YS=function(e,t,i,s){this.width=i,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},yu=new WeakSet,gv=function(){if(!a(this,Ks))return;const{savedX:e,savedY:t,savedWidth:i,savedHeight:s}=a(this,Ks);g(this,Ks,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===e&&o===t&&l===i&&c===s||this.addCommands({cmd:S(this,fp,YS).bind(this,r,o,l,c),undo:S(this,fp,YS).bind(this,e,t,i,s),mustExec:!0})},pp=new WeakSet,qS=function(e,t){const[i,s]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,u=te.MIN_SIZE/i,h=te.MIN_SIZE/s,d=S(this,vu,pv).call(this,this.rotation),f=(j,B)=>[d[0]*j+d[2]*B,d[1]*j+d[3]*B],m=S(this,vu,pv).call(this,360-this.rotation),y=(j,B)=>[m[0]*j+m[2]*B,m[1]*j+m[3]*B];let w,x,v=!1,b=!1;switch(e){case"topLeft":v=!0,w=(j,B)=>[0,0],x=(j,B)=>[j,B];break;case"topMiddle":w=(j,B)=>[j/2,0],x=(j,B)=>[j/2,B];break;case"topRight":v=!0,w=(j,B)=>[j,0],x=(j,B)=>[0,B];break;case"middleRight":b=!0,w=(j,B)=>[j,B/2],x=(j,B)=>[0,B/2];break;case"bottomRight":v=!0,w=(j,B)=>[j,B],x=(j,B)=>[0,0];break;case"bottomMiddle":w=(j,B)=>[j/2,B],x=(j,B)=>[j/2,0];break;case"bottomLeft":v=!0,w=(j,B)=>[0,B],x=(j,B)=>[j,0];break;case"middleLeft":b=!0,w=(j,B)=>[0,B/2],x=(j,B)=>[j,B/2];break}const A=w(l,c),E=x(l,c);let _=f(...E);const k=te._round(r+_[0]),T=te._round(o+_[1]);let P=1,N=1,R,L;if(t.fromKeyboard)({deltaX:R,deltaY:L}=t);else{const{screenX:j,screenY:B}=t,[D,z]=a(this,za);[R,L]=this.screenToPageTranslation(j-D,B-z),a(this,za)[0]=j,a(this,za)[1]=B}if([R,L]=y(R/i,L/s),v){const j=Math.hypot(l,c);P=N=Math.max(Math.min(Math.hypot(E[0]-A[0]-R,E[1]-A[1]-L)/j,1/l,1/c),u/l,h/c)}else b?P=Qt(Math.abs(E[0]-A[0]-R),u,1)/l:N=Qt(Math.abs(E[1]-A[1]-L),h,1)/c;const O=te._round(l*P),$=te._round(c*N);_=f(...x(O,$));const U=k-_[0],Q=T-_[1];a(this,Dn)||g(this,Dn,[this.x,this.y,this.width,this.height]),this.width=O,this.height=$,this.x=U,this.y=Q,this.setDims(),this.fixAndSetPosition(),this._onResizing()},qy=new WeakSet,TT=function(){var e;g(this,Ks,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=a(this,Be))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},Ky=new WeakSet,PT=function(e,t,i){let r=.7*(i/t)+1-.7;if(r===1)return;const o=S(this,vu,pv).call(this,this.rotation),l=(k,T)=>[o[0]*k+o[2]*T,o[1]*k+o[3]*T],[c,u]=this.parentDimensions,h=this.x,d=this.y,f=this.width,m=this.height,y=te.MIN_SIZE/c,w=te.MIN_SIZE/u;r=Math.max(Math.min(r,1/f,1/m),y/f,w/m);const x=te._round(f*r),v=te._round(m*r);if(x===f&&v===m)return;a(this,Dn)||g(this,Dn,[h,d,f,m]);const b=l(f/2,m/2),A=te._round(h+b[0]),E=te._round(d+b[1]),_=l(x/2,v/2);this.x=A-_[0],this.y=E-_[1],this.width=x,this.height=v,this.setDims(),this.fixAndSetPosition(),this._onResizing()},Qy=new WeakSet,RT=function(){var e;(e=a(this,Be))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),S(this,yu,gv).call(this)},gp=new WeakSet,KS=function(e){const{isMac:t}=kt.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},Zy=new WeakSet,NT=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let i=!1;const s=new AbortController,r=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:r},l=u=>{s.abort(),g(this,oo,null),g(this,Ua,!1),this._uiManager.endDragSession()||S(this,gp,KS).call(this,u),i&&this._onStopDragging()};t&&(g(this,gu,e.clientX),g(this,mu,e.clientY),g(this,oo,e.pointerId),g(this,ap,e.pointerType),window.addEventListener("pointermove",u=>{i||(i=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:h,clientY:d,pointerId:f}=u;if(f!==a(this,oo)){Ge(u);return}const[m,y]=this.screenToPageTranslation(h-a(this,gu),d-a(this,mu));g(this,gu,h),g(this,mu,d),this._uiManager.dragSelectedEditors(m,y)},o),window.addEventListener("touchmove",Ge,o),window.addEventListener("pointerdown",u=>{u.pointerType===a(this,ap)&&(a(this,$a)||u.isPrimary)&&l(u),Ge(u)},o));const c=u=>{if(!a(this,oo)||a(this,oo)===u.pointerId){l(u);return}Ge(u)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},mp=new WeakSet,QS=function(){if(a(this,ao)||!this.div)return;g(this,ao,new AbortController);const e=this._uiManager.combinedSignal(a(this,ao));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},Jy=new WeakSet,LT=function(e){te._resizerKeyboardManager.exec(this,e)},e0=new WeakSet,DT=function(e){var t;a(this,Qs)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==a(this,Lt)&&S(this,Va,Dd).call(this)},t0=new WeakSet,MT=function(e){g(this,lp,a(this,Qs)?e:"")},vp=new WeakSet,ZS=function(e){if(a(this,Fi))for(const t of a(this,Fi))t.tabIndex=e},Va=new WeakSet,Dd=function(){g(this,Qs,!1),S(this,vp,ZS).call(this,-1),S(this,yu,gv).call(this)},p(te,dp),F(te,"_l10n",null),F(te,"_l10nResizer",null),F(te,"_borderLineWidth",-1),F(te,"_colorManager",new BS),F(te,"_zIndex",1),F(te,"_telemetryTimeout",1e3);let De=te;class BL extends De{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const qE=3285377520,ri=4294901760,ns=65535;class FT{constructor(e){this.h1=e?e&4294967295:qE,this.h2=e?e&4294967295:qE}update(e){let t,i;if(typeof e=="string"){t=new Uint8Array(e.length*2),i=0;for(let w=0,x=e.length;w<x;w++){const v=e.charCodeAt(w);v<=255?t[i++]=v:(t[i++]=v>>>8,t[i++]=v&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),i=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=i>>2,r=i-s*4,o=new Uint32Array(t.buffer,0,s);let l=0,c=0,u=this.h1,h=this.h2;const d=3432918353,f=461845907,m=d&ns,y=f&ns;for(let w=0;w<s;w++)w&1?(l=o[w],l=l*d&ri|l*m&ns,l=l<<15|l>>>17,l=l*f&ri|l*y&ns,u^=l,u=u<<13|u>>>19,u=u*5+3864292196):(c=o[w],c=c*d&ri|c*m&ns,c=c<<15|c>>>17,c=c*f&ri|c*y&ns,h^=c,h=h<<13|h>>>19,h=h*5+3864292196);switch(l=0,r){case 3:l^=t[s*4+2]<<16;case 2:l^=t[s*4+1]<<8;case 1:l^=t[s*4],l=l*d&ri|l*m&ns,l=l<<15|l>>>17,l=l*f&ri|l*y&ns,s&1?u^=l:h^=l}this.h1=u,this.h2=h}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&ri|e*36045&ns,t=t*4283543511&ri|((t<<16|e>>>16)*2950163797&ri)>>>16,e^=t>>>1,e=e*444984403&ri|e*60499&ns,t=t*3301882366&ri|((t<<16|e>>>16)*3120437893&ri)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const JS=Object.freeze({map:null,hash:"",transfer:void 0});var Wa,Xa,Zs,Dt,n0,IT;class cx{constructor(){p(this,n0);p(this,Wa,!1);p(this,Xa,null);p(this,Zs,null);p(this,Dt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const i=a(this,Dt).get(e);return i===void 0?t:Object.assign(t,i)}getRawValue(e){return a(this,Dt).get(e)}remove(e){const t=a(this,Dt).get(e);if(t!==void 0&&(t instanceof De&&a(this,Zs).delete(t.annotationElementId),a(this,Dt).delete(e),a(this,Dt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const i of a(this,Dt).values())if(i instanceof De)return;this.onAnnotationEditor(null)}}setValue(e,t){const i=a(this,Dt).get(e);let s=!1;if(i!==void 0)for(const[r,o]of Object.entries(t))i[r]!==o&&(s=!0,i[r]=o);else s=!0,a(this,Dt).set(e,t);s&&S(this,n0,IT).call(this),t instanceof De&&((a(this,Zs)||g(this,Zs,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return a(this,Dt).has(e)}get size(){return a(this,Dt).size}resetModified(){a(this,Wa)&&(g(this,Wa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new OT(this)}get serializable(){if(a(this,Dt).size===0)return JS;const e=new Map,t=new FT,i=[],s=Object.create(null);let r=!1;for(const[o,l]of a(this,Dt)){const c=l instanceof De?l.serialize(!1,s):l;c&&(e.set(o,c),t.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of e.values())o.bitmap&&i.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:i}:JS}get editorStats(){let e=null;const t=new Map;let i=0,s=0;for(const r of a(this,Dt).values()){if(!(r instanceof De)){r.popup&&(r.popup.deleted?s+=1:i+=1);continue}r.isCommentDeleted?s+=1:r.hasEditedComment&&(i+=1);const o=r.telemetryFinalData;if(!o)continue;const{type:l}=o;t.has(l)||t.set(l,Object.getPrototypeOf(r).constructor),e||(e=Object.create(null));const c=e[l]||(e[l]=new Map);for(const[u,h]of Object.entries(o)){if(u==="type")continue;let d=c.get(u);d||(d=new Map,c.set(u,d));const f=d.get(h)??0;d.set(h,f+1)}}if((s>0||i>0)&&(e||(e=Object.create(null)),e.comments={deleted:s,edited:i}),!e)return null;for(const[r,o]of t)e[r]=o.computeTelemetryFinalData(e[r]);return e}resetModifiedIds(){g(this,Xa,null)}updateEditor(e,t){var s;const i=(s=a(this,Zs))==null?void 0:s.get(e);return i?(i.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=a(this,Zs))==null?void 0:t.get(e))||null}get modifiedIds(){if(a(this,Xa))return a(this,Xa);const e=[];if(a(this,Zs))for(const t of a(this,Zs).values())t.serialize()&&e.push(t.annotationElementId);return g(this,Xa,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return a(this,Dt).entries()}}Wa=new WeakMap,Xa=new WeakMap,Zs=new WeakMap,Dt=new WeakMap,n0=new WeakSet,IT=function(){a(this,Wa)||(g(this,Wa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var yp;class OT extends cx{constructor(t){super();p(this,yp,void 0);const{map:i,hash:s,transfer:r}=t.serializable,o=structuredClone(i,r?{transfer:r}:null);g(this,yp,{map:o,hash:s,transfer:r})}get print(){Te("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,yp)}get modifiedIds(){return ie(this,"modifiedIds",{ids:new Set,hash:""})}}yp=new WeakMap;var wu;class jL{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){p(this,wu,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),a(this,wu).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:i}){if(!(!e||a(this,wu).has(e.loadedName))){if(ue(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:r,style:o}=e,l=new FontFace(s,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,wu).add(s),i==null||i(e)}catch{ee(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}Te("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const i=e.createNativeFontFace();if(i){this.addNativeFontFace(i);try{await i.loaded}catch(s){throw ee(`Failed to load font '${i.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(i=>{const s=this._queueLoadingCallback(i);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ie(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return ie(this,"isSyncFontLoadingSupported",an||kt.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(ue(!s.done,"completeRequest() cannot be called twice."),s.done=!0;i.length>0&&i[0].done;){const r=i.shift();setTimeout(r.callback,0)}}const{loadingRequests:i}=this,s={done:!1,complete:t,callback:e};return i.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ie(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function i(E,_){return E.charCodeAt(_)<<24|E.charCodeAt(_+1)<<16|E.charCodeAt(_+2)<<8|E.charCodeAt(_+3)&255}function s(E,_,k,T){const P=E.substring(0,_),N=E.substring(_+k);return P+T+N}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let u=0;function h(E,_){if(++u>30){ee("Load test font never loaded."),_();return}if(c.font="30px "+E,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){_();return}setTimeout(h.bind(null,E,_))}const d=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=s(f,976,d.length,d);const y=16,w=1482184792;let x=i(f,y);for(r=0,o=d.length-3;r<o;r+=4)x=x-w+i(d,r)|0;r<d.length&&(x=x-w+i(d+"XXX",r)|0),f=s(f,y,4,_L(x));const v=`url(data:font/opentype;base64,${btoa(f)});`,b=`@font-face {font-family:"${d}";src:${v}}`;this.insertRule(b);const A=this._document.createElement("div");A.style.visibility="hidden",A.style.width=A.style.height="10px",A.style.position="absolute",A.style.top=A.style.left="0px";for(const E of[e.loadedName,d]){const _=this._document.createElement("span");_.textContent="Hi",_.style.fontFamily=E,A.append(_)}this._document.body.append(A),h(d,()=>{A.remove(),t.complete()})}}wu=new WeakMap;var be;class zL{constructor(e,t=null,i,s){p(this,be,void 0);this.compiledGlyphs=Object.create(null),g(this,be,e),this._inspectFont=t,i&&Object.assign(this,i),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var i;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${Jk(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(i=this._inspectFont)==null||i.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const i=this.loadedName+"_path_"+t;let s;try{s=e.get(i)}catch(o){ee(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(s||"");return this.fontExtraProperties||e.delete(i),this.compiledGlyphs[t]=r}get black(){return a(this,be).black}get bold(){return a(this,be).bold}get disableFontFace(){return a(this,be).disableFontFace??!1}get fontExtraProperties(){return a(this,be).fontExtraProperties??!1}get isInvalidPDFjsFont(){return a(this,be).isInvalidPDFjsFont}get isType3Font(){return a(this,be).isType3Font}get italic(){return a(this,be).italic}get missingFile(){return a(this,be).missingFile}get remeasure(){return a(this,be).remeasure}get vertical(){return a(this,be).vertical}get ascent(){return a(this,be).ascent}get defaultWidth(){return a(this,be).defaultWidth}get descent(){return a(this,be).descent}get bbox(){return a(this,be).bbox}get fontMatrix(){return a(this,be).fontMatrix}get fallbackName(){return a(this,be).fallbackName}get loadedName(){return a(this,be).loadedName}get mimetype(){return a(this,be).mimetype}get name(){return a(this,be).name}get data(){return a(this,be).data}clearData(){a(this,be).clearData()}get cssFontInfo(){return a(this,be).cssFontInfo}get systemFontInfo(){return a(this,be).systemFontInfo}get defaultVMetrics(){return a(this,be).defaultVMetrics}}be=new WeakMap;function UL(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(an)return n;const e=URL.parse(n,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function HL(n){if(an&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return dm(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Hm(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const e1=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,$L=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",BT=RL.bind(null,e1,$L);var Js,i0;class VL{constructor(){p(this,Js,new Map);p(this,i0,Promise.resolve())}postMessage(e,t){const i={data:structuredClone(e,t?{transfer:t}:null)};a(this,i0).then(()=>{for(const[s]of a(this,Js))s.call(this,i)})}addEventListener(e,t,i=null){let s=null;if((i==null?void 0:i.signal)instanceof AbortSignal){const{signal:r}=i;if(r.aborted){ee("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,Js).set(t,s)}removeEventListener(e,t){const i=a(this,Js).get(t);i==null||i(),a(this,Js).delete(t)}terminate(){for(const[,e]of a(this,Js))e==null||e();a(this,Js).clear()}}Js=new WeakMap,i0=new WeakMap;const $m={DATA:1,ERROR:2},at={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function KE(){}function pn(n){if(n instanceof Dr||n instanceof dy||n instanceof HE||n instanceof Ef||n instanceof Pb)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||Te('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Dr(n.message);case"InvalidPDFException":return new dy(n.message);case"PasswordException":return new HE(n.message,n.code);case"ResponseException":return new Ef(n.message,n.status,n.missing);case"UnknownErrorException":return new Pb(n.message,n.details)}return new Pb(n.message,n.toString())}var bu,s0,jT,r0,zT,o0,UT,Su,mv;class Md{constructor(e,t,i){p(this,s0);p(this,r0);p(this,o0);p(this,Su);p(this,bu,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),i.addEventListener("message",S(this,s0,jT).bind(this),{signal:a(this,bu).signal})}on(e,t){const i=this.actionHandler;if(i[e])throw new Error(`There is already an actionName called "${e}"`);i[e]=t}send(e,t,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},i)}sendWithPromise(e,t,i){const s=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[s]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},i)}catch(o){r.reject(o)}return r.promise}sendWithStream(e,t,i,s){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:u=>{const h=Promise.withResolvers();return this.streamControllers[r]={controller:u,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:e,streamId:r,data:t,desiredSize:u.desiredSize},s),h.promise},pull:u=>{const h=Promise.withResolvers();return this.streamControllers[r].pullCall=h,c.postMessage({sourceName:o,targetName:l,stream:at.PULL,streamId:r,desiredSize:u.desiredSize}),h.promise},cancel:u=>{ue(u instanceof Error,"cancel must have a valid reason");const h=Promise.withResolvers();return this.streamControllers[r].cancelCall=h,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:at.CANCEL,streamId:r,reason:pn(u)}),h.promise}},i)}destroy(){var e;(e=a(this,bu))==null||e.abort(),g(this,bu,null)}}bu=new WeakMap,s0=new WeakSet,jT=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){S(this,o0,UT).call(this,e);return}if(e.callback){const i=e.callbackId,s=this.callbackCapabilities[i];if(!s)throw new Error(`Cannot resolve callback ${i}`);if(delete this.callbackCapabilities[i],e.callback===$m.DATA)s.resolve(e.data);else if(e.callback===$m.ERROR)s.reject(pn(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const i=this.sourceName,s=e.sourceName,r=this.comObj;Promise.try(t,e.data).then(function(o){r.postMessage({sourceName:i,targetName:s,callback:$m.DATA,callbackId:e.callbackId,data:o})},function(o){r.postMessage({sourceName:i,targetName:s,callback:$m.ERROR,callbackId:e.callbackId,reason:pn(o)})});return}if(e.streamId){S(this,r0,zT).call(this,e);return}t(e.data)},r0=new WeakSet,zT=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this,l=this.actionHandler[e.action],c={enqueue(u,h=1,d){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=h,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:i,targetName:s,stream:at.ENQUEUE,streamId:t,chunk:u},d)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:at.CLOSE,streamId:t}),delete o.streamSinks[t])},error(u){ue(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:i,targetName:s,stream:at.ERROR,streamId:t,reason:pn(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[t]=c,Promise.try(l,e.data,c).then(function(){r.postMessage({sourceName:i,targetName:s,stream:at.START_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:at.START_COMPLETE,streamId:t,reason:pn(u)})})},o0=new WeakSet,UT=function(e){const t=e.streamId,i=this.sourceName,s=e.sourceName,r=this.comObj,o=this.streamControllers[t],l=this.streamSinks[t];switch(e.stream){case at.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(pn(e.reason));break;case at.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(pn(e.reason));break;case at.PULL:if(!l){r.postMessage({sourceName:i,targetName:s,stream:at.PULL_COMPLETE,streamId:t,success:!0});break}l.desiredSize<=0&&e.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=e.desiredSize,Promise.try(l.onPull||KE).then(function(){r.postMessage({sourceName:i,targetName:s,stream:at.PULL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:at.PULL_COMPLETE,streamId:t,reason:pn(u)})});break;case at.ENQUEUE:if(ue(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case at.CLOSE:if(ue(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),S(this,Su,mv).call(this,o,t);break;case at.ERROR:ue(o,"error should have stream controller"),o.controller.error(pn(e.reason)),S(this,Su,mv).call(this,o,t);break;case at.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(pn(e.reason)),S(this,Su,mv).call(this,o,t);break;case at.CANCEL:if(!l)break;const c=pn(e.reason);Promise.try(l.onCancel||KE,c).then(function(){r.postMessage({sourceName:i,targetName:s,stream:at.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){r.postMessage({sourceName:i,targetName:s,stream:at.CANCEL_COMPLETE,streamId:t,reason:pn(u)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Su=new WeakSet,mv=async function(e,t){var i,s,r;await Promise.allSettled([(i=e.startCall)==null?void 0:i.promise,(s=e.pullCall)==null?void 0:s.promise,(r=e.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[t]};var wp;class HT{constructor({enableHWA:e=!1}){p(this,wp,!1);g(this,wp,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const i=this._createCanvas(e,t);return{canvas:i,context:i.getContext("2d",{willReadFrequently:!a(this,wp)})}}reset(e,t,i){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||i<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=i}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Te("Abstract method `_createCanvas` called.")}}wp=new WeakMap;class WL extends HT{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const i=this._document.createElement("canvas");return i.width=e,i.height=t,i}}class $T{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(i=>({cMapData:i,isCompressed:this.isCompressed})).catch(i=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Te("Abstract method `_fetch` called.")}}class QE extends $T{async _fetch(e){const t=await od(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):dm(t)}}class VT{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,i,s,r){return"none"}destroy(e=!1){}}var Ga,Au,er,tr,Gt,Ya,qa,yt,Vt,Ka,Fd,lo,mc,xu,vv,co,vc,a0,WT,bp,t1,uo,yc,Qa,Id,Za,Od,Sp,n1,Ja,Bd;class XL extends VT{constructor({docId:t,ownerDocument:i=globalThis.document}){super();p(this,yt);p(this,Ka);p(this,lo);p(this,xu);p(this,co);p(this,a0);p(this,bp);p(this,uo);p(this,Qa);p(this,Za);p(this,Sp);p(this,Ja);p(this,Ga,void 0);p(this,Au,void 0);p(this,er,void 0);p(this,tr,void 0);p(this,Gt,void 0);p(this,Ya,void 0);p(this,qa,0);g(this,tr,t),g(this,Gt,i)}addFilter(t){if(!t)return"none";let i=a(this,yt,Vt).get(t);if(i)return i;const[s,r,o]=S(this,xu,vv).call(this,t),l=t.length===1?s:`${s}${r}${o}`;if(i=a(this,yt,Vt).get(l),i)return a(this,yt,Vt).set(t,i),i;const c=`g_${a(this,tr)}_transfer_map_${ht(this,qa)._++}`,u=S(this,co,vc).call(this,c);a(this,yt,Vt).set(t,u),a(this,yt,Vt).set(l,u);const h=S(this,uo,yc).call(this,c);return S(this,Za,Od).call(this,s,r,o,h),u}addHCMFilter(t,i){var y;const s=`${t}-${i}`,r="base";let o=a(this,Ka,Fd).get(r);if((o==null?void 0:o.key)===s||(o?((y=o.filter)==null||y.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},a(this,Ka,Fd).set(r,o)),!t||!i))return o.url;const l=S(this,Ja,Bd).call(this,t);t=V.makeHexColor(...l);const c=S(this,Ja,Bd).call(this,i);if(i=V.makeHexColor(...c),a(this,lo,mc).style.color="",t==="#000000"&&i==="#ffffff"||t===i)return o.url;const u=new Array(256);for(let w=0;w<=255;w++){const x=w/255;u[w]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const h=u.join(","),d=`g_${a(this,tr)}_hcm_filter`,f=o.filter=S(this,uo,yc).call(this,d);S(this,Za,Od).call(this,h,h,h,f),S(this,bp,t1).call(this,f);const m=(w,x)=>{const v=l[w]/255,b=c[w]/255,A=new Array(x+1);for(let E=0;E<=x;E++)A[E]=v+E/x*(b-v);return A.join(",")};return S(this,Za,Od).call(this,m(0,5),m(1,5),m(2,5),f),o.url=S(this,co,vc).call(this,d),o.url}addAlphaFilter(t){let i=a(this,yt,Vt).get(t);if(i)return i;const[s]=S(this,xu,vv).call(this,[t]),r=`alpha_${s}`;if(i=a(this,yt,Vt).get(r),i)return a(this,yt,Vt).set(t,i),i;const o=`g_${a(this,tr)}_alpha_map_${ht(this,qa)._++}`,l=S(this,co,vc).call(this,o);a(this,yt,Vt).set(t,l),a(this,yt,Vt).set(r,l);const c=S(this,uo,yc).call(this,o);return S(this,Sp,n1).call(this,s,c),l}addLuminosityFilter(t){let i=a(this,yt,Vt).get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=S(this,xu,vv).call(this,[t]),r=`luminosity_${s}`):r="luminosity",i=a(this,yt,Vt).get(r),i)return a(this,yt,Vt).set(t,i),i;const o=`g_${a(this,tr)}_luminosity_map_${ht(this,qa)._++}`,l=S(this,co,vc).call(this,o);a(this,yt,Vt).set(t,l),a(this,yt,Vt).set(r,l);const c=S(this,uo,yc).call(this,o);return S(this,a0,WT).call(this,c),t&&S(this,Sp,n1).call(this,s,c),l}addHighlightHCMFilter(t,i,s,r,o){var b;const l=`${i}-${s}-${r}-${o}`;let c=a(this,Ka,Fd).get(t);if((c==null?void 0:c.key)===l||(c?((b=c.filter)==null||b.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,Ka,Fd).set(t,c)),!i||!s))return c.url;const[u,h]=[i,s].map(S(this,Ja,Bd).bind(this));let d=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),[m,y]=[r,o].map(S(this,Ja,Bd).bind(this));f<d&&([d,f,m,y]=[f,d,y,m]),a(this,lo,mc).style.color="";const w=(A,E,_)=>{const k=new Array(256),T=(f-d)/_,P=A/255,N=(E-A)/(255*_);let R=0;for(let L=0;L<=_;L++){const O=Math.round(d+L*T),$=P+L*N;for(let U=R;U<=O;U++)k[U]=$;R=O+1}for(let L=R;L<256;L++)k[L]=k[R-1];return k.join(",")},x=`g_${a(this,tr)}_hcm_${t}_filter`,v=c.filter=S(this,uo,yc).call(this,x);return S(this,bp,t1).call(this,v),S(this,Za,Od).call(this,w(m[0],y[0],5),w(m[1],y[1],5),w(m[2],y[2],5),v),c.url=S(this,co,vc).call(this,x),c.url}destroy(t=!1){var i,s,r,o;t&&((i=a(this,Ya))!=null&&i.size)||((s=a(this,er))==null||s.parentNode.parentNode.remove(),g(this,er,null),(r=a(this,Au))==null||r.clear(),g(this,Au,null),(o=a(this,Ya))==null||o.clear(),g(this,Ya,null),g(this,qa,0))}}Ga=new WeakMap,Au=new WeakMap,er=new WeakMap,tr=new WeakMap,Gt=new WeakMap,Ya=new WeakMap,qa=new WeakMap,yt=new WeakSet,Vt=function(){return a(this,Au)||g(this,Au,new Map)},Ka=new WeakSet,Fd=function(){return a(this,Ya)||g(this,Ya,new Map)},lo=new WeakSet,mc=function(){if(!a(this,er)){const t=a(this,Gt).createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=a(this,Gt).createElementNS(Fs,"svg");s.setAttribute("width",0),s.setAttribute("height",0),g(this,er,a(this,Gt).createElementNS(Fs,"defs")),t.append(s),s.append(a(this,er)),a(this,Gt).body.append(t)}return a(this,er)},xu=new WeakSet,vv=function(t){if(t.length===1){const u=t[0],h=new Array(256);for(let f=0;f<256;f++)h[f]=u[f]/255;const d=h.join(",");return[d,d,d]}const[i,s,r]=t,o=new Array(256),l=new Array(256),c=new Array(256);for(let u=0;u<256;u++)o[u]=i[u]/255,l[u]=s[u]/255,c[u]=r[u]/255;return[o.join(","),l.join(","),c.join(",")]},co=new WeakSet,vc=function(t){if(a(this,Ga)===void 0){g(this,Ga,"");const i=a(this,Gt).URL;i!==a(this,Gt).baseURI&&(pm(i)?ee('#createUrl: ignore "data:"-URL for performance reasons.'):g(this,Ga,sx(i,"")))}return`url(${a(this,Ga)}#${t})`},a0=new WeakSet,WT=function(t){const i=a(this,Gt).createElementNS(Fs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)},bp=new WeakSet,t1=function(t){const i=a(this,Gt).createElementNS(Fs,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)},uo=new WeakSet,yc=function(t){const i=a(this,Gt).createElementNS(Fs,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),a(this,lo,mc).append(i),i},Qa=new WeakSet,Id=function(t,i,s){const r=a(this,Gt).createElementNS(Fs,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)},Za=new WeakSet,Od=function(t,i,s,r){const o=a(this,Gt).createElementNS(Fs,"feComponentTransfer");r.append(o),S(this,Qa,Id).call(this,o,"feFuncR",t),S(this,Qa,Id).call(this,o,"feFuncG",i),S(this,Qa,Id).call(this,o,"feFuncB",s)},Sp=new WeakSet,n1=function(t,i){const s=a(this,Gt).createElementNS(Fs,"feComponentTransfer");i.append(s),S(this,Qa,Id).call(this,s,"feFuncA",t)},Ja=new WeakSet,Bd=function(t){return a(this,lo,mc).style.color=t,ad(getComputedStyle(a(this,lo,mc)).getPropertyValue("color"))};class XT{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Te("Abstract method `_fetch` called.")}}class ZE extends XT{async _fetch(e){const t=await od(e,"arraybuffer");return new Uint8Array(t)}}class GT{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(i=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){Te("Abstract method `_fetch` called.")}}class JE extends GT{async _fetch(e){const t=await od(e,"arraybuffer");return new Uint8Array(t)}}an&&ee("Please use the `legacy` build in Node.js environments.");async function ux(n){const t=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(t)}class GL extends VT{}class YL extends HT{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class qL extends $T{async _fetch(e){return ux(e)}}class KL extends XT{async _fetch(e){return ux(e)}}class QL extends GT{async _fetch(e){return ux(e)}}const fc="__forcedDependency",{floor:eC,ceil:tC}=Math;function Vm(n,e,t,i,s,r){n[e*4+0]=Math.min(n[e*4+0],t),n[e*4+1]=Math.min(n[e*4+1],i),n[e*4+2]=Math.max(n[e*4+2],s),n[e*4+3]=Math.max(n[e*4+3],r)}const i1=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Eu,ho;class ZL{constructor(e,t){p(this,Eu,void 0);p(this,ho,void 0);g(this,Eu,e),g(this,ho,t)}get length(){return a(this,Eu).length}isEmpty(e){return a(this,Eu)[e]===i1}minX(e){return a(this,ho)[e*4+0]/256}minY(e){return a(this,ho)[e*4+1]/256}maxX(e){return(a(this,ho)[e*4+2]+1)/256}maxY(e){return(a(this,ho)[e*4+3]+1)/256}}Eu=new WeakMap,ho=new WeakMap;const Wm=(n,e)=>{if(!n)return;let t=n.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},n.set(e,t)),t};var vn,yn,el,Ii,tl,nr,me,Se,ir,wn,Ap,Cu,nl,il,sr,Yt,gs,xp,s1;class JL{constructor(e,t,i=!1){p(this,xp);p(this,vn,{__proto__:null});p(this,yn,{__proto__:null,transform:[],moveText:[],sameLineText:[],[fc]:[]});p(this,el,new Map);p(this,Ii,[]);p(this,tl,[]);p(this,nr,[[1,0,0,1,0,0]]);p(this,me,[-1/0,-1/0,1/0,1/0]);p(this,Se,new Float64Array([1/0,1/0,-1/0,-1/0]));p(this,ir,-1);p(this,wn,new Set);p(this,Ap,new Map);p(this,Cu,new Map);p(this,nl,void 0);p(this,il,void 0);p(this,sr,void 0);p(this,Yt,void 0);p(this,gs,void 0);g(this,nl,e.width),g(this,il,e.height),S(this,xp,s1).call(this,t),i&&g(this,gs,new Map)}growOperationsCount(e){e>=a(this,Yt).length&&S(this,xp,s1).call(this,e,a(this,Yt))}save(e){return g(this,vn,{__proto__:a(this,vn)}),g(this,yn,{__proto__:a(this,yn),transform:{__proto__:a(this,yn).transform},moveText:{__proto__:a(this,yn).moveText},sameLineText:{__proto__:a(this,yn).sameLineText},[fc]:{__proto__:a(this,yn)[fc]}}),g(this,me,{__proto__:a(this,me)}),a(this,Ii).push(e),this}restore(e){var s;const t=Object.getPrototypeOf(a(this,vn));if(t===null)return this;g(this,vn,t),g(this,yn,Object.getPrototypeOf(a(this,yn))),g(this,me,Object.getPrototypeOf(a(this,me)));const i=a(this,Ii).pop();return i!==void 0&&((s=Wm(a(this,gs),e))==null||s.dependencies.add(i),a(this,Yt)[e]=a(this,Yt)[i]),this}recordOpenMarker(e){return a(this,Ii).push(e),this}getOpenMarker(){return a(this,Ii).length===0?null:a(this,Ii).at(-1)}recordCloseMarker(e){var i;const t=a(this,Ii).pop();return t!==void 0&&((i=Wm(a(this,gs),e))==null||i.dependencies.add(t),a(this,Yt)[e]=a(this,Yt)[t]),this}beginMarkedContent(e){return a(this,tl).push(e),this}endMarkedContent(e){var i;const t=a(this,tl).pop();return t!==void 0&&((i=Wm(a(this,gs),e))==null||i.dependencies.add(t),a(this,Yt)[e]=a(this,Yt)[t]),this}pushBaseTransform(e){return a(this,nr).push(V.multiplyByDOMMatrix(a(this,nr).at(-1),e.getTransform())),this}popBaseTransform(){return a(this,nr).length>1&&a(this,nr).pop(),this}recordSimpleData(e,t){return a(this,vn)[e]=t,this}recordIncrementalData(e,t){return a(this,yn)[e].push(t),this}resetIncrementalData(e,t){return a(this,yn)[e].length=0,this}recordNamedData(e,t){return a(this,el).set(e,t),this}recordSimpleDataFromNamed(e,t,i){a(this,vn)[e]=a(this,el).get(t)??i}recordFutureForcedDependency(e,t){return this.recordIncrementalData(fc,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in a(this,vn)&&this.recordFutureForcedDependency(t,a(this,vn)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of a(this,wn))this.recordFutureForcedDependency(fc,e);return this}resetBBox(e){return a(this,ir)!==e&&(g(this,ir,e),a(this,Se)[0]=1/0,a(this,Se)[1]=1/0,a(this,Se)[2]=-1/0,a(this,Se)[3]=-1/0),this}recordClipBox(e,t,i,s,r,o){const l=V.multiplyByDOMMatrix(a(this,nr).at(-1),t.getTransform()),c=[1/0,1/0,-1/0,-1/0];V.axialAlignedBoundingBox([i,r,s,o],l,c);const u=V.intersect(a(this,me),c);return u?(a(this,me)[0]=u[0],a(this,me)[1]=u[1],a(this,me)[2]=u[2],a(this,me)[3]=u[3]):(a(this,me)[0]=a(this,me)[1]=1/0,a(this,me)[2]=a(this,me)[3]=-1/0),this}recordBBox(e,t,i,s,r,o){const l=a(this,me);if(l[0]===1/0)return this;const c=V.multiplyByDOMMatrix(a(this,nr).at(-1),t.getTransform());if(l[0]===-1/0)return V.axialAlignedBoundingBox([i,r,s,o],c,a(this,Se)),this;const u=[1/0,1/0,-1/0,-1/0];return V.axialAlignedBoundingBox([i,r,s,o],c,u),a(this,Se)[0]=Math.min(a(this,Se)[0],Math.max(u[0],l[0])),a(this,Se)[1]=Math.min(a(this,Se)[1],Math.max(u[1],l[1])),a(this,Se)[2]=Math.max(a(this,Se)[2],Math.min(u[2],l[2])),a(this,Se)[3]=Math.max(a(this,Se)[3],Math.min(u[3],l[3])),this}recordCharacterBBox(e,t,i,s=1,r=0,o=0,l){const c=i.bbox;let u,h;if(c&&(u=c[2]!==c[0]&&c[3]!==c[1]&&a(this,Cu).get(i),u!==!1&&(h=[0,0,0,0],V.axialAlignedBoundingBox(c,i.fontMatrix,h),(s!==1||r!==0||o!==0)&&V.scaleMinMax([s,0,0,-s,r,o],h),u)))return this.recordBBox(e,t,h[0],h[2],h[1],h[3]);if(!l)return this.recordFullPageBBox(e);const d=l();return c&&h&&u===void 0&&(u=h[0]<=r-d.actualBoundingBoxLeft&&h[2]>=r+d.actualBoundingBoxRight&&h[1]<=o-d.actualBoundingBoxAscent&&h[3]>=o+d.actualBoundingBoxDescent,a(this,Cu).set(i,u),u)?this.recordBBox(e,t,h[0],h[2],h[1],h[3]):this.recordBBox(e,t,r-d.actualBoundingBoxLeft,r+d.actualBoundingBoxRight,o-d.actualBoundingBoxAscent,o+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return a(this,Se)[0]=Math.max(0,a(this,me)[0]),a(this,Se)[1]=Math.max(0,a(this,me)[1]),a(this,Se)[2]=Math.min(a(this,nl),a(this,me)[2]),a(this,Se)[3]=Math.min(a(this,il),a(this,me)[3]),this}getSimpleIndex(e){return a(this,vn)[e]}recordDependencies(e,t){const i=a(this,wn),s=a(this,vn),r=a(this,yn);for(const o of t)o in a(this,vn)?i.add(s[o]):o in r&&r[o].forEach(i.add,i);return this}recordNamedDependency(e,t){return a(this,el).has(t)&&a(this,wn).add(a(this,el).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[fc]),a(this,gs)){const i=Wm(a(this,gs),e),{dependencies:s}=i;a(this,wn).forEach(s.add,s),a(this,Ii).forEach(s.add,s),a(this,tl).forEach(s.add,s),s.delete(e),i.isRenderingOperation=!0}if(a(this,ir)===e){const i=eC(a(this,Se)[0]*256/a(this,nl)),s=eC(a(this,Se)[1]*256/a(this,il)),r=tC(a(this,Se)[2]*256/a(this,nl)),o=tC(a(this,Se)[3]*256/a(this,il));Vm(a(this,sr),e,i,s,r,o);for(const l of a(this,wn))l!==e&&Vm(a(this,sr),l,i,s,r,o);for(const l of a(this,Ii))l!==e&&Vm(a(this,sr),l,i,s,r,o);for(const l of a(this,tl))l!==e&&Vm(a(this,sr),l,i,s,r,o);t||(a(this,wn).clear(),g(this,ir,-1))}return this}recordShowTextOperation(e,t=!1){const i=Array.from(a(this,wn));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of i)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return a(this,ir)===e&&(g(this,ir,-1),a(this,me)[0]=Math.max(a(this,me)[0],a(this,Se)[0]),a(this,me)[1]=Math.max(a(this,me)[1],a(this,Se)[1]),a(this,me)[2]=Math.min(a(this,me)[2],a(this,Se)[2]),a(this,me)[3]=Math.min(a(this,me)[3],a(this,Se)[3]),t||a(this,wn).clear()),this}_takePendingDependencies(){const e=a(this,wn);return g(this,wn,new Set),e}_extractOperation(e){const t=a(this,Ap).get(e);return a(this,Ap).delete(e),t}_pushPendingDependencies(e){for(const t of e)a(this,wn).add(t)}take(){return a(this,Cu).clear(),new ZL(a(this,Yt),a(this,sr))}takeDebugMetadata(){return a(this,gs)}}vn=new WeakMap,yn=new WeakMap,el=new WeakMap,Ii=new WeakMap,tl=new WeakMap,nr=new WeakMap,me=new WeakMap,Se=new WeakMap,ir=new WeakMap,wn=new WeakMap,Ap=new WeakMap,Cu=new WeakMap,nl=new WeakMap,il=new WeakMap,sr=new WeakMap,Yt=new WeakMap,gs=new WeakMap,xp=new WeakSet,s1=function(e,t){const i=new ArrayBuffer(e*4);g(this,sr,new Uint8ClampedArray(i)),g(this,Yt,new Uint32Array(i)),t&&t.length>0?(a(this,Yt).set(t),a(this,Yt).fill(i1,t.length)):a(this,Yt).fill(i1)};var _e,Ze,Oi,_u,ku;const _x=class _x{constructor(e,t,i){p(this,_e,void 0);p(this,Ze,void 0);p(this,Oi,void 0);p(this,_u,0);p(this,ku,0);if(e instanceof _x&&a(e,Oi)===!!i)return e;g(this,_e,e),g(this,Ze,t),g(this,Oi,!!i)}growOperationsCount(){throw new Error("Unreachable")}save(e){return ht(this,ku)._++,a(this,_e).save(a(this,Ze)),this}restore(e){return a(this,ku)>0&&(a(this,_e).restore(a(this,Ze)),ht(this,ku)._--),this}recordOpenMarker(e){return ht(this,_u)._++,this}getOpenMarker(){return a(this,_u)>0?a(this,Ze):a(this,_e).getOpenMarker()}recordCloseMarker(e){return ht(this,_u)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return a(this,_e).pushBaseTransform(e),this}popBaseTransform(){return a(this,_e).popBaseTransform(),this}recordSimpleData(e,t){return a(this,_e).recordSimpleData(e,a(this,Ze)),this}recordIncrementalData(e,t){return a(this,_e).recordIncrementalData(e,a(this,Ze)),this}resetIncrementalData(e,t){return a(this,_e).resetIncrementalData(e,a(this,Ze)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,i){return a(this,_e).recordSimpleDataFromNamed(e,t,a(this,Ze)),this}recordFutureForcedDependency(e,t){return a(this,_e).recordFutureForcedDependency(e,a(this,Ze)),this}inheritSimpleDataAsFutureForcedDependencies(e){return a(this,_e).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return a(this,_e).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return a(this,Oi)||a(this,_e).resetBBox(a(this,Ze)),this}recordClipBox(e,t,i,s,r,o){return a(this,Oi)||a(this,_e).recordClipBox(a(this,Ze),t,i,s,r,o),this}recordBBox(e,t,i,s,r,o){return a(this,Oi)||a(this,_e).recordBBox(a(this,Ze),t,i,s,r,o),this}recordCharacterBBox(e,t,i,s,r,o,l){return a(this,Oi)||a(this,_e).recordCharacterBBox(a(this,Ze),t,i,s,r,o,l),this}recordFullPageBBox(e){return a(this,Oi)||a(this,_e).recordFullPageBBox(a(this,Ze)),this}getSimpleIndex(e){return a(this,_e).getSimpleIndex(e)}recordDependencies(e,t){return a(this,_e).recordDependencies(a(this,Ze),t),this}recordNamedDependency(e,t){return a(this,_e).recordNamedDependency(a(this,Ze),t),this}recordOperation(e){return a(this,_e).recordOperation(a(this,Ze),!0),this}recordShowTextOperation(e){return a(this,_e).recordShowTextOperation(a(this,Ze),!0),this}bboxToClipBoxDropOperation(e){return a(this,Oi)||a(this,_e).bboxToClipBoxDropOperation(a(this,Ze),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};_e=new WeakMap,Ze=new WeakMap,Oi=new WeakMap,_u=new WeakMap,ku=new WeakMap;let gy=_x;const oi={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ot={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function r1(n,e){if(!e)return;const t=e[2]-e[0],i=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,i),n.clip(s)}class hx{isModifyingCurrentTransform(){return!1}getPattern(){Te("Abstract method `getPattern` called.")}}class eD extends hx{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const i of this._colorStops)t.addColorStop(i[0],i[1]);return t}getPattern(e,t,i,s){let r;if(s===Ot.STROKE||s===Ot.FILL){const o=t.current.getClippedPathBoundingBox(s,We(e))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,u=t.cachedCanvases.getCanvas("pattern",l,c),h=u.context;h.clearRect(0,0,h.canvas.width,h.canvas.height),h.beginPath(),h.rect(0,0,h.canvas.width,h.canvas.height),h.translate(-o[0],-o[1]),i=V.transform(i,[1,0,0,1,o[0],o[1]]),h.transform(...t.baseTransform),this.matrix&&h.transform(...this.matrix),r1(h,this._bbox),h.fillStyle=this._createGradient(h),h.fill(),r=e.createPattern(u.canvas,"no-repeat");const d=new DOMMatrix(i);r.setTransform(d)}else r1(e,this._bbox),r=this._createGradient(e);return r}}function Lb(n,e,t,i,s,r,o,l){const c=e.coords,u=e.colors,h=n.data,d=n.width*4;let f;c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=r,r=o,o=f),c[i+1]>c[s+1]&&(f=i,i=s,s=f,f=o,o=l,l=f),c[t+1]>c[i+1]&&(f=t,t=i,i=f,f=r,r=o,o=f);const m=(c[t]+e.offsetX)*e.scaleX,y=(c[t+1]+e.offsetY)*e.scaleY,w=(c[i]+e.offsetX)*e.scaleX,x=(c[i+1]+e.offsetY)*e.scaleY,v=(c[s]+e.offsetX)*e.scaleX,b=(c[s+1]+e.offsetY)*e.scaleY;if(y>=b)return;const A=u[r],E=u[r+1],_=u[r+2],k=u[o],T=u[o+1],P=u[o+2],N=u[l],R=u[l+1],L=u[l+2],O=Math.round(y),$=Math.round(b);let U,Q,j,B,D,z,Y,Z;for(let K=O;K<=$;K++){if(K<x){const re=K<y?0:(y-K)/(y-x);U=m-(m-w)*re,Q=A-(A-k)*re,j=E-(E-T)*re,B=_-(_-P)*re}else{let re;K>b?re=1:x===b?re=0:re=(x-K)/(x-b),U=w-(w-v)*re,Q=k-(k-N)*re,j=T-(T-R)*re,B=P-(P-L)*re}let H;K<y?H=0:K>b?H=1:H=(y-K)/(y-b),D=m-(m-v)*H,z=A-(A-N)*H,Y=E-(E-R)*H,Z=_-(_-L)*H;const fe=Math.round(Math.min(U,D)),Me=Math.round(Math.max(U,D));let Ee=d*K+fe*4;for(let re=fe;re<=Me;re++)H=(U-re)/(U-D),H<0?H=0:H>1&&(H=1),h[Ee++]=Q-(Q-z)*H|0,h[Ee++]=j-(j-Y)*H|0,h[Ee++]=B-(B-Z)*H|0,h[Ee++]=255}}function tD(n,e,t){const i=e.coords,s=e.colors;let r,o;switch(e.type){case"lattice":const l=e.verticesPerRow,c=Math.floor(i.length/l)-1,u=l-1;for(r=0;r<c;r++){let h=r*l;for(let d=0;d<u;d++,h++)Lb(n,t,i[h],i[h+1],i[h+l],s[h],s[h+1],s[h+l]),Lb(n,t,i[h+l+1],i[h+1],i[h+l],s[h+l+1],s[h+1],s[h+l])}break;case"triangles":for(r=0,o=i.length;r<o;r+=3)Lb(n,t,i[r],i[r+1],i[r+2],s[r],s[r+1],s[r+2]);break;default:throw new Error("illegal figure")}}class nD extends hx{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,i){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-l,h=Math.ceil(this._bounds[3])-c,d=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(h*e[1]*1.1)),3e3),m=u/d,y=h/f,w={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/m,scaleY:1/y},x=d+2*2,v=f+2*2,b=i.getCanvas("mesh",x,v),A=b.context,E=A.createImageData(d,f);if(t){const k=E.data;for(let T=0,P=k.length;T<P;T+=4)k[T]=t[0],k[T+1]=t[1],k[T+2]=t[2],k[T+3]=255}for(const k of this._figures)tD(E,k,w);return A.putImageData(E,2,2),{canvas:b.canvas,offsetX:l-2*m,offsetY:c-2*y,scaleX:m,scaleY:y}}isModifyingCurrentTransform(){return!0}getPattern(e,t,i,s){r1(e,this._bbox);const r=new Float32Array(2);if(s===Ot.SHADING)V.singularValueDecompose2dScale(We(e),r);else if(this.matrix){V.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;V.singularValueDecompose2dScale(t.baseTransform,r),r[0]*=l,r[1]*=c}else V.singularValueDecompose2dScale(t.baseTransform,r);const o=this._createMeshCanvas(r,s===Ot.SHADING?null:this._background,t.cachedCanvases);return s!==Ot.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class iD extends hx{getPattern(){return"hotpink"}}function sD(n){switch(n[0]){case"RadialAxial":return new eD(n);case"Mesh":return new nD(n);case"Dummy":return new iD}throw new Error(`Unknown IR type: ${n[0]}`)}const nC={COLORED:1,UNCOLORED:2},l0=class l0{constructor(e,t,i,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=i,this.baseTransform=s}createPatternCanvas(e,t){var z,Y;const{bbox:i,operatorList:s,paintType:r,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:u,ystep:h}=this;u=Math.abs(u),h=Math.abs(h),Nw("TilingType: "+o);const d=i[0],f=i[1],m=i[2],y=i[3],w=m-d,x=y-f,v=new Float32Array(2);V.singularValueDecompose2dScale(this.matrix,v);const[b,A]=v;V.singularValueDecompose2dScale(this.baseTransform,v);const E=b*v[0],_=A*v[1];let k=w,T=x,P=!1,N=!1;const R=Math.ceil(u*E),L=Math.ceil(h*_),O=Math.ceil(w*E),$=Math.ceil(x*_);R>=O?k=u:P=!0,L>=$?T=h:N=!0;const U=this.getSizeAndScale(k,this.ctx.canvas.width,E),Q=this.getSizeAndScale(T,this.ctx.canvas.height,_),j=e.cachedCanvases.getCanvas("pattern",U.size,Q.size),B=j.context,D=c.createCanvasGraphics(B,t);if(D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,r,l),B.translate(-U.scale*d,-Q.scale*f),D.transform(0,U.scale,0,0,Q.scale,0,0),B.save(),(z=D.dependencyTracker)==null||z.save(),this.clipBbox(D,d,f,m,y),D.baseTransform=We(D.ctx),D.executeOperatorList(s),D.endDrawing(),(Y=D.dependencyTracker)==null||Y.restore(),B.restore(),P||N){const Z=j.canvas;P&&(k=u),N&&(T=h);const K=this.getSizeAndScale(k,this.ctx.canvas.width,E),H=this.getSizeAndScale(T,this.ctx.canvas.height,_),fe=K.size,Me=H.size,Ee=e.cachedCanvases.getCanvas("pattern-workaround",fe,Me),re=Ee.context,dn=P?Math.floor(w/u):0,Tt=N?Math.floor(x/h):0;for(let rt=0;rt<=dn;rt++)for(let oe=0;oe<=Tt;oe++)re.drawImage(Z,fe*rt,Me*oe,fe,Me,0,0,fe,Me);return{canvas:Ee.canvas,scaleX:K.scale,scaleY:H.scale,offsetX:d,offsetY:f}}return{canvas:j.canvas,scaleX:U.scale,scaleY:Q.scale,offsetX:d,offsetY:f}}getSizeAndScale(e,t,i){const s=Math.max(l0.MAX_PATTERN_SIZE,t);let r=Math.ceil(e*i);return r>=s?r=s:i=r/e,{scale:i,size:r}}clipBbox(e,t,i,s,r){const o=s-t,l=r-i;e.ctx.rect(t,i,o,l),V.axialAlignedBoundingBox([t,i,s,r],We(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,i){const s=e.ctx,r=e.current;switch(t){case nC.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;s.fillStyle=r.fillColor=o,s.strokeStyle=r.strokeColor=l;break;case nC.UNCOLORED:s.fillStyle=s.strokeStyle=i,r.fillColor=r.strokeColor=i;break;default:throw new CL(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,i,s,r){let o=i;s!==Ot.SHADING&&(o=V.transform(o,t.baseTransform),this.matrix&&(o=V.transform(o,this.matrix)));const l=this.createPatternCanvas(t,r);let c=new DOMMatrix(o);c=c.translate(l.offsetX,l.offsetY),c=c.scale(1/l.scaleX,1/l.scaleY);const u=e.createPattern(l.canvas,"repeat");return u.setTransform(c),u}};F(l0,"MAX_PATTERN_SIZE",3e3);let o1=l0;function rD({src:n,srcPos:e=0,dest:t,width:i,height:s,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=kt.isLittleEndian?4278190080:255,[c,u]=o?[r,l]:[l,r],h=i>>3,d=i&7,f=n.length;t=new Uint32Array(t.buffer);let m=0;for(let y=0;y<s;y++){for(const x=e+h;e<x;e++){const v=e<f?n[e]:255;t[m++]=v&128?u:c,t[m++]=v&64?u:c,t[m++]=v&32?u:c,t[m++]=v&16?u:c,t[m++]=v&8?u:c,t[m++]=v&4?u:c,t[m++]=v&2?u:c,t[m++]=v&1?u:c}if(d===0)continue;const w=e<f?n[e++]:255;for(let x=0;x<d;x++)t[m++]=w&1<<7-x?u:c}return{srcPos:e,destPos:m}}const iC=16,sC=100,oD=15,rC=10,xn=16,Db=new DOMMatrix,Qn=new Float32Array(2),Mc=new Float32Array([1/0,1/0,-1/0,-1/0]);function aD(n,e){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){e.save(),this.__originalSave()},n.restore=function(){e.restore(),this.__originalRestore()},n.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},n.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},n.transform=function(t,i,s,r,o,l){e.transform(t,i,s,r,o,l),this.__originalTransform(t,i,s,r,o,l)},n.setTransform=function(t,i,s,r,o,l){e.setTransform(t,i,s,r,o,l),this.__originalSetTransform(t,i,s,r,o,l)},n.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},n.rotate=function(t){e.rotate(t),this.__originalRotate(t)},n.clip=function(t){e.clip(t),this.__originalClip(t)},n.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},n.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},n.bezierCurveTo=function(t,i,s,r,o,l){e.bezierCurveTo(t,i,s,r,o,l),this.__originalBezierCurveTo(t,i,s,r,o,l)},n.rect=function(t,i,s,r){e.rect(t,i,s,r),this.__originalRect(t,i,s,r)},n.closePath=function(){e.closePath(),this.__originalClosePath()},n.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class lD{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,i){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,i)):(s=this.canvasFactory.create(t,i),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Xm(n,e,t,i,s,r,o,l,c,u){const[h,d,f,m,y,w]=We(n);if(d===0&&f===0){const b=o*h+y,A=Math.round(b),E=l*m+w,_=Math.round(E),k=(o+c)*h+y,T=Math.abs(Math.round(k)-A)||1,P=(l+u)*m+w,N=Math.abs(Math.round(P)-_)||1;return n.setTransform(Math.sign(h),0,0,Math.sign(m),A,_),n.drawImage(e,t,i,s,r,0,0,T,N),n.setTransform(h,d,f,m,y,w),[T,N]}if(h===0&&m===0){const b=l*f+y,A=Math.round(b),E=o*d+w,_=Math.round(E),k=(l+u)*f+y,T=Math.abs(Math.round(k)-A)||1,P=(o+c)*d+w,N=Math.abs(Math.round(P)-_)||1;return n.setTransform(0,Math.sign(d),Math.sign(f),0,A,_),n.drawImage(e,t,i,s,r,0,0,N,T),n.setTransform(h,d,f,m,y,w),[N,T]}n.drawImage(e,t,i,s,r,o,l,c,u);const x=Math.hypot(h,d),v=Math.hypot(f,m);return[x*c,v*u]}class oC{constructor(e,t,i){F(this,"alphaIsShape",!1);F(this,"fontSize",0);F(this,"fontSizeScale",1);F(this,"textMatrix",null);F(this,"textMatrixScale",1);F(this,"fontMatrix",LS);F(this,"leading",0);F(this,"x",0);F(this,"y",0);F(this,"lineX",0);F(this,"lineY",0);F(this,"charSpacing",0);F(this,"wordSpacing",0);F(this,"textHScale",1);F(this,"textRenderingMode",Pt.FILL);F(this,"textRise",0);F(this,"fillColor","#000000");F(this,"strokeColor","#000000");F(this,"patternFill",!1);F(this,"patternStroke",!1);F(this,"fillAlpha",1);F(this,"strokeAlpha",1);F(this,"lineWidth",1);F(this,"activeSMask",null);F(this,"transferMaps","none");i==null||i(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Mc.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ot.FILL,t=null){const i=this.minMax.slice();if(e===Ot.STROKE){t||Te("Stroke bounding box must include transform."),V.singularValueDecompose2dScale(t,Qn);const s=Qn[0]*this.lineWidth/2,r=Qn[1]*this.lineWidth/2;i[0]-=s,i[1]-=r,i[2]+=s,i[3]+=r}return i}updateClipFromPath(){const e=V.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Mc,0)}getClippedPathBoundingBox(e=Ot.FILL,t=null){return V.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function aC(n,e){if(e instanceof ImageData){n.putImageData(e,0,0);return}const t=e.height,i=e.width,s=t%xn,r=(t-s)/xn,o=s===0?r:r+1,l=n.createImageData(i,xn);let c=0,u;const h=e.data,d=l.data;let f,m,y,w;if(e.kind===rf.GRAYSCALE_1BPP){const x=h.byteLength,v=new Uint32Array(d.buffer,0,d.byteLength>>2),b=v.length,A=i+7>>3,E=4294967295,_=kt.isLittleEndian?4278190080:255;for(f=0;f<o;f++){for(y=f<r?xn:s,u=0,m=0;m<y;m++){const k=x-c;let T=0;const P=k>A?i:k*8-7,N=P&-8;let R=0,L=0;for(;T<N;T+=8)L=h[c++],v[u++]=L&128?E:_,v[u++]=L&64?E:_,v[u++]=L&32?E:_,v[u++]=L&16?E:_,v[u++]=L&8?E:_,v[u++]=L&4?E:_,v[u++]=L&2?E:_,v[u++]=L&1?E:_;for(;T<P;T++)R===0&&(L=h[c++],R=128),v[u++]=L&R?E:_,R>>=1}for(;u<b;)v[u++]=0;n.putImageData(l,0,f*xn)}}else if(e.kind===rf.RGBA_32BPP){for(m=0,w=i*xn*4,f=0;f<r;f++)d.set(h.subarray(c,c+w)),c+=w,n.putImageData(l,0,m),m+=xn;f<o&&(w=i*s*4,d.set(h.subarray(c,c+w)),n.putImageData(l,0,m))}else if(e.kind===rf.RGB_24BPP)for(y=xn,w=i*y,f=0;f<o;f++){for(f>=r&&(y=s,w=i*y),u=0,m=w;m--;)d[u++]=h[c++],d[u++]=h[c++],d[u++]=h[c++],d[u++]=255;n.putImageData(l,0,f*xn)}else throw new Error(`bad image kind: ${e.kind}`)}function lC(n,e){if(e.bitmap){n.drawImage(e.bitmap,0,0);return}const t=e.height,i=e.width,s=t%xn,r=(t-s)/xn,o=s===0?r:r+1,l=n.createImageData(i,xn);let c=0;const u=e.data,h=l.data;for(let d=0;d<o;d++){const f=d<r?xn:s;({srcPos:c}=rD({src:u,srcPos:c,dest:h,width:i,height:f,nonBlackColor:0})),n.putImageData(l,0,d*xn)}}function yd(n,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const i of t)n[i]!==void 0&&(e[i]=n[i]);n.setLineDash!==void 0&&(e.setLineDash(n.getLineDash()),e.lineDashOffset=n.lineDashOffset)}function Gm(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:e}=n;e!=="none"&&e!==""&&(n.filter="none")}function cC(n,e){if(e)return!0;V.singularValueDecompose2dScale(n,Qn);const t=Math.fround(Zi.pixelRatio*Mr.PDF_TO_CSS_UNITS);return Qn[0]<=t&&Qn[1]<=t}const cD=["butt","round","square"],uD=["miter","round","bevel"],hD={},uC={};var Ep,a1,Cp,l1,_p,c1;const kx=class kx{constructor(e,t,i,s,r,{optionalContentConfig:o,markedContentStack:l=null},c,u,h){p(this,Ep);p(this,Cp);p(this,_p);this.ctx=e,this.current=new oC(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=i,this.canvasFactory=s,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new lD(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=h??null}getObject(e,t,i=null){var s;return typeof t=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):i}beginDrawing({transform:e,viewport:t,transparency:i=!1,background:s=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,i){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...We(this.compositeCtx))}this.ctx.save(),Gm(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=We(this.ctx)}executeOperatorList(e,t,i,s,r){var v;const o=e.argsArray,l=e.fnArray;let c=t||0;const u=o.length;if(u===c)return c;const h=u-c>rC&&typeof i=="function",d=h?Date.now()+oD:0;let f=0;const m=this.commonObjs,y=this.objs;let w,x;for(;;){if(s!==void 0&&c===s.nextBreakPoint)return s.breakIt(c,i),c;if(!r||r(c))if(w=l[c],x=o[c]??null,w!==ed.dependency)x===null?this[w](c):this[w](c,...x);else for(const b of x){(v=this.dependencyTracker)==null||v.recordNamedData(b,c);const A=b.startsWith("g_")?m:y;if(!A.has(b))return A.get(b,i),c}if(c++,c===u)return c;if(h&&++f>rC){if(Date.now()>d)return i(),c;f=0}}}endDrawing(){S(this,Ep,a1).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),S(this,Cp,l1).call(this)}_scaleImage(e,t){const i=e.width??e.displayWidth,s=e.height??e.displayHeight;let r=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),l=i,c=s,u="prescale1",h,d;for(;r>2&&l>1||o>2&&c>1;){let f=l,m=c;r>2&&l>1&&(f=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/f),o>2&&c>1&&(m=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/m),h=this.cachedCanvases.getCanvas(u,f,m),d=h.context,d.clearRect(0,0,f,m),d.drawImage(e,0,0,l,c,0,0,f,m),e=h.canvas,l=f,c=m,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:l,paintHeight:c}}_createMaskCanvas(e,t){var R,L;const i=this.ctx,{width:s,height:r}=t,o=this.current.fillColor,l=this.current.patternFill,c=We(i);let u,h,d,f;if((t.bitmap||t.data)&&t.count>1){const O=t.bitmap||t.data.buffer;h=JSON.stringify(l?c:[c.slice(0,4),o]),u=this._cachedBitmapsMap.get(O),u||(u=new Map,this._cachedBitmapsMap.set(O,u));const $=u.get(h);if($&&!l){const U=Math.round(Math.min(c[0],c[2])+c[4]),Q=Math.round(Math.min(c[1],c[3])+c[5]);return(R=this.dependencyTracker)==null||R.recordDependencies(e,oi.transformAndFill),{canvas:$,offsetX:U,offsetY:Q}}d=$}d||(f=this.cachedCanvases.getCanvas("maskCanvas",s,r),lC(f.context,t));let m=V.transform(c,[1/s,0,0,-1/r,0,0]);m=V.transform(m,[1,0,0,1,0,-r]);const y=Mc.slice();V.axialAlignedBoundingBox([0,0,s,r],m,y);const[w,x,v,b]=y,A=Math.round(v-w)||1,E=Math.round(b-x)||1,_=this.cachedCanvases.getCanvas("fillCanvas",A,E),k=_.context,T=w,P=x;k.translate(-T,-P),k.transform(...m),d||(d=this._scaleImage(f.canvas,ts(k)),d=d.img,u&&l&&u.set(h,d)),k.imageSmoothingEnabled=cC(We(k),t.interpolate),Xm(k,d,0,0,d.width,d.height,0,0,s,r),k.globalCompositeOperation="source-in";const N=V.transform(ts(k),[1,0,0,1,-T,-P]);return k.fillStyle=l?o.getPattern(i,this,N,Ot.FILL,e):o,k.fillRect(0,0,s,r),u&&!l&&(this.cachedCanvases.delete("fillCanvas"),u.set(h,_.canvas)),(L=this.dependencyTracker)==null||L.recordDependencies(e,oi.transformAndFill),{canvas:_.canvas,offsetX:Math.round(T),offsetY:Math.round(P)}}setLineWidth(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineCap",e),this.ctx.lineCap=cD[t]}setLineJoin(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("lineJoin",e),this.ctx.lineJoin=uD[t]}setMiterLimit(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,i){var r;(r=this.dependencyTracker)==null||r.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=i)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var i,s,r,o,l;for(const[c,u]of t)switch(c){case"LW":this.setLineWidth(e,u);break;case"LC":this.setLineCap(e,u);break;case"LJ":this.setLineJoin(e,u);break;case"ML":this.setMiterLimit(e,u);break;case"D":this.setDash(e,u[0],u[1]);break;case"RI":this.setRenderingIntent(e,u);break;case"FL":this.setFlatness(e,u);break;case"Font":this.setFont(e,u[0],u[1]);break;case"CA":(i=this.dependencyTracker)==null||i.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=u;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=u;break;case"BM":(r=this.dependencyTracker)==null||r.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=u;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=u?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(l=this.dependencyTracker)==null||l.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(u);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,i=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(s,t,i);this.suspendedCtx=this.ctx;const o=this.ctx=r.context;o.setTransform(this.suspendedCtx.getTransform()),yd(this.suspendedCtx,o),aD(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),yd(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,i=this.suspendedCtx;this.composeSMask(i,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,i,s){const r=s[0],o=s[1],l=s[2]-r,c=s[3]-o;l===0||c===0||(this.genericComposeSMask(t.context,i,l,c,t.subtype,t.backdrop,t.transferMap,r,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(i.canvas,0,0),e.restore())}genericComposeSMask(e,t,i,s,r,o,l,c,u,h,d){let f=e.canvas,m=c-h,y=u-d;if(o)if(m<0||y<0||m+i>f.width||y+s>f.height){const x=this.cachedCanvases.getCanvas("maskExtension",i,s),v=x.context;v.drawImage(f,-m,-y),v.globalCompositeOperation="destination-atop",v.fillStyle=o,v.fillRect(0,0,i,s),v.globalCompositeOperation="source-over",f=x.canvas,m=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const x=new Path2D;x.rect(m,y,i,s),e.clip(x),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(m,y,i,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?t.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(l));const w=new Path2D;w.rect(c,u,i,s),t.clip(w),t.globalCompositeOperation="destination-in",t.drawImage(f,m,y,i,s,c,u,i,s),t.restore()}save(e){var i;this.inSMaskMode&&yd(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(i=this.dependencyTracker)==null||i.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&yd(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,i,s,r,o,l){var c;(c=this.dependencyTracker)==null||c.recordIncrementalData("transform",e),this.ctx.transform(t,i,s,r,o,l),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,i,s){let[r]=i;if(!s){r||(r=i[0]=new Path2D),this[t](e,r);return}if(this.dependencyTracker!==null){const o=t===ed.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(e,["transform"])}if(!(r instanceof Path2D)){const o=i[0]=new Path2D;for(let l=0,c=r.length;l<c;)switch(r[l++]){case zm.moveTo:o.moveTo(r[l++],r[l++]);break;case zm.lineTo:o.lineTo(r[l++],r[l++]);break;case zm.curveTo:o.bezierCurveTo(r[l++],r[l++],r[l++],r[l++],r[l++],r[l++]);break;case zm.closePath:o.closePath();break;default:ee(`Unrecognized drawing path operator: ${r[l-1]}`);break}r=o}V.axialAlignedBoundingBox(s,We(this.ctx),this.current.minMax),this[t](e,r),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,i=!0){var o;const s=this.ctx,r=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof r=="object"&&(r!=null&&r.getPattern)){const l=r.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=r.getPattern(s,this,ts(s),Ot.STROKE,e),l){const c=new Path2D;c.addPath(t,s.getTransform().invertSelf().multiplySelf(l)),t=c}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,oi.stroke),i&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Ot.STROKE,We(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,i=!0){var u,h,d;const s=this.ctx,r=this.current.fillColor,o=this.current.patternFill;let l=!1;if(o){const f=r.isModifyingCurrentTransform()?s.getTransform():null;if((u=this.dependencyTracker)==null||u.save(e),s.save(),s.fillStyle=r.getPattern(s,this,ts(s),Ot.FILL,e),f){const m=new Path2D;m.addPath(t,s.getTransform().invertSelf().multiplySelf(f)),t=m}l=!0}const c=this.current.getClippedPathBoundingBox();this.contentVisible&&c!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),(h=this.dependencyTracker)==null||h.recordDependencies(e,oi.fill),l&&(s.restore(),(d=this.dependencyTracker)==null||d.restore(e)),i&&this.consumePath(e,t,c)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var i;this.ctx.fill(t),(i=this.dependencyTracker)==null||i.recordDependencies(e,oi.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=hD}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=uC}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,i=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,r=i.getTransform().invertSelf();for(const{transform:o,x:l,y:c,fontSize:u,path:h}of t)h&&s.addPath(h,new DOMMatrix(o).preMultiplySelf(r).translate(l,c).scale(u,-u));i.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,i){var d,f;(d=this.dependencyTracker)==null||d.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),r=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(r.fontMatrix=s.fontMatrix||LS,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&ee("Invalid font matrix for font "+t),i<0?(i=-i,r.fontDirection=-1):r.fontDirection=1,this.current.font=s,this.current.fontSize=i,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=((f=s.systemFontInfo)==null?void 0:f.css)||`"${o}", ${s.fallbackName}`;let c="normal";s.black?c="900":s.bold&&(c="bold");const u=s.italic?"italic":"normal";let h=i;i<iC?h=iC:i>sC&&(h=sC),this.current.fontSizeScale=i/h,this.ctx.font=`${u} ${c} ${h}px ${l}`}setTextRenderingMode(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,i){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=i}setLeadingMoveText(e,t,i){this.setLeading(e,-i),this.moveText(e,t,i)}setTextMatrix(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textMatrix",e);const{current:i}=this;i.textMatrix=t,i.textMatrixScale=Math.hypot(t[0],t[1]),i.x=i.lineX=0,i.y=i.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,i,s,r,o){var v,b,A,E;const l=this.ctx,c=this.current,u=c.font,h=c.textRenderingMode,d=c.fontSize/c.fontSizeScale,f=h&Pt.FILL_STROKE_MASK,m=!!(h&Pt.ADD_TO_PATH_FLAG),y=c.patternFill&&!u.missingFile,w=c.patternStroke&&!u.missingFile;let x;if((u.disableFontFace||m||y||w)&&!u.missingFile&&(x=u.getPathGenerator(this.commonObjs,t)),x&&(u.disableFontFace||y||w)){l.save(),l.translate(i,s),l.scale(d,-d),(v=this.dependencyTracker)==null||v.recordCharacterBBox(e,l,u);let _;if(f===Pt.FILL||f===Pt.FILL_STROKE)if(r){_=l.getTransform(),l.setTransform(...r);const k=S(this,_p,c1).call(this,x,_,r);l.fill(k)}else l.fill(x);if(f===Pt.STROKE||f===Pt.FILL_STROKE)if(o){_||(_=l.getTransform()),l.setTransform(...o);const{a:k,b:T,c:P,d:N}=_,R=V.inverseTransform(o),L=V.transform([k,T,P,N,0,0],R);V.singularValueDecompose2dScale(L,Qn),l.lineWidth*=Math.max(Qn[0],Qn[1])/d,l.stroke(S(this,_p,c1).call(this,x,_,o))}else l.lineWidth/=d,l.stroke(x);l.restore()}else(f===Pt.FILL||f===Pt.FILL_STROKE)&&(l.fillText(t,i,s),(b=this.dependencyTracker)==null||b.recordCharacterBBox(e,l,u,d,i,s,()=>l.measureText(t))),(f===Pt.STROKE||f===Pt.FILL_STROKE)&&(this.dependencyTracker&&((A=this.dependencyTracker)==null||A.recordCharacterBBox(e,l,u,d,i,s,()=>l.measureText(t)).recordDependencies(e,oi.stroke)),l.strokeText(t,i,s));m&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:We(l),x:i,y:s,fontSize:d,path:x}),(E=this.dependencyTracker)==null||E.recordCharacterBBox(e,l,u,d,i,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let i=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){i=!0;break}return ie(this,"isFontSubpixelAAEnabled",i)}showText(e,t){var P,N,R,L;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,oi.showText).resetBBox(e),this.current.textRenderingMode&Pt.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const i=this.current,s=i.font;if(s.isType3Font){this.showType3Text(e,t),(P=this.dependencyTracker)==null||P.recordShowTextOperation(e);return}const r=i.fontSize;if(r===0){(N=this.dependencyTracker)==null||N.recordOperation(e);return}const o=this.ctx,l=i.fontSizeScale,c=i.charSpacing,u=i.wordSpacing,h=i.fontDirection,d=i.textHScale*h,f=t.length,m=s.vertical,y=m?1:-1,w=s.defaultVMetrics,x=r*i.fontMatrix[0],v=i.textRenderingMode===Pt.FILL&&!s.disableFontFace&&!i.patternFill;o.save(),i.textMatrix&&o.transform(...i.textMatrix),o.translate(i.x,i.y+i.textRise),h>0?o.scale(d,-1):o.scale(d,1);let b,A;if(i.patternFill){o.save();const O=i.fillColor.getPattern(o,this,ts(o),Ot.FILL,e);b=We(o),o.restore(),o.fillStyle=O}if(i.patternStroke){o.save();const O=i.strokeColor.getPattern(o,this,ts(o),Ot.STROKE,e);A=We(o),o.restore(),o.strokeStyle=O}let E=i.lineWidth;const _=i.textMatrixScale;if(_===0||E===0){const O=i.textRenderingMode&Pt.FILL_STROKE_MASK;(O===Pt.STROKE||O===Pt.FILL_STROKE)&&(E=this.getSinglePixelWidth())}else E/=_;if(l!==1&&(o.scale(l,l),E/=l),o.lineWidth=E,s.isInvalidPDFjsFont){const O=[];let $=0;for(const Q of t)O.push(Q.unicode),$+=Q.width;const U=O.join("");if(o.fillText(U,0,0),this.dependencyTracker!==null){const Q=o.measureText(U);this.dependencyTracker.recordBBox(e,this.ctx,-Q.actualBoundingBoxLeft,Q.actualBoundingBoxRight,-Q.actualBoundingBoxAscent,Q.actualBoundingBoxDescent).recordShowTextOperation(e)}i.x+=$*x*d,o.restore(),this.compose();return}let k=0,T;for(T=0;T<f;++T){const O=t[T];if(typeof O=="number"){k+=y*O*r/1e3;continue}let $=!1;const U=(O.isSpace?u:0)+c,Q=O.fontChar,j=O.accent;let B,D,z=O.width;if(m){const K=O.vmetric||w,H=-(O.vmetric?K[1]:z*.5)*x,fe=K[2]*x;z=K?-K[0]:z,B=H/l,D=(k+fe)/l}else B=k/l,D=0;let Y;if(s.remeasure&&z>0){Y=o.measureText(Q);const K=Y.width*1e3/r*l;if(z<K&&this.isFontSubpixelAAEnabled){const H=z/K;$=!0,o.save(),o.scale(H,1),B/=H}else z!==K&&(B+=(z-K)/2e3*r/l)}if(this.contentVisible&&(O.isInFont||s.missingFile)){if(v&&!j)o.fillText(Q,B,D),(R=this.dependencyTracker)==null||R.recordCharacterBBox(e,o,Y?{bbox:null}:s,r/l,B,D,()=>Y??o.measureText(Q));else if(this.paintChar(e,Q,B,D,b,A),j){const K=B+r*j.offset.x/l,H=D-r*j.offset.y/l;this.paintChar(e,j.fontChar,K,H,b,A)}}const Z=m?z*x-U*h:z*x+U*h;k+=Z,$&&o.restore()}m?i.y-=k:i.x+=k*d,o.restore(),this.compose(),(L=this.dependencyTracker)==null||L.recordShowTextOperation(e)}showType3Text(e,t){const i=this.ctx,s=this.current,r=s.font,o=s.fontSize,l=s.fontDirection,c=r.vertical?1:-1,u=s.charSpacing,h=s.wordSpacing,d=s.textHScale*l,f=s.fontMatrix||LS,m=t.length,y=s.textRenderingMode===Pt.INVISIBLE;let w,x,v,b;if(y||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,i.save(),s.textMatrix&&i.transform(...s.textMatrix),i.translate(s.x,s.y+s.textRise),i.scale(d,l);const A=this.dependencyTracker;for(this.dependencyTracker=A?new gy(A,e):null,w=0;w<m;++w){if(x=t[w],typeof x=="number"){b=c*x*o/1e3,this.ctx.translate(b,0),s.x+=b*d;continue}const E=(x.isSpace?h:0)+u,_=r.charProcOperatorList[x.operatorListId];_?this.contentVisible&&(this.save(),i.scale(o,o),i.transform(...f),this.executeOperatorList(_),this.restore()):ee(`Type3 character "${x.operatorListId}" is not available.`);const k=[x.width,0];V.applyTransform(k,f),v=k[0]*o+E,i.translate(v,0),s.x+=v*d}i.restore(),A&&(this.dependencyTracker=A)}setCharWidth(e,t,i){}setCharWidthAndBounds(e,t,i,s,r,o,l){var u;const c=new Path2D;c.rect(s,r,o-s,l-r),this.ctx.clip(c),(u=this.dependencyTracker)==null||u.recordBBox(e,this.ctx,s,o,r,l).recordClipBox(e,this.ctx,s,o,r,l),this.endPath(e)}getColorN_Pattern(e,t){let i;if(t[0]==="TilingPattern"){const s=this.baseTransform||We(this.ctx),r={createCanvasGraphics:(o,l)=>new kx(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new gy(this.dependencyTracker,l,!0):null)};i=new o1(t,this.ctx,r,s)}else i=this._getPattern(e,t[1],t[2]);return i}setStrokeColorN(e,...t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var i;(i=this.dependencyTracker)==null||i.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,i=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=sD(this.getObject(e,t)),this.cachedPatterns.set(t,s)),i&&(s.matrix=i),s}shadingFill(e,t){var o;if(!this.contentVisible)return;const i=this.ctx;this.save(e);const s=this._getPattern(e,t);i.fillStyle=s.getPattern(i,this,ts(i),Ot.SHADING,e);const r=ts(i);if(r){const{width:l,height:c}=i.canvas,u=Mc.slice();V.axialAlignedBoundingBox([0,0,l,c],r,u);const[h,d,f,m]=u;this.ctx.fillRect(h,d,f-h,m-d)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,oi.transform).recordDependencies(e,oi.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){Te("Should not call beginInlineImage")}beginImageData(){Te("Should not call beginImageData")}paintFormXObjectBegin(e,t,i){var s;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=We(this.ctx),i)){V.axialAlignedBoundingBox(i,this.baseTransform,this.current.minMax);const[r,o,l,c]=i,u=new Path2D;u.rect(r,o,l-r,c-o),this.ctx.clip(u),(s=this.dependencyTracker)==null||s.recordClipBox(e,this.ctx,r,l,o,c),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var A;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const i=this.ctx;t.isolated||Nw("TODO: Support non-isolated groups."),t.knockout&&ee("Knockout groups not supported.");const s=We(i);if(t.matrix&&i.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let r=Mc.slice();V.axialAlignedBoundingBox(t.bbox,We(i),r);const o=[0,0,i.canvas.width,i.canvas.height];r=V.intersect(r,o)||[0,0,0,0];const l=Math.floor(r[0]),c=Math.floor(r[1]),u=Math.max(Math.ceil(r[2])-l,1),h=Math.max(Math.ceil(r[3])-c,1);this.current.startNewPathAndClipBox([0,0,u,h]);let d="groupAt"+this.groupLevel;t.smask&&(d+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(d,u,h),m=f.context;m.translate(-l,-c),m.transform(...s);let y=new Path2D;const[w,x,v,b]=t.bbox;if(y.rect(w,x,v-w,b-x),t.matrix){const E=new Path2D;E.addPath(y,new DOMMatrix(t.matrix)),y=E}m.clip(y),t.smask&&this.smaskStack.push({canvas:f.canvas,context:m,offsetX:l,offsetY:c,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(i.setTransform(1,0,0,1,0,0),i.translate(l,c),i.save()),yd(i,m),this.ctx=m,(A=this.dependencyTracker)==null||A.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(i),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(i),this.groupLevel++}endGroup(e,t){var r;if(!this.contentVisible)return;this.groupLevel--;const i=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(r=this.dependencyTracker)==null||r.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=We(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const l=Mc.slice();V.axialAlignedBoundingBox([0,0,i.canvas.width,i.canvas.height],o,l),this.ctx.drawImage(i.canvas,0,0),this.ctx.restore(),this.compose(l)}}beginAnnotation(e,t,i,s,r,o){if(S(this,Ep,a1).call(this),Gm(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),i){const l=i[2]-i[0],c=i[3]-i[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=i[0],s[5]-=i[1],i=i.slice(),i[0]=i[1]=0,i[2]=l,i[3]=c,V.singularValueDecompose2dScale(We(this.ctx),Qn);const{viewportScale:u}=this,h=Math.ceil(l*this.outputScaleX*u),d=Math.ceil(c*this.outputScaleY*u);this.annotationCanvas=this.canvasFactory.create(h,d);const{canvas:f,context:m}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=m,this.ctx.save(),this.ctx.setTransform(Qn[0],0,0,-Qn[1],0,c*Qn[1]),Gm(this.ctx)}else{Gm(this.ctx),this.endPath(e);const u=new Path2D;u.rect(i[0],i[1],l,c),this.ctx.clip(u)}}this.current=new oC(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...r)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),S(this,Cp,l1).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var l;if(!this.contentVisible)return;const i=t.count;t=this.getObject(e,t.data,t),t.count=i;const s=this.ctx,r=this._createMaskCanvas(e,t),o=r.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,r.offsetX,r.offsetY),(l=this.dependencyTracker)==null||l.resetBBox(e).recordBBox(e,this.ctx,r.offsetX,r.offsetX+o.width,r.offsetY,r.offsetY+o.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,i,s=0,r=0,o,l){var d,f,m;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const u=We(c);c.transform(i,s,r,o,0,0);const h=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,h.offsetX-u[4],h.offsetY-u[5]),(d=this.dependencyTracker)==null||d.resetBBox(e);for(let y=0,w=l.length;y<w;y+=2){const x=V.transform(u,[i,s,r,o,l[y],l[y+1]]);c.drawImage(h.canvas,x[4],x[5]),(f=this.dependencyTracker)==null||f.recordBBox(e,this.ctx,x[4],x[4]+h.canvas.width,x[5],x[5]+h.canvas.height)}c.restore(),this.compose(),(m=this.dependencyTracker)==null||m.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,l,c;if(!this.contentVisible)return;const i=this.ctx,s=this.current.fillColor,r=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,oi.transformAndFill);for(const u of t){const{data:h,width:d,height:f,transform:m}=u,y=this.cachedCanvases.getCanvas("maskCanvas",d,f),w=y.context;w.save();const x=this.getObject(e,h,u);lC(w,x),w.globalCompositeOperation="source-in",w.fillStyle=r?s.getPattern(w,this,ts(i),Ot.FILL,e):s,w.fillRect(0,0,d,f),w.restore(),i.save(),i.transform(...m),i.scale(1,-1),Xm(i,y.canvas,0,0,d,f,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,i,0,d,0,f),i.restore()}this.compose(),(c=this.dependencyTracker)==null||c.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const i=this.getObject(e,t);if(!i){ee("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,i)}paintImageXObjectRepeat(e,t,i,s,r){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){ee("Dependent image isn't ready yet");return}const l=o.width,c=o.height,u=[];for(let h=0,d=r.length;h<d;h+=2)u.push({transform:[i,0,0,s,r[h],r[h+1]],x:0,y:0,w:l,h:c});this.paintInlineImageXObjectGroup(e,o,u)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:i,height:s}=e,r=this.cachedCanvases.getCanvas("inlineImage",i,s),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",r.canvas}paintInlineImageXObject(e,t){var u;if(!this.contentVisible)return;const i=t.width,s=t.height,r=this.ctx;this.save(e);const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none"),r.scale(1/i,-1/s);let l;if(t.bitmap)l=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)l=t;else{const d=this.cachedCanvases.getCanvas("inlineImage",i,s).context;aC(d,t),l=this.applyTransferMapsToCanvas(d)}const c=this._scaleImage(l,ts(r));r.imageSmoothingEnabled=cC(We(r),t.interpolate),(u=this.dependencyTracker)==null||u.resetBBox(e).recordBBox(e,r,0,i,-s,0).recordDependencies(e,oi.imageXObject).recordOperation(e),Xm(r,c.img,0,0,c.paintWidth,c.paintHeight,0,-s,i,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,i){var o,l,c;if(!this.contentVisible)return;const s=this.ctx;let r;if(t.bitmap)r=t.bitmap;else{const u=t.width,h=t.height,f=this.cachedCanvases.getCanvas("inlineImage",u,h).context;aC(f,t),r=this.applyTransferMapsToCanvas(f)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const u of i)s.save(),s.transform(...u.transform),s.scale(1,-1),Xm(s,r,u.x,u.y,u.w,u.h,0,-1,1,1),(l=this.dependencyTracker)==null||l.recordBBox(e,s,0,1,-1,0),s.restore();(c=this.dependencyTracker)==null||c.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,oi.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,i){}beginMarkedContent(e,t){var i;(i=this.dependencyTracker)==null||i.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,i){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(i)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,i){var o,l;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(i);const r=this.ctx;this.pendingClip?(s||(this.pendingClip===uC?r.clip(t,"evenodd"):r.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(l=this.dependencyTracker)==null||l.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=We(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),i=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(i,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:i,c:s,d:r}=this.ctx.getTransform();let o,l;if(i===0&&s===0){const c=Math.abs(t),u=Math.abs(r);if(c===u)if(e===0)o=l=1/c;else{const h=c*e;o=l=h<1?1/h:1}else if(e===0)o=1/c,l=1/u;else{const h=c*e,d=u*e;o=h<1?1/h:1,l=d<1?1/d:1}}else{const c=Math.abs(t*r-i*s),u=Math.hypot(t,i),h=Math.hypot(s,r);if(e===0)o=h/c,l=u/c;else{const d=e*c;o=h>d?h/d:1,l=u>d?u/d:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:i,current:{lineWidth:s}}=this,[r,o]=this.getScaleForStroking();if(r===o){i.lineWidth=(s||1)*r,i.stroke(e);return}const l=i.getLineDash();t&&i.save(),i.scale(r,o),Db.a=1/r,Db.d=1/o;const c=new Path2D;if(c.addPath(e,Db),l.length>0){const u=Math.max(r,o);i.setLineDash(l.map(h=>h/u)),i.lineDashOffset/=u}i.lineWidth=s||1,i.stroke(c),t&&i.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};Ep=new WeakSet,a1=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Cp=new WeakSet,l1=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},_p=new WeakSet,c1=function(e,t,i){const s=new Path2D;return s.addPath(e,new DOMMatrix(i).invertSelf().multiplySelf(t)),s};let Wc=kx;for(const n in ed)Wc.prototype[n]!==void 0&&(Wc.prototype[ed[n]]=Wc.prototype[n]);var Tu,Pu,kp,Ru,yv;const Ic=class Ic{constructor(e){p(this,Ru);p(this,Tu,void 0);p(this,Pu,void 0);p(this,kp,void 0);g(this,Tu,e),g(this,Pu,new DataView(a(this,Tu))),g(this,kp,new TextDecoder)}static write(e){const t=new TextEncoder,i={};let s=0;for(const u of Ic.strings){const h=t.encode(e[u]);i[u]=h,s+=4+h.length}const r=new ArrayBuffer(s),o=new Uint8Array(r),l=new DataView(r);let c=0;for(const u of Ic.strings){const h=i[u],d=h.length;l.setUint32(c,d),o.set(h,c+4),c+=4+d}return ue(c===r.byteLength,"CssFontInfo.write: Buffer overflow"),r}get fontFamily(){return S(this,Ru,yv).call(this,0)}get fontWeight(){return S(this,Ru,yv).call(this,1)}get italicAngle(){return S(this,Ru,yv).call(this,2)}};Tu=new WeakMap,Pu=new WeakMap,kp=new WeakMap,Ru=new WeakSet,yv=function(e){ue(e<Ic.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=a(this,Pu).getUint32(t)+4;const i=a(this,Pu).getUint32(t);return a(this,kp).decode(new Uint8Array(a(this,Tu),t+4,i))},F(Ic,"strings",["fontFamily","fontWeight","italicAngle"]);let my=Ic;var fo,ms,sl,rl,jd;const Oc=class Oc{constructor(e){p(this,rl);p(this,fo,void 0);p(this,ms,void 0);p(this,sl,void 0);g(this,fo,e),g(this,ms,new DataView(a(this,fo))),g(this,sl,new TextDecoder)}static write(e){const t=new TextEncoder,i={};let s=0;for(const f of Oc.strings){const m=t.encode(e[f]);i[f]=m,s+=4+m.length}s+=4;let r,o,l=1+s;e.style&&(r=t.encode(e.style.style),o=t.encode(e.style.weight),l+=4+r.length+4+o.length);const c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;h.setUint8(d++,e.guessFallback?1:0),h.setUint32(d,0),d+=4,s=0;for(const f of Oc.strings){const m=i[f],y=m.length;s+=4+y,h.setUint32(d,y),u.set(m,d+4),d+=4+y}return h.setUint32(d-s-4,s),e.style&&(h.setUint32(d,r.length),u.set(r,d+4),d+=4+r.length,h.setUint32(d,o.length),u.set(o,d+4),d+=4+o.length),ue(d<=c.byteLength,"SubstitionInfo.write: Buffer overflow"),c.transferToFixedLength(d)}get guessFallback(){return a(this,ms).getUint8(0)!==0}get css(){return S(this,rl,jd).call(this,0)}get loadedName(){return S(this,rl,jd).call(this,1)}get baseFontName(){return S(this,rl,jd).call(this,2)}get src(){return S(this,rl,jd).call(this,3)}get style(){let e=1;e+=4+a(this,ms).getUint32(e);const t=a(this,ms).getUint32(e),i=a(this,sl).decode(new Uint8Array(a(this,fo),e+4,t));e+=4+t;const s=a(this,ms).getUint32(e),r=a(this,sl).decode(new Uint8Array(a(this,fo),e+4,s));return{style:i,weight:r}}};fo=new WeakMap,ms=new WeakMap,sl=new WeakMap,rl=new WeakSet,jd=function(e){ue(e<Oc.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=a(this,ms).getUint32(t)+4;const i=a(this,ms).getUint32(t);return a(this,sl).decode(new Uint8Array(a(this,fo),t+4,i))},F(Oc,"strings",["css","loadedName","baseFontName","src"]);let vy=Oc;var Nu,Lu,Du,Mu,Mn,vs,Tp,Ae,Fn,Pi,Fu,wv,ol,zd;const ne=class ne{constructor({data:e,extra:t}){p(this,Fn);p(this,Fu);p(this,ol);p(this,vs,void 0);p(this,Tp,void 0);p(this,Ae,void 0);g(this,vs,e),g(this,Tp,new TextDecoder),g(this,Ae,new DataView(a(this,vs))),t&&Object.assign(this,t)}get black(){return S(this,Fn,Pi).call(this,0)}get bold(){return S(this,Fn,Pi).call(this,1)}get disableFontFace(){return S(this,Fn,Pi).call(this,2)}get fontExtraProperties(){return S(this,Fn,Pi).call(this,3)}get isInvalidPDFjsFont(){return S(this,Fn,Pi).call(this,4)}get isType3Font(){return S(this,Fn,Pi).call(this,5)}get italic(){return S(this,Fn,Pi).call(this,6)}get missingFile(){return S(this,Fn,Pi).call(this,7)}get remeasure(){return S(this,Fn,Pi).call(this,8)}get vertical(){return S(this,Fn,Pi).call(this,9)}get ascent(){return S(this,Fu,wv).call(this,0)}get defaultWidth(){return S(this,Fu,wv).call(this,1)}get descent(){return S(this,Fu,wv).call(this,2)}get bbox(){let e=a(ne,Lu);if(a(this,Ae).getUint8(e)===0)return;e+=1;const i=[];for(let s=0;s<4;s++)i.push(a(this,Ae).getInt16(e,!0)),e+=2;return i}get fontMatrix(){let e=a(ne,Du);if(a(this,Ae).getUint8(e)===0)return;e+=1;const i=[];for(let s=0;s<6;s++)i.push(a(this,Ae).getFloat64(e,!0)),e+=8;return i}get defaultVMetrics(){let e=a(ne,Mu);if(a(this,Ae).getUint8(e)===0)return;e+=1;const i=[];for(let s=0;s<3;s++)i.push(a(this,Ae).getInt16(e,!0)),e+=2;return i}get fallbackName(){return S(this,ol,zd).call(this,0)}get loadedName(){return S(this,ol,zd).call(this,1)}get mimetype(){return S(this,ol,zd).call(this,2)}get name(){return S(this,ol,zd).call(this,3)}get data(){let e=a(ne,Mn);const t=a(this,Ae).getUint32(e);e+=4+t;const i=a(this,Ae).getUint32(e);e+=4+i;const s=a(this,Ae).getUint32(e);e+=4+s;const r=a(this,Ae).getUint32(e);if(r!==0)return new Uint8Array(a(this,vs),e+4,r)}clearData(){let e=a(ne,Mn);const t=a(this,Ae).getUint32(e);e+=4+t;const i=a(this,Ae).getUint32(e);e+=4+i;const s=a(this,Ae).getUint32(e);e+=4+s;const r=a(this,Ae).getUint32(e);new Uint8Array(a(this,vs),e+4,r).fill(0),a(this,Ae).setUint32(e,0)}get cssFontInfo(){let e=a(ne,Mn);const t=a(this,Ae).getUint32(e);e+=4+t;const i=a(this,Ae).getUint32(e);e+=4+i;const s=a(this,Ae).getUint32(e);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(a(this,vs),e+4,s)),new my(r.buffer)}get systemFontInfo(){let e=a(ne,Mn);const t=a(this,Ae).getUint32(e);e+=4+t;const i=a(this,Ae).getUint32(e);if(i===0)return null;const s=new Uint8Array(i);return s.set(new Uint8Array(a(this,vs),e+4,i)),new vy(s.buffer)}static write(e){const t=e.systemFontInfo?vy.write(e.systemFontInfo):null,i=e.cssFontInfo?my.write(e.cssFontInfo):null,s=new TextEncoder,r={};let o=0;for(const w of ne.strings)r[w]=s.encode(e[w]),o+=4+r[w].length;const l=a(ne,Mn)+4+o+4+(t?t.byteLength:0)+4+(i?i.byteLength:0)+4+(e.data?e.data.length:0),c=new ArrayBuffer(l),u=new Uint8Array(c),h=new DataView(c);let d=0;const f=ne.bools.length;let m=0,y=0;for(let w=0;w<f;w++){const x=e[ne.bools[w]];m|=(x===void 0?0:x?2:1)<<y,y+=2,(y===8||w===f-1)&&(h.setUint8(d++,m),m=0,y=0)}ue(d===a(ne,Nu),"FontInfo.write: Boolean properties offset mismatch");for(const w of ne.numbers)h.setFloat64(d,e[w]),d+=8;if(ue(d===a(ne,Lu),"FontInfo.write: Number properties offset mismatch"),e.bbox){h.setUint8(d++,4);for(const w of e.bbox)h.setInt16(d,w,!0),d+=2}else h.setUint8(d++,0),d+=2*4;if(ue(d===a(ne,Du),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){h.setUint8(d++,6);for(const w of e.fontMatrix)h.setFloat64(d,w,!0),d+=8}else h.setUint8(d++,0),d+=8*6;if(ue(d===a(ne,Mu),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){h.setUint8(d++,1);for(const w of e.defaultVMetrics)h.setInt16(d,w,!0),d+=2}else h.setUint8(d++,0),d+=3*2;ue(d===a(ne,Mn),"FontInfo.write: DefaultVMetrics properties offset mismatch"),h.setUint32(a(ne,Mn),0),d+=4;for(const w of ne.strings){const x=r[w],v=x.length;h.setUint32(d,v),u.set(x,d+4),d+=4+v}if(h.setUint32(a(ne,Mn),d-a(ne,Mn)-4),!t)h.setUint32(d,0),d+=4;else{const w=t.byteLength;h.setUint32(d,w),ue(d+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),u.set(new Uint8Array(t),d+4),d+=4+w}if(!i)h.setUint32(d,0),d+=4;else{const w=i.byteLength;h.setUint32(d,w),ue(d+4+w<=c.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),u.set(new Uint8Array(i),d+4),d+=4+w}return e.data===void 0?(h.setUint32(d,0),d+=4):(h.setUint32(d,e.data.length),u.set(e.data,d+4),d+=4+e.data.length),ue(d<=c.byteLength,"FontInfo.write: Buffer overflow"),c.transferToFixedLength(d)}};Nu=new WeakMap,Lu=new WeakMap,Du=new WeakMap,Mu=new WeakMap,Mn=new WeakMap,vs=new WeakMap,Tp=new WeakMap,Ae=new WeakMap,Fn=new WeakSet,Pi=function(e){ue(e<ne.bools.length,"Invalid boolean index");const t=Math.floor(e/4),i=e*2%8,s=a(this,Ae).getUint8(t)>>i&3;return s===0?void 0:s===2},Fu=new WeakSet,wv=function(e){return ue(e<ne.numbers.length,"Invalid number index"),a(this,Ae).getFloat64(a(ne,Nu)+e*8)},ol=new WeakSet,zd=function(e){ue(e<ne.strings.length,"Invalid string index");let t=a(ne,Mn)+4;for(let r=0;r<e;r++)t+=a(this,Ae).getUint32(t)+4;const i=a(this,Ae).getUint32(t),s=new Uint8Array(i);return s.set(new Uint8Array(a(this,vs),t+4,i)),a(this,Tp).decode(s)},F(ne,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),F(ne,"numbers",["ascent","defaultWidth","descent"]),F(ne,"strings",["fallbackName","loadedName","mimetype","name"]),p(ne,Nu,Math.ceil(ne.bools.length*2/8)),p(ne,Lu,a(ne,Nu)+ne.numbers.length*8),p(ne,Du,a(ne,Lu)+1+2*4),p(ne,Mu,a(ne,Du)+1+8*6),p(ne,Mn,a(ne,Mu)+1+2*3);let u1=ne;var Pp,Rp;class Si{static get workerPort(){return a(this,Pp)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");g(this,Pp,e)}static get workerSrc(){return a(this,Rp)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");g(this,Rp,e)}}Pp=new WeakMap,Rp=new WeakMap,p(Si,Pp,null),p(Si,Rp,"");var Iu,Np;class dD{constructor({parsedData:e,rawData:t}){p(this,Iu,void 0);p(this,Np,void 0);g(this,Iu,e),g(this,Np,t)}getRaw(){return a(this,Np)}get(e){return a(this,Iu).get(e)??null}[Symbol.iterator](){return a(this,Iu).entries()}}Iu=new WeakMap,Np=new WeakMap;const wc=Symbol("INTERNAL");var Lp,Dp,Mp,Ou;class fD{constructor(e,{name:t,intent:i,usage:s,rbGroups:r}){p(this,Lp,!1);p(this,Dp,!1);p(this,Mp,!1);p(this,Ou,!0);g(this,Lp,!!(e&qn.DISPLAY)),g(this,Dp,!!(e&qn.PRINT)),this.name=t,this.intent=i,this.usage=s,this.rbGroups=r}get visible(){if(a(this,Mp))return a(this,Ou);if(!a(this,Ou))return!1;const{print:e,view:t}=this.usage;return a(this,Lp)?(t==null?void 0:t.viewState)!=="OFF":a(this,Dp)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,i=!1){e!==wc&&Te("Internal method `_setVisible` called."),g(this,Mp,i),g(this,Ou,t)}}Lp=new WeakMap,Dp=new WeakMap,Mp=new WeakMap,Ou=new WeakMap;var po,xe,Bu,ju,Fp,h1;class pD{constructor(e,t=qn.DISPLAY){p(this,Fp);p(this,po,null);p(this,xe,new Map);p(this,Bu,null);p(this,ju,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,g(this,ju,e.order);for(const i of e.groups)a(this,xe).set(i.id,new fD(t,i));if(e.baseState==="OFF")for(const i of a(this,xe).values())i._setVisible(wc,!1);for(const i of e.on)a(this,xe).get(i)._setVisible(wc,!0);for(const i of e.off)a(this,xe).get(i)._setVisible(wc,!1);g(this,Bu,this.getHash())}}isVisible(e){if(a(this,xe).size===0)return!0;if(!e)return Nw("Optional content group not defined."),!0;if(e.type==="OCG")return a(this,xe).has(e.id)?a(this,xe).get(e.id).visible:(ee(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return S(this,Fp,h1).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!a(this,xe).has(t))return ee(`Optional content group not found: ${t}`),!0;if(a(this,xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!a(this,xe).has(t))return ee(`Optional content group not found: ${t}`),!0;if(!a(this,xe).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!a(this,xe).has(t))return ee(`Optional content group not found: ${t}`),!0;if(!a(this,xe).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!a(this,xe).has(t))return ee(`Optional content group not found: ${t}`),!0;if(a(this,xe).get(t).visible)return!1}return!0}return ee(`Unknown optional content policy ${e.policy}.`),!0}return ee(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,i=!0){var r;const s=a(this,xe).get(e);if(!s){ee(`Optional content group not found: ${e}`);return}if(i&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const l of o)l!==e&&((r=a(this,xe).get(l))==null||r._setVisible(wc,!1,!0));s._setVisible(wc,!!t,!0),g(this,po,null)}setOCGState({state:e,preserveRB:t}){let i;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":i=s;continue}const r=a(this,xe).get(s);if(r)switch(i){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!r.visible,t);break}}g(this,po,null)}get hasInitialVisibility(){return a(this,Bu)===null||this.getHash()===a(this,Bu)}getOrder(){return a(this,xe).size?a(this,ju)?a(this,ju).slice():[...a(this,xe).keys()]:null}getGroup(e){return a(this,xe).get(e)||null}getHash(){if(a(this,po)!==null)return a(this,po);const e=new FT;for(const[t,i]of a(this,xe))e.update(`${t}:${i.visible}`);return g(this,po,e.hexdigest())}[Symbol.iterator](){return a(this,xe).entries()}}po=new WeakMap,xe=new WeakMap,Bu=new WeakMap,ju=new WeakMap,Fp=new WeakSet,h1=function(e){const t=e.length;if(t<2)return!0;const i=e[0];for(let s=1;s<t;s++){const r=e[s];let o;if(Array.isArray(r))o=S(this,Fp,h1).call(this,r);else if(a(this,xe).has(r))o=a(this,xe).get(r).visible;else return ee(`Optional content group not found: ${r}`),!0;switch(i){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return i==="And"};class gD{constructor(e,{disableRange:t=!1,disableStream:i=!1}){ue(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:r,progressiveDone:o,contentDispositionFilename:l}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!i,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((c,u)=>{this._onReceiveData({begin:c,chunk:u})}),e.addProgressListener((c,u)=>{this._onProgress({loaded:c,total:u})}),e.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const i=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const s=this._rangeReaders.some(function(r){return r._begin!==e?!1:(r._enqueue(i),!0)});ue(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,i,s,r;e.total===void 0?(i=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||i.call(t,{loaded:e.loaded}):(r=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||r.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){ue(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new mD(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new vD(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeReaders.slice(0))i.cancel(e);this._pdfDataRangeTransport.abort()}}class mD{constructor(e,t,i=!1,s=null){this._stream=e,this._done=i||!1,this._filename=Dw(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class vD{constructor(e,t,i){this._stream=e,this._begin=t,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function yD(n){let e=!0,t=i("filename\\*","i").exec(n);if(t){t=t[1];let h=l(t);return h=unescape(h),h=c(h),h=u(h),r(h)}if(t=o(n),t){const h=u(t);return r(h)}if(t=i("filename","i").exec(n),t){t=t[1];let h=l(t);return h=u(h),r(h)}function i(h,d){return new RegExp("(?:^|;)\\s*"+h+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function s(h,d){if(h){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const f=new TextDecoder(h,{fatal:!0}),m=dm(d);d=f.decode(m),e=!1}catch{}}return d}function r(h){return e&&/[\x80-\xff]/.test(h)&&(h=s("utf-8",h),e&&(h=s("iso-8859-1",h))),h}function o(h){const d=[];let f;const m=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=m.exec(h))!==null;){let[,w,x,v]=f;if(w=parseInt(w,10),w in d){if(w===0)break;continue}d[w]=[x,v]}const y=[];for(let w=0;w<d.length&&w in d;++w){let[x,v]=d[w];v=l(v),x&&(v=unescape(v),w===0&&(v=c(v))),y.push(v)}return y.join("")}function l(h){if(h.startsWith('"')){const d=h.slice(1).split('\\"');for(let f=0;f<d.length;++f){const m=d[f].indexOf('"');m!==-1&&(d[f]=d[f].slice(0,m),d.length=f+1),d[f]=d[f].replaceAll(/\\(.)/g,"$1")}h=d.join('"')}return h}function c(h){const d=h.indexOf("'");if(d===-1)return h;const f=h.slice(0,d),y=h.slice(d+1).replace(/^[^']*'/,"");return s(f,y)}function u(h){return!h.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(h)?h:h.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,f,m,y){if(m==="q"||m==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(w,x){return String.fromCharCode(parseInt(x,16))}),s(f,y);try{y=atob(y)}catch{}return s(f,y)})}return""}function YT(n,e){const t=new Headers;if(!n||!e||typeof e!="object")return t;for(const i in e){const s=e[i];s!==void 0&&t.append(i,s)}return t}function Mw(n){var e;return((e=URL.parse(n))==null?void 0:e.origin)??null}function qT({responseHeaders:n,isHttp:e,rangeChunkSize:t,disableRange:i}){const s={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(s.suggestedLength=r,r<=2*t)||i||!e||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function KT(n){const e=n.get("Content-Disposition");if(e){let t=yD(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(Dw(t))return t}return null}function mm(n,e){return new Ef(`Unexpected server response (${n}) while retrieving PDF "${e}".`,n,n===404||n===0&&e.startsWith("file:"))}function QT(n){return n===200||n===206}function ZT(n,e,t){return{method:"GET",headers:n,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function JT(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(ee(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class wD{constructor(e){F(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=YT(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ue(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new bD(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new SD(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class bD{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const i=new Headers(e.headers),s=t.url;fetch(s,ZT(i,this._withCredentials,this._abortController)).then(r=>{if(e._responseOrigin=Mw(r.url),!QT(r.status))throw mm(r.status,s);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=qT({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=KT(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Dr("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:JT(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class SD{constructor(e,t,i){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const r=new Headers(e.headers);r.append("Range",`bytes=${t}-${i-1}`);const o=s.url;fetch(o,ZT(r,this._withCredentials,this._abortController)).then(l=>{const c=Mw(l.url);if(c!==e._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${e._responseOrigin}".`);if(!QT(l.status))throw mm(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:JT(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const Mb=200,Fb=206;function AD(n){const e=n.response;return typeof e!="string"?e:dm(e).buffer}class xD{constructor({url:e,httpHeaders:t,withCredentials:i}){F(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=YT(this.isHttp,t),this.withCredentials=i||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,i=this.currXhrId++,s=this.pendingRequests[i]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[r,o]of this.headers)t.setRequestHeader(r,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=Fb):s.expectedStatus=Mb,t.responseType="arraybuffer",ue(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,i),t.onprogress=this.onProgress.bind(this,i),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),i}onProgress(e,t){var s;const i=this.pendingRequests[e];i&&((s=i.onProgress)==null||s.call(i,t))}onStateChange(e,t){const i=this.pendingRequests[e];if(!i)return;const s=i.xhr;if(s.readyState>=2&&i.onHeadersReceived&&(i.onHeadersReceived(),delete i.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){i.onError(s.status);return}const r=s.status||Mb;if(!(r===Mb&&i.expectedStatus===Fb)&&r!==i.expectedStatus){i.onError(s.status);return}const l=AD(s);if(r===Fb){const c=s.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);u?i.onDone({begin:parseInt(u[1],10),chunk:l}):(ee('Missing or invalid "Content-Range" header.'),i.onError(0))}else l?i.onDone({begin:0,chunk:l}):i.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ED{constructor(e){this._source=e,this._manager=new xD(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return ue(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new CD(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const i=new _D(this._manager,e,t);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class CD{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=Mw(t.responseURL);const i=t.getAllResponseHeaders(),s=new Headers(i?i.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...u]=l.split(": ");return[c,u.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=qT({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=KT(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=mm(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _D{constructor(e,t,i){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:i,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=Mw((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=mm(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const kD=/^[a-z][a-z0-9\-+.]+:/i;function TD(n){if(kD.test(n))return new URL(n);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(n))}class PD{constructor(e){this.source=e,this.url=TD(e.url),ue(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return ue(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new RD(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const i=new ND(this,e,t);return this._rangeRequestReaders.push(i),i}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const i of this._rangeRequestReaders.slice(0))i.cancel(e)}}class RD{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const i=process.getBuiltinModule("fs");i.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(i.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=mm(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Dr("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ND{constructor(e,t,i){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:t,end:i-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var i;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(i=this.onProgress)==null||i.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const wd=Symbol("INITIAL_DATA");var In,Ip,d1;class eP{constructor(){p(this,Ip);p(this,In,Object.create(null))}get(e,t=null){if(t){const s=S(this,Ip,d1).call(this,e);return s.promise.then(()=>t(s.data)),null}const i=a(this,In)[e];if(!i||i.data===wd)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return i.data}has(e){const t=a(this,In)[e];return!!t&&t.data!==wd}delete(e){const t=a(this,In)[e];return!t||t.data===wd?!1:(delete a(this,In)[e],!0)}resolve(e,t=null){const i=S(this,Ip,d1).call(this,e);i.data=t,i.resolve()}clear(){var e;for(const t in a(this,In)){const{data:i}=a(this,In)[t];(e=i==null?void 0:i.bitmap)==null||e.close()}g(this,In,Object.create(null))}*[Symbol.iterator](){for(const e in a(this,In)){const{data:t}=a(this,In)[e];t!==wd&&(yield[e,t])}}}In=new WeakMap,Ip=new WeakSet,d1=function(e){var t;return(t=a(this,In))[e]||(t[e]={...Promise.withResolvers(),data:wd})};const LD=1e5,hC=30;var MC,go,bn,Op,Bp,al,rr,jp,zp,ll,zu,Uu,mo,Hu,Up,$u,cl,Hp,$p,Ue,Vu,ul,Vp,vo,Wu,c0,tP,u0,nP,Wp,f1,Xu,bv,Xp,p1,h0,iP,d0,sP;let Tf=(Ue=class{constructor({textContentSource:e,container:t,viewport:i}){p(this,c0);p(this,u0);p(this,Wp);p(this,go,Promise.withResolvers());p(this,bn,null);p(this,Op,!1);p(this,Bp,!!((MC=globalThis.FontInspector)!=null&&MC.enabled));p(this,al,null);p(this,rr,null);p(this,jp,0);p(this,zp,0);p(this,ll,null);p(this,zu,null);p(this,Uu,0);p(this,mo,0);p(this,Hu,Object.create(null));p(this,Up,[]);p(this,$u,null);p(this,cl,[]);p(this,Hp,new WeakMap);p(this,$p,null);var c;if(e instanceof ReadableStream)g(this,$u,e);else if(typeof e=="object")g(this,$u,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');g(this,bn,g(this,zu,t)),g(this,mo,i.scale*Zi.pixelRatio),g(this,Uu,i.rotation),g(this,rr,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:r,pageX:o,pageY:l}=i.rawDims;g(this,$p,[1,0,0,-1,-o,l+r]),g(this,zp,s),g(this,jp,r),S(c=Ue,h0,iP).call(c),ia(t,i),a(this,go).promise.finally(()=>{a(Ue,Wu).delete(this),g(this,rr,null),g(this,Hu,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=kt.platform;return ie(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{a(this,ll).read().then(({value:t,done:i})=>{if(i){a(this,go).resolve();return}a(this,al)??g(this,al,t.lang),Object.assign(a(this,Hu),t.styles),S(this,c0,tP).call(this,t.items),e()},a(this,go).reject)};return g(this,ll,a(this,$u).getReader()),a(Ue,Wu).add(this),e(),a(this,go).promise}update({viewport:e,onBefore:t=null}){var r;const i=e.scale*Zi.pixelRatio,s=e.rotation;if(s!==a(this,Uu)&&(t==null||t(),g(this,Uu,s),ia(a(this,zu),{rotation:s})),i!==a(this,mo)){t==null||t(),g(this,mo,i);const o={div:null,properties:null,ctx:S(r=Ue,Xu,bv).call(r,a(this,al))};for(const l of a(this,cl))o.properties=a(this,Hp).get(l),o.div=l,S(this,Wp,f1).call(this,o)}}cancel(){var t;const e=new Dr("TextLayer task cancelled.");(t=a(this,ll))==null||t.cancel(e).catch(()=>{}),g(this,ll,null),a(this,go).reject(e)}get textDivs(){return a(this,cl)}get textContentItemsStr(){return a(this,Up)}static cleanup(){if(!(a(this,Wu).size>0)){a(this,Vu).clear();for(const{canvas:e}of a(this,ul).values())e.remove();a(this,ul).clear()}}},go=new WeakMap,bn=new WeakMap,Op=new WeakMap,Bp=new WeakMap,al=new WeakMap,rr=new WeakMap,jp=new WeakMap,zp=new WeakMap,ll=new WeakMap,zu=new WeakMap,Uu=new WeakMap,mo=new WeakMap,Hu=new WeakMap,Up=new WeakMap,$u=new WeakMap,cl=new WeakMap,Hp=new WeakMap,$p=new WeakMap,Vu=new WeakMap,ul=new WeakMap,Vp=new WeakMap,vo=new WeakMap,Wu=new WeakMap,c0=new WeakSet,tP=function(e){var s,r;if(a(this,Op))return;(r=a(this,rr)).ctx??(r.ctx=S(s=Ue,Xu,bv).call(s,a(this,al)));const t=a(this,cl),i=a(this,Up);for(const o of e){if(t.length>LD){ee("Ignoring additional textDivs for performance reasons."),g(this,Op,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,bn);g(this,bn,document.createElement("span")),a(this,bn).classList.add("markedContent"),o.id&&a(this,bn).setAttribute("id",`${o.id}`),l.append(a(this,bn))}else o.type==="endMarkedContent"&&g(this,bn,a(this,bn).parentNode);continue}i.push(o.str),S(this,u0,nP).call(this,o)}},u0=new WeakSet,nP=function(e){var w;const t=document.createElement("span"),i={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};a(this,cl).push(t);const s=V.transform(a(this,$p),e.transform);let r=Math.atan2(s[1],s[0]);const o=a(this,Hu)[e.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,Bp)&&o.fontSubstitution||o.fontFamily;l=Ue.fontFamilyMap.get(l)||l;const c=Math.hypot(s[2],s[3]),u=c*S(w=Ue,d0,sP).call(w,l,o,a(this,al));let h,d;r===0?(h=s[4],d=s[5]-u):(h=s[4]+u*Math.sin(r),d=s[5]-u*Math.cos(r));const f="calc(var(--total-scale-factor) *",m=t.style;a(this,bn)===a(this,zu)?(m.left=`${(100*h/a(this,zp)).toFixed(2)}%`,m.top=`${(100*d/a(this,jp)).toFixed(2)}%`):(m.left=`${f}${h.toFixed(2)}px)`,m.top=`${f}${d.toFixed(2)}px)`),m.fontSize=`${f}${(a(Ue,vo)*c).toFixed(2)}px)`,m.fontFamily=l,i.fontSize=c,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,a(this,Bp)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),r!==0&&(i.angle=r*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const x=Math.abs(e.transform[0]),v=Math.abs(e.transform[3]);x!==v&&Math.max(x,v)/Math.min(x,v)>1.5&&(y=!0)}if(y&&(i.canvasWidth=o.vertical?e.height:e.width),a(this,Hp).set(t,i),a(this,rr).div=t,a(this,rr).properties=i,S(this,Wp,f1).call(this,a(this,rr)),i.hasText&&a(this,bn).append(t),i.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),a(this,bn).append(x)}},Wp=new WeakSet,f1=function(e){var l;const{div:t,properties:i,ctx:s}=e,{style:r}=t;let o="";if(a(Ue,vo)>1&&(o=`scale(${1/a(Ue,vo)})`),i.canvasWidth!==0&&i.hasText){const{fontFamily:c}=r,{canvasWidth:u,fontSize:h}=i;S(l=Ue,Xp,p1).call(l,s,h*a(this,mo),c);const{width:d}=s.measureText(t.textContent);d>0&&(o=`scaleX(${u*a(this,mo)/d}) ${o}`)}i.angle!==0&&(o=`rotate(${i.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Xu=new WeakSet,bv=function(e=null){let t=a(this,ul).get(e||(e=""));if(!t){const i=document.createElement("canvas");i.className="hiddenCanvasElement",i.lang=e,document.body.append(i),t=i.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,ul).set(e,t),a(this,Vp).set(t,{size:0,family:""})}return t},Xp=new WeakSet,p1=function(e,t,i){const s=a(this,Vp).get(e);t===s.size&&i===s.family||(e.font=`${t}px ${i}`,s.size=t,s.family=i)},h0=new WeakSet,iP=function(){if(a(this,vo)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),g(this,vo,e.getBoundingClientRect().height),e.remove()},d0=new WeakSet,sP=function(e,t,i){const s=a(this,Vu).get(e);if(s)return s;const r=S(this,Xu,bv).call(this,i);r.canvas.width=r.canvas.height=hC,S(this,Xp,p1).call(this,r,hC,e);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let u=.8;return l?u=l/(l+c):(kt.platform.isFirefox&&ee("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?u=t.ascent:t.descent&&(u=1+t.descent)),a(this,Vu).set(e,u),u},p(Ue,Xu),p(Ue,Xp),p(Ue,h0),p(Ue,d0),p(Ue,Vu,new Map),p(Ue,ul,new Map),p(Ue,Vp,new WeakMap),p(Ue,vo,null),p(Ue,Wu,new Set),Ue);const DD=100;function dx(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const e=new g1,{docId:t}=e,i=n.url?UL(n.url):null,s=n.data?HL(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,l=n.password??null,c=n.range instanceof fx?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:2**16;let h=n.worker instanceof td?n.worker:null;const d=n.verbosity,f=typeof n.docBaseUrl=="string"&&!pm(n.docBaseUrl)?n.docBaseUrl:null,m=Hm(n.cMapUrl),y=n.cMapPacked!==!1,w=n.CMapReaderFactory||(an?qL:QE),x=Hm(n.iccUrl),v=Hm(n.standardFontDataUrl),b=n.StandardFontDataFactory||(an?KL:ZE),A=Hm(n.wasmUrl),E=n.WasmFactory||(an?QL:JE),_=n.stopAtErrors!==!0,k=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,T=n.isEvalSupported!==!1,P=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!an,N=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!an&&(kt.platform.isFirefox||!globalThis.chrome),R=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,L=typeof n.disableFontFace=="boolean"?n.disableFontFace:an,O=n.fontExtraProperties===!0,$=n.enableXfa===!0,U=n.ownerDocument||globalThis.document,Q=n.disableRange===!0,j=n.disableStream===!0,B=n.disableAutoFetch===!0,D=n.pdfBug===!0,z=n.CanvasFactory||(an?YL:WL),Y=n.FilterFactory||(an?GL:XL),Z=n.enableHWA===!0,K=n.useWasm!==!1,H=c?c.length:n.length??NaN,fe=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!an&&!L,Me=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(w===QE&&b===ZE&&E===JE&&m&&v&&A&&Td(m,document.baseURI)&&Td(v,document.baseURI)&&Td(A,document.baseURI)),Ee=null;AL(d);const re={canvasFactory:new z({ownerDocument:U,enableHWA:Z}),filterFactory:new Y({docId:t,ownerDocument:U}),cMapReaderFactory:Me?null:new w({baseUrl:m,isCompressed:y}),standardFontDataFactory:Me?null:new b({baseUrl:v}),wasmFactory:Me?null:new E({baseUrl:A})};h||(h=td.create({verbosity:d,port:Si.workerPort}),e._worker=h);const dn={docId:t,apiVersion:"5.4.296",data:s,password:l,disableAutoFetch:B,rangeChunkSize:u,length:H,docBaseUrl:f,enableXfa:$,evaluatorOptions:{maxImageSize:k,disableFontFace:L,ignoreErrors:_,isEvalSupported:T,isOffscreenCanvasSupported:P,isImageDecoderSupported:N,canvasMaxAreaInBytes:R,fontExtraProperties:O,useSystemFonts:fe,useWasm:K,useWorkerFetch:Me,cMapUrl:m,iccUrl:x,standardFontDataUrl:v,wasmUrl:A}},Tt={ownerDocument:U,pdfBug:D,styleElement:Ee,loadingParams:{disableAutoFetch:B,enableXfa:$}};return h.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const rt=h.messageHandler.sendWithPromise("GetDocRequest",dn,s?[s.buffer]:null);let oe;if(c)oe=new gD(c,{disableRange:Q,disableStream:j});else if(!s){if(!i)throw new Error("getDocument - no `url` parameter provided.");const Pn=Td(i)?wD:an?PD:ED;oe=new Pn({url:i,length:H,httpHeaders:r,withCredentials:o,rangeChunkSize:u,disableRange:Q,disableStream:j})}return rt.then(Pn=>{if(e.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const ye=new Md(t,Pn,h.port),we=new ID(ye,e,oe,Tt,re,Z);e._transport=we,ye.send("Ready",null)})}).catch(e._capability.reject),e}var f0;const p0=class p0{constructor(){F(this,"_capability",Promise.withResolvers());F(this,"_transport",null);F(this,"_worker",null);F(this,"docId",`d${ht(p0,f0)._++}`);F(this,"destroyed",!1);F(this,"onPassword",null);F(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,i,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(r){throw(i=this._worker)!=null&&i.port&&delete this._worker._pendingDestroy,r}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};f0=new WeakMap,p(p0,f0,0);let g1=p0;var hl,Gp,Yp,qp,Kp,FC;let fx=(FC=class{constructor(e,t,i=!1,s=null){p(this,hl,Promise.withResolvers());p(this,Gp,[]);p(this,Yp,[]);p(this,qp,[]);p(this,Kp,[]);this.length=e,this.initialData=t,this.progressiveDone=i,this.contentDispositionFilename=s}addRangeListener(e){a(this,Kp).push(e)}addProgressListener(e){a(this,qp).push(e)}addProgressiveReadListener(e){a(this,Yp).push(e)}addProgressiveDoneListener(e){a(this,Gp).push(e)}onDataRange(e,t){for(const i of a(this,Kp))i(e,t)}onDataProgress(e,t){a(this,hl).promise.then(()=>{for(const i of a(this,qp))i(e,t)})}onDataProgressiveRead(e){a(this,hl).promise.then(()=>{for(const t of a(this,Yp))t(e)})}onDataProgressiveDone(){a(this,hl).promise.then(()=>{for(const e of a(this,Gp))e()})}transportReady(){a(this,hl).resolve()}requestDataRange(e,t){Te("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},hl=new WeakMap,Gp=new WeakMap,Yp=new WeakMap,qp=new WeakMap,Kp=new WeakMap,FC);class MD{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ie(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var or,dl,Ud;class FD{constructor(e,t,i,s=!1){p(this,dl);p(this,or,!1);this._pageIndex=e,this._pageInfo=t,this._transport=i,this._stats=s?new VE:null,this._pdfBug=s,this.commonObjs=i.commonObjs,this.objs=new eP,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:i=0,offsetY:s=0,dontFlip:r=!1}={}){return new fm({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:i,offsetY:s,dontFlip:r})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ie(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:i,intent:s="display",annotationMode:r=Rs.ENABLE,transform:o=null,background:l=null,optionalContentConfigPromise:c=null,annotationCanvasMap:u=null,pageColors:h=null,printAnnotationStorage:d=null,isEditing:f=!1,recordOperations:m=!1,operationsFilter:y=null}){var N,R,L;(N=this._stats)==null||N.time("Overall");const w=this._transport.getRenderingIntent(s,r,d,f),{renderingIntent:x,cacheKey:v}=w;g(this,or,!1),c||(c=this._transport.getOptionalContentConfig(x));let b=this._intentStates.get(v);b||(b=Object.create(null),this._intentStates.set(v,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const A=!!(x&qn.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(w));const E=!!(this._pdfBug&&((L=globalThis.StepperManager)!=null&&L.enabled)),_=!this.recordedBBoxes&&(m||E),k=O=>{var $,U;if(b.renderTasks.delete(T),_){const Q=($=T.gfx)==null?void 0:$.dependencyTracker.take();Q&&(T.stepper&&T.stepper.setOperatorBBoxes(Q,T.gfx.dependencyTracker.takeDebugMetadata()),m&&(this.recordedBBoxes=Q))}A&&g(this,or,!0),S(this,dl,Ud).call(this),O?(T.capability.reject(O),this._abortOperatorList({intentState:b,reason:O instanceof Error?O:new Error(O)})):T.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(U=globalThis.Stats)!=null&&U.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},T=new m1({callback:k,params:{canvas:t,canvasContext:e,dependencyTracker:_?new JL(t,b.operatorList.length,E):null,viewport:i,transform:o,background:l},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:u,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!A,pdfBug:this._pdfBug,pageColors:h,enableHWA:this._transport.enableHWA,operationsFilter:y});(b.renderTasks||(b.renderTasks=new Set)).add(T);const P=T.task;return Promise.all([b.displayReadyCapability.promise,c]).then(([O,$])=>{var U;if(this.destroyed){k();return}if((U=this._stats)==null||U.time("Rendering"),!($.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");T.initializeGraphics({transparency:O,optionalContentConfig:$}),T.operatorListChanged()}).catch(k),P}getOperatorList({intent:e="display",annotationMode:t=Rs.ENABLE,printAnnotationStorage:i=null,isEditing:s=!1}={}){var u;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(e,t,i,s,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(i=>Cf.textContent(i));const t=this.streamTextContent(e);return new Promise(function(i,s){function r(){o.read().then(function({value:c,done:u}){if(u){i(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},s)}const o=t.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const i of t.renderTasks)e.push(i.completed),i.cancel();return this.objs.clear(),g(this,or,!1),Promise.all(e)}cleanup(e=!1){g(this,or,!0);const t=S(this,dl,Ud).call(this);return e&&t&&this._stats&&(this._stats=new VE),t}_startRenderPage(e,t){var s,r;const i=this._intentStates.get(t);i&&((s=this._stats)==null||s.timeEnd("Page Request"),(r=i.displayReadyCapability)==null||r.resolve(e))}_renderPageChunk(e,t){for(let i=0,s=e.length;i<s;i++)t.operatorList.fnArray.push(e.fnArray[i]),t.operatorList.argsArray.push(e.argsArray[i]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const i of t.renderTasks)i.operatorListChanged();e.lastChunk&&S(this,dl,Ud).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:i,modifiedIds:s}){const{map:r,transfer:o}=i,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:r,modifiedIds:s},o).getReader(),u=this._intentStates.get(t);u.streamReader=c;const h=()=>{c.read().then(({value:d,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,u),h())},d=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();S(this,dl,Ud).call(this)}if(u.displayReadyCapability)u.displayReadyCapability.reject(d);else if(u.opListReadCapability)u.opListReadCapability.reject(d);else throw d}})};h()}_abortOperatorList({intentState:e,reason:t,force:i=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!i){if(e.renderTasks.size>0)return;if(t instanceof Lw){let s=DD;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new Dr(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,r]of this._intentStates)if(r===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}or=new WeakMap,dl=new WeakSet,Ud=function(){if(!a(this,or)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),g(this,or,!1),!0};var yo,Bi,ar,fl,g0,pl,gl,Gu,Sv,m0,rP,v0,oP,ml,Hd,Yu,Av;const Oe=class Oe{constructor({name:e=null,port:t=null,verbosity:i=xL()}={}){p(this,Gu);p(this,m0);p(this,v0);p(this,ml);p(this,yo,Promise.withResolvers());p(this,Bi,null);p(this,ar,null);p(this,fl,null);if(this.name=e,this.destroyed=!1,this.verbosity=i,t){if(a(Oe,gl).has(t))throw new Error("Cannot use more than one PDFWorker per port.");a(Oe,gl).set(t,this),S(this,m0,rP).call(this,t)}else S(this,v0,oP).call(this)}get promise(){return a(this,yo).promise}get port(){return a(this,ar)}get messageHandler(){return a(this,Bi)}destroy(){var e,t;this.destroyed=!0,(e=a(this,fl))==null||e.terminate(),g(this,fl,null),a(Oe,gl).delete(a(this,ar)),g(this,ar,null),(t=a(this,Bi))==null||t.destroy(),g(this,Bi,null)}static create(e){const t=a(this,gl).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Oe(e)}static get workerSrc(){if(Si.workerSrc)return Si.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ie(this,"_setupFakeWorkerGlobal",(async()=>a(this,Yu,Av)?a(this,Yu,Av):(await SL(()=>import(this.workerSrc),[])).WorkerMessageHandler)())}};yo=new WeakMap,Bi=new WeakMap,ar=new WeakMap,fl=new WeakMap,g0=new WeakMap,pl=new WeakMap,gl=new WeakMap,Gu=new WeakSet,Sv=function(){a(this,yo).resolve(),a(this,Bi).send("configure",{verbosity:this.verbosity})},m0=new WeakSet,rP=function(e){g(this,ar,e),g(this,Bi,new Md("main","worker",e)),a(this,Bi).on("ready",()=>{}),S(this,Gu,Sv).call(this)},v0=new WeakSet,oP=function(){if(a(Oe,pl)||a(Oe,Yu,Av)){S(this,ml,Hd).call(this);return}let{workerSrc:e}=Oe;try{Oe._isSameOrigin(window.location,e)||(e=Oe._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),i=new Md("main","worker",t),s=()=>{r.abort(),i.destroy(),t.terminate(),this.destroyed?a(this,yo).reject(new Error("Worker was destroyed")):S(this,ml,Hd).call(this)},r=new AbortController;t.addEventListener("error",()=>{a(this,fl)||s()},{signal:r.signal}),i.on("test",l=>{if(r.abort(),this.destroyed||!l){s();return}g(this,Bi,i),g(this,ar,t),g(this,fl,t),S(this,Gu,Sv).call(this)}),i.on("ready",l=>{if(r.abort(),this.destroyed){s();return}try{o()}catch{S(this,ml,Hd).call(this)}});const o=()=>{const l=new Uint8Array;i.send("test",l,[l.buffer])};o();return}catch{Nw("The worker has been disabled.")}S(this,ml,Hd).call(this)},ml=new WeakSet,Hd=function(){a(Oe,pl)||(ee("Setting up fake worker."),g(Oe,pl,!0)),Oe._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){a(this,yo).reject(new Error("Worker was destroyed"));return}const t=new VL;g(this,ar,t);const i=`fake${ht(Oe,g0)._++}`,s=new Md(i+"_worker",i,t);e.setup(s,t),g(this,Bi,new Md(i,i+"_worker",t)),S(this,Gu,Sv).call(this)}).catch(e=>{a(this,yo).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},Yu=new WeakSet,Av=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},p(Oe,Yu),p(Oe,g0,0),p(Oe,pl,!1),p(Oe,gl,new WeakMap),an&&(g(Oe,pl,!0),Si.workerSrc||(Si.workerSrc="./pdf.worker.mjs")),Oe._isSameOrigin=(e,t)=>{const i=URL.parse(e);if(!(i!=null&&i.origin)||i.origin==="null")return!1;const s=new URL(t,i);return i.origin===s.origin},Oe._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},Oe.fromPort=e=>{if(LL("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Oe.create(e)};let td=Oe;var lr,ys,qu,Ku,cr,vl,$d;class ID{constructor(e,t,i,s,r,o){p(this,vl);p(this,lr,new Map);p(this,ys,new Map);p(this,qu,new Map);p(this,Ku,new Map);p(this,cr,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new eP,this.fontLoader=new jL({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return ie(this,"annotationStorage",new cx)}getRenderingIntent(e,t=Rs.ENABLE,i=null,s=!1,r=!1){let o=qn.DISPLAY,l=JS;switch(e){case"any":o=qn.ANY;break;case"display":break;case"print":o=qn.PRINT;break;default:ee(`getRenderingIntent - invalid intent: ${e}`)}const c=o&qn.PRINT&&i instanceof OT?i:this.annotationStorage;switch(t){case Rs.DISABLE:o+=qn.ANNOTATIONS_DISABLE;break;case Rs.ENABLE:break;case Rs.ENABLE_FORMS:o+=qn.ANNOTATIONS_FORMS;break;case Rs.ENABLE_STORAGE:o+=qn.ANNOTATIONS_STORAGE,l=c.serializable;break;default:ee(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=qn.IS_EDITING),r&&(o+=qn.OPLIST);const{ids:u,hash:h}=c.modifiedIds,d=[o,l.hash,h];return{renderingIntent:o,cacheKey:d.join("_"),annotationStorageSerializable:l,modifiedIds:u}}destroy(){var i;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(i=a(this,cr))==null||i.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of a(this,ys).values())e.push(s._destroy());a(this,ys).clear(),a(this,qu).clear(),a(this,Ku).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,lr).clear(),this.filterFactory.destroy(),Tf.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new Dr("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(i,s)=>{ue(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},s.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){s.close();return}ue(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{s.error(r)})},s.onCancel=r=>{this._fullReader.cancel(r),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async i=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:r,contentLength:o}=this._fullReader;return(!s||!r)&&(this._lastProgress&&((l=t.onProgress)==null||l.call(t,this._lastProgress)),this._fullReader.onProgress=c=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:s,isRangeSupported:r,contentLength:o}}),e.on("GetRangeReader",(i,s)=>{ue(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(i.begin,i.end);if(!r){s.close();return}s.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){s.close();return}ue(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{r.cancel(o),s.ready.catch(l=>{if(!this.destroyed)throw l})}}),e.on("GetDoc",({pdfInfo:i})=>{this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,t._capability.resolve(new MD(i,this))}),e.on("DocException",i=>{t._capability.reject(pn(i))}),e.on("PasswordRequest",i=>{g(this,cr,Promise.withResolvers());try{if(!t.onPassword)throw pn(i);const s=r=>{r instanceof Error?a(this,cr).reject(r):a(this,cr).resolve({password:r})};t.onPassword(s,i.code)}catch(s){a(this,cr).reject(s)}return a(this,cr).promise}),e.on("DataLoaded",i=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:i.length,total:i.length}),this.downloadInfoCapability.resolve(i)}),e.on("StartRenderPage",i=>{if(this.destroyed)return;a(this,ys).get(i.pageIndex)._startRenderPage(i.transparency,i.cacheKey)}),e.on("commonobj",([i,s,r])=>{var o;if(this.destroyed||this.commonObjs.has(i))return null;switch(s){case"Font":if("error"in r){const d=r.error;ee(`Error during font loading: ${d}`),this.commonObjs.resolve(i,d);break}const l=new u1(r),c=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(d,f)=>globalThis.FontInspector.fontAdded(d,f):null,u=new zL(l,c,r.extra,r.charProcOperatorList);this.fontLoader.bind(u).catch(()=>e.sendWithPromise("FontFallback",{id:i})).finally(()=>{!u.fontExtraProperties&&u.data&&u.clearData(),this.commonObjs.resolve(i,u)});break;case"CopyLocalImage":const{imageRef:h}=r;ue(h,"The imageRef must be defined.");for(const d of a(this,ys).values())for(const[,f]of d.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(i,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(i,r);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([i,s,r,o])=>{var c;if(this.destroyed)return;const l=a(this,ys).get(s);if(!l.objs.has(i)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(i,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),e.on("DocProgress",i=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:i.loaded,total:i.total})}),e.on("FetchBinaryData",async i=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[i.type];if(!s)throw new Error(`${i.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(i)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var i;this.annotationStorage.size<=0&&ee("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((i=this._fullReader)==null?void 0:i.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,i=a(this,qu).get(t);if(i)return i;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,Ku).set(r.refStr,e);const o=new FD(t,r,this,this._params.pdfBug);return a(this,ys).set(t,o),o});return a(this,qu).set(t,s),s}getPageIndex(e){return e1(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return S(this,vl,$d).call(this,"GetFieldObjects")}hasJSActions(){return S(this,vl,$d).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return S(this,vl,$d).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return S(this,vl,$d).call(this,"GetOptionalContentConfig").then(t=>new pD(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=a(this,lr).get(e);if(t)return t;const i=this.messageHandler.sendWithPromise(e,null).then(s=>{var r,o;return{info:s[0],metadata:s[1]?new dD(s[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,lr).set(e,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of a(this,ys).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),a(this,lr).clear(),this.filterFactory.destroy(!0),Tf.cleanup()}}cachedPageNumber(e){if(!e1(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return a(this,Ku).get(t)??null}}lr=new WeakMap,ys=new WeakMap,qu=new WeakMap,Ku=new WeakMap,cr=new WeakMap,vl=new WeakSet,$d=function(e,t=null){const i=a(this,lr).get(e);if(i)return i;const s=this.messageHandler.sendWithPromise(e,t);return a(this,lr).set(e,s),s};var wo;class OD{constructor(e){p(this,wo,null);F(this,"onContinue",null);F(this,"onError",null);g(this,wo,e)}get promise(){return a(this,wo).capability.promise}cancel(e=0){a(this,wo).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=a(this,wo).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=a(this,wo);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}wo=new WeakMap;var bo,yl;const ya=class ya{constructor({callback:e,params:t,objs:i,commonObjs:s,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:u,useRequestAnimationFrame:h=!1,pdfBug:d=!1,pageColors:f=null,enableHWA:m=!1,operationsFilter:y=null}){p(this,bo,null);this.callback=e,this.params=t,this.objs=i,this.commonObjs=s,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=u,this._pdfBug=d,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=h===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new OD(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=m,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=y}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var c,u;if(this.cancelled)return;if(this._canvas){if(a(ya,yl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(ya,yl).add(this._canvas)}this._pdfBug&&((c=globalThis.StepperManager)!=null&&c.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:i,transform:s,background:r,dependencyTracker:o}=this.params,l=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new Wc(l,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:i,transparency:e,background:r}),this.operatorListIdx=0,this.graphicsReady=!0,(u=this.graphicsReadyCallback)==null||u.call(this)}cancel(e=null,t=0){var i,s,r;this.running=!1,this.cancelled=!0,(i=this.gfx)==null||i.endDrawing(),a(this,bo)&&(window.cancelAnimationFrame(a(this,bo)),g(this,bo,null)),a(ya,yl).delete(this._canvas),e||(e=new Lw(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(r=(s=this.task).onError)==null||r.call(s,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?g(this,bo,window.requestAnimationFrame(()=>{g(this,bo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(ya,yl).delete(this._canvas),this.callback())))}};bo=new WeakMap,yl=new WeakMap,p(ya,yl,new WeakSet);let m1=ya;const px="5.4.296",aP="f56dc8601";var On,wl,Qu,pt,Qp,Zu,ur,Zp,So,ji,Jp,eg,v1,tg,y1,ng,w1,hr,pa,y0,lP,ws,Br;const gn=class gn{constructor({editor:e=null,uiManager:t=null}){p(this,eg);p(this,tg);p(this,ng);p(this,hr);p(this,y0);p(this,ws);p(this,On,null);p(this,wl,null);p(this,Qu,void 0);p(this,pt,null);p(this,Qp,!1);p(this,Zu,!1);p(this,ur,null);p(this,Zp,void 0);p(this,So,null);p(this,ji,null);var i,s;e?(g(this,Zu,!1),g(this,ur,e)):g(this,Zu,!0),g(this,ji,(e==null?void 0:e._uiManager)||t),g(this,Zp,a(this,ji)._eventBus),g(this,Qu,((i=e==null?void 0:e.color)==null?void 0:i.toUpperCase())||((s=a(this,ji))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(gn,Jp)||g(gn,Jp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ie(this,"_keyboardManager",new gm([[["Escape","mac+Escape"],gn.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],gn.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],gn.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],gn.prototype._moveToPrevious],[["Home","mac+Home"],gn.prototype._moveToBeginning],[["End","mac+End"],gn.prototype._moveToEnd]]))}renderButton(){const e=g(this,On,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",a(this,ur)&&(e.ariaControls=`${a(this,ur).id}_colorpicker_dropdown`);const t=a(this,ji)._signal;e.addEventListener("click",S(this,hr,pa).bind(this),{signal:t}),e.addEventListener("keydown",S(this,ng,w1).bind(this),{signal:t});const i=g(this,wl,document.createElement("span"));return i.className="swatch",i.ariaHidden="true",i.style.backgroundColor=a(this,Qu),e.append(i),e}renderMainDropdown(){const e=g(this,pt,S(this,eg,v1).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===a(this,On)){S(this,hr,pa).call(this,e);return}const t=e.target.getAttribute("data-color");t&&S(this,tg,y1).call(this,t,e)}_moveToNext(e){var t,i;if(!a(this,ws,Br)){S(this,hr,pa).call(this,e);return}if(e.target===a(this,On)){(t=a(this,pt).firstChild)==null||t.focus();return}(i=e.target.nextSibling)==null||i.focus()}_moveToPrevious(e){var t,i;if(e.target===((t=a(this,pt))==null?void 0:t.firstChild)||e.target===a(this,On)){a(this,ws,Br)&&this._hideDropdownFromKeyboard();return}a(this,ws,Br)||S(this,hr,pa).call(this,e),(i=e.target.previousSibling)==null||i.focus()}_moveToBeginning(e){var t;if(!a(this,ws,Br)){S(this,hr,pa).call(this,e);return}(t=a(this,pt).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!a(this,ws,Br)){S(this,hr,pa).call(this,e);return}(t=a(this,pt).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=a(this,pt))==null||e.classList.add("hidden"),a(this,On).ariaExpanded="false",(t=a(this,So))==null||t.abort(),g(this,So,null)}_hideDropdownFromKeyboard(){var e;if(!a(this,Zu)){if(!a(this,ws,Br)){(e=a(this,ur))==null||e.unselect();return}this.hideDropdown(),a(this,On).focus({preventScroll:!0,focusVisible:a(this,Qp)})}}updateColor(e){if(a(this,wl)&&(a(this,wl).style.backgroundColor=e),!a(this,pt))return;const t=a(this,ji).highlightColors.values();for(const i of a(this,pt).children)i.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=a(this,On))==null||e.remove(),g(this,On,null),g(this,wl,null),(t=a(this,pt))==null||t.remove(),g(this,pt,null)}};On=new WeakMap,wl=new WeakMap,Qu=new WeakMap,pt=new WeakMap,Qp=new WeakMap,Zu=new WeakMap,ur=new WeakMap,Zp=new WeakMap,So=new WeakMap,ji=new WeakMap,Jp=new WeakMap,eg=new WeakSet,v1=function(){const e=document.createElement("div"),t=a(this,ji)._signal;e.addEventListener("contextmenu",ti,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),a(this,ur)&&(e.id=`${a(this,ur).id}_colorpicker_dropdown`);for(const[i,s]of a(this,ji).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",s),r.title=i,r.setAttribute("data-l10n-id",a(gn,Jp)[i]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=s,r.ariaSelected=s===a(this,Qu),r.addEventListener("click",S(this,tg,y1).bind(this,s),{signal:t}),e.append(r)}return e.addEventListener("keydown",S(this,ng,w1).bind(this),{signal:t}),e},tg=new WeakSet,y1=function(e,t){t.stopPropagation(),a(this,Zp).dispatch("switchannotationeditorparams",{source:this,type:le.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},ng=new WeakSet,w1=function(e){gn._keyboardManager.exec(this,e)},hr=new WeakSet,pa=function(e){if(a(this,ws,Br)){this.hideDropdown();return}if(g(this,Qp,e.detail===0),a(this,So)||(g(this,So,new AbortController),window.addEventListener("pointerdown",S(this,y0,lP).bind(this),{signal:a(this,ji).combinedSignal(a(this,So))})),a(this,On).ariaExpanded="true",a(this,pt)){a(this,pt).classList.remove("hidden");return}const t=g(this,pt,S(this,eg,v1).call(this));a(this,On).append(t)},y0=new WeakSet,lP=function(e){var t;(t=a(this,pt))!=null&&t.contains(e.target)||this.hideDropdown()},ws=new WeakSet,Br=function(){return a(this,pt)&&!a(this,pt).classList.contains("hidden")},p(gn,Jp,null);let Pf=gn;var bs,ig,Ju,sg;const wa=class wa{constructor(e){p(this,bs,null);p(this,ig,null);p(this,Ju,null);g(this,ig,e),g(this,Ju,e._uiManager),a(wa,sg)||g(wa,sg,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(a(this,bs))return a(this,bs);const{editorType:e,colorType:t,colorValue:i}=a(this,ig),s=g(this,bs,document.createElement("input"));return s.type="color",s.value=i||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",a(wa,sg)[e]),s.addEventListener("input",()=>{a(this,Ju).updateParams(t,s.value)},{signal:a(this,Ju)._signal}),s}update(e){a(this,bs)&&(a(this,bs).value=e)}destroy(){var e;(e=a(this,bs))==null||e.remove(),g(this,bs,null)}hideDropdown(){}};bs=new WeakMap,ig=new WeakMap,Ju=new WeakMap,sg=new WeakMap,p(wa,sg,null);let yy=wa;function dC(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function bd(n){return Math.max(0,Math.min(255,255*n))}class fC{static CMYK_G([e,t,i,s]){return["G",1-Math.min(1,.3*e+.59*i+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=bd(e),[e,e,e]}static G_HTML([e]){const t=dC(e);return`#${t}${t}${t}`}static RGB_G([e,t,i]){return["G",.3*e+.59*t+.11*i]}static RGB_rgb(e){return e.map(bd)}static RGB_HTML(e){return`#${e.map(dC).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,i,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,i+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,i,s]){return[bd(1-Math.min(1,e+s)),bd(1-Math.min(1,i+s)),bd(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,i]){const s=1-e,r=1-t,o=1-i,l=Math.min(s,r,o);return["CMYK",s,r,o,l]}}class BD{create(e,t,i=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),i||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Te("Abstract method `_createSVG` called.")}}class Rf extends BD{_createSVG(e){return document.createElementNS(Fs,e)}}const jD=9,rc=new WeakSet,zD=new Date().getTimezoneOffset()*60*1e3;class pC{static create(e){switch(e.data.annotationType){case tt.LINK:return new gx(e);case tt.TEXT:return new HD(e);case tt.WIDGET:switch(e.data.fieldType){case"Tx":return new $D(e);case"Btn":return e.data.radioButton?new hP(e):e.data.checkBox?new WD(e):new XD(e);case"Ch":return new GD(e);case"Sig":return new VD(e)}return new hc(e);case tt.POPUP:return new S1(e);case tt.FREETEXT:return new mP(e);case tt.LINE:return new qD(e);case tt.SQUARE:return new KD(e);case tt.CIRCLE:return new QD(e);case tt.POLYLINE:return new vP(e);case tt.CARET:return new JD(e);case tt.INK:return new mx(e);case tt.POLYGON:return new ZD(e);case tt.HIGHLIGHT:return new yP(e);case tt.UNDERLINE:return new eM(e);case tt.SQUIGGLY:return new tM(e);case tt.STRIKEOUT:return new nM(e);case tt.STAMP:return new wP(e);case tt.FILEATTACHMENT:return new iM(e);default:return new qe(e)}}}var bl,eh,gi,rg,b1;const Tx=class Tx{constructor(e,{isRenderable:t=!1,ignoreBorder:i=!1,createQuadrilaterals:s=!1}={}){p(this,rg);p(this,bl,null);p(this,eh,!1);p(this,gi,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(i)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Tx._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var i;const{data:e}=this,t=(i=this.annotationStorage)==null?void 0:i.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var l;const e=(l=this.annotationStorage)==null?void 0:l.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:i,rect:s}=this.data;let r=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let c=0;c<t.length;c+=8)t[c+1]>o?(o=t[c+1],r=t[c+2]):t[c+1]===o&&(r=Math.max(r,t[c+2]));return[r,o]}if((i==null?void 0:i.length)>=1){for(const c of i)for(let u=0,h=c.length;u<h;u+=2)c[u+1]>o?(o=c[u+1],r=c[u]):c[u+1]===o&&(r=Math.max(r,c[u]));if(r!==1/0)return[r,o]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-r)/i,e[1]=100*(e[1]-o)/s,e}get commentText(){var t,i,s;const{data:e}=this;return((i=(t=this.annotationStorage.getRawValue(`${xf}${e.id}`))==null?void 0:t.popup)==null?void 0:i.contents)||((s=e.contentsObj)==null?void 0:s.str)||""}set commentText(e){const{data:t}=this,i={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:i})||this.annotationStorage.setValue(`${xf}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:i,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=a(this,gi))==null?void 0:e.popup)||this.popup)==null||t.remove(),g(this,gi,this.popup=null)}updateEdited(e){var r;if(!this.container)return;e.rect&&(a(this,bl)||g(this,bl,{rect:this.data.rect.slice(0)}));const{rect:t,popup:i}=e;t&&S(this,rg,b1).call(this,t);let s=((r=a(this,gi))==null?void 0:r.popup)||this.popup;!s&&(i!=null&&i.text)&&(this._createPopup(i),s=a(this,gi).popup),s&&(s.updateEdited(e),i!=null&&i.deleted&&(s.remove(),g(this,gi,null),this.popup=null))}resetEdited(){var e;a(this,bl)&&(S(this,rg,b1).call(this,a(this,bl).rect),(e=a(this,gi))==null||e.popup.resetEdited(),g(this,bl,null))}_createContainer(e){const{data:t,parent:{page:i,viewport:s}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),!(this instanceof hc)&&!(this instanceof gx)&&(r.tabIndex=0);const{style:o}=r;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(r.title=t.alternativeText),t.noRotate&&r.classList.add("norotate"),!t.rect||this instanceof S1){const{rotation:w}=t;return!t.hasOwnCanvas&&w!==0&&this.setRotation(w,r),r}const{width:l,height:c}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const w=t.borderStyle.horizontalCornerRadius,x=t.borderStyle.verticalCornerRadius;if(w>0||x>0){const b=`calc(${w}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;o.borderRadius=b}else if(this instanceof hP){const b=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=b}switch(t.borderStyle.style){case pc.SOLID:o.borderStyle="solid";break;case pc.DASHED:o.borderStyle="dashed";break;case pc.BEVELED:ee("Unimplemented border style: beveled");break;case pc.INSET:ee("Unimplemented border style: inset");break;case pc.UNDERLINE:o.borderBottomStyle="solid";break}const v=t.borderColor||null;v?(g(this,eh,!0),o.borderColor=V.makeHexColor(v[0]|0,v[1]|0,v[2]|0)):o.borderWidth=0}const u=V.normalizeRect([t.rect[0],i.view[3]-t.rect[1]+i.view[1],t.rect[2],i.view[3]-t.rect[3]+i.view[1]]),{pageWidth:h,pageHeight:d,pageX:f,pageY:m}=s.rawDims;o.left=`${100*(u[0]-f)/h}%`,o.top=`${100*(u[1]-m)/d}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(o.width=`${100*l/h}%`,o.height=`${100*c/d}%`):this.setRotation(y,r),r}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:i,pageHeight:s}=this.parent.viewport.rawDims;let{width:r,height:o}=this;e%180!==0&&([r,o]=[o,r]),t.style.width=`${100*r/i}%`,t.style.height=`${100*o/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,i,s)=>{const r=s.detail[t],o=r[0],l=r.slice(1);s.target.style[i]=fC[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[i]:fC[`${o}_rgb`](l)})};return ie(this,"_commonActions",{display:t=>{const{display:i}=t.detail,s=i%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:i===1||i===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:i}=t.detail;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:i,noView:i})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const i=t.detail.rotation;this.setRotation(i),this.annotationStorage.setValue(this.data.id,{rotation:i})}})}_dispatchEventFromSandbox(e,t){const i=this._commonActions;for(const s of Object.keys(t.detail)){const r=e[s]||i[s];r==null||r(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const i=this._commonActions;for(const[s,r]of Object.entries(t)){const o=i[s];if(o){const l={detail:{[s]:r},target:e};o(l),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,i,s,r]=this.data.rect.map(w=>Math.fround(w));if(e.length===8){const[w,x,v,b]=e.subarray(2,6);if(s===w&&r===x&&t===v&&i===b)return}const{style:o}=this.container;let l;if(a(this,eh)){const{borderColor:w,borderWidth:x}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${w}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const c=s-t,u=r-i,{svgFactory:h}=this,d=h.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const f=h.createElement("defs");d.append(f);const m=h.createElement("clipPath"),y=`clippath_${this.data.id}`;m.setAttribute("id",y),m.setAttribute("clipPathUnits","objectBoundingBox"),f.append(m);for(let w=2,x=e.length;w<x;w+=8){const v=e[w],b=e[w+1],A=e[w+2],E=e[w+3],_=h.createElement("rect"),k=(A-t)/c,T=(r-b)/u,P=(v-A)/c,N=(b-E)/u;_.setAttribute("x",k),_.setAttribute("y",T),_.setAttribute("width",P),_.setAttribute("height",N),m.append(_),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${k}" y="${T}" width="${P}" height="${N}"/>`)}a(this,eh)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(d),this.container.style.clipPath=`url(#${y})`}_createPopup(e=null){const{data:t}=this;let i,s;e?(i={str:e.text},s=e.date):(i=t.contentsObj,s=t.modificationDate);const r=g(this,gi,new S1({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:i,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(r.render())}get hasPopupElement(){return!!(a(this,gi)||this.popup||this.data.popupRef)}get extraPopupElement(){return a(this,gi)}render(){Te("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const i=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:r,id:o,exportValues:l}of s){if(r===-1||o===t)continue;const c=typeof l=="string"?l:null,u=document.querySelector(`[data-element-id="${o}"]`);if(u&&!rc.has(u)){ee(`_getElementsByName - element not allowed: ${o}`);continue}i.push({id:o,exportValue:c,domElement:u})}return i}for(const s of document.getElementsByName(e)){const{exportValue:r}=s,o=s.getAttribute("data-element-id");o!==t&&rc.has(s)&&i.push({id:o,exportValue:r,domElement:s})}return i}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var i;(i=this.linkService.eventBus)==null||i.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};bl=new WeakMap,eh=new WeakMap,gi=new WeakMap,rg=new WeakSet,b1=function(e){const{container:{style:t},data:{rect:i,rotation:s},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;i==null||i.splice(0,4,...e),t.left=`${100*(e[0]-l)/r}%`,t.top=`${100*(o-e[3]+c)/o}%`,s===0?(t.width=`${100*(e[2]-e[0])/r}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)};let qe=Tx;class UD extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var dr,ga,w0,cP,b0,uP;class gx extends qe{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!(i!=null&&i.ignoreBorder),createQuadrilaterals:!0});p(this,dr);p(this,w0);p(this,b0);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(S(this,w0,cP).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(S(this,b0,uP).call(this,s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&S(this,dr,ga).call(this),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),S(this,dr,ga).call(this)}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const o=s.get(r);o&&(t[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1})}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),S(this,dr,ga).call(this)}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),S(this,dr,ga).call(this),!this._fieldObjects){ee('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var d;s==null||s();const{fields:r,refs:o,include:l}=i,c=[];if(r.length!==0||o.length!==0){const f=new Set(o);for(const m of r){const y=this._fieldObjects[m]||[];for(const{id:w}of y)f.add(w)}for(const m of Object.values(this._fieldObjects))for(const y of m)f.has(y.id)===l&&c.push(y)}else for(const f of Object.values(this._fieldObjects))c.push(...f);const u=this.annotationStorage,h=[];for(const f of c){const{id:m}=f;switch(h.push(m),f.type){case"text":{const w=f.defaultValue||"";u.setValue(m,{value:w});break}case"checkbox":case"radiobutton":{const w=f.defaultValue===f.exportValues;u.setValue(m,{value:w});break}case"combobox":case"listbox":{const w=f.defaultValue||"";u.setValue(m,{value:w});break}default:continue}const y=document.querySelector(`[data-element-id="${m}"]`);if(y){if(!rc.has(y)){ee(`_bindResetFormAction - element not allowed: ${m}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:h,name:"ResetForm"}})),!1}}}dr=new WeakSet,ga=function(){this.container.setAttribute("data-internal-link","")},w0=new WeakSet,cP=function(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(i.content,i.filename,r),!1},S(this,dr,ga).call(this)},b0=new WeakSet,uP=function(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),S(this,dr,ga).call(this)};class HD extends qe{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class hc extends qe{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return kt.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,i,s,r){i.includes("mouse")?e.addEventListener(i,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(i,o=>{var l;if(i==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(i==="focus"){if(t.focused)return;t.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:r(o)}}))})}_setEventListeners(e,t,i,s){var r,o,l;for(const[c,u]of i)(u==="Action"||(r=this.data.actions)!=null&&r[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,c,u,s),u==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":V.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:i}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||jD,r=e.style;let o;const l=2,c=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l),h=Math.round(u/(Tb*s))||1,d=u/h;o=Math.min(s,c(d/Tb))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(s,c(u/Tb))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=V.makeHexColor(i[0],i[1],i[2]),this.data.textAlignment!==null&&(r.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class $D extends hc{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,i,s){const r=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=i),r.setValue(o.id,{[s]:i})}render(){var s,r;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let l=o.value||"";const c=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let u=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(i=document.createElement("textarea"),i.textContent=u??l,this.data.doNotScroll&&(i.style.overflowY="hidden")):(i=document.createElement("input"),i.type=this.data.password?"password":"text",i.setAttribute("value",u??l),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),rc.add(i),i.setAttribute("data-element-id",t),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=0;const{datetimeFormat:d,datetimeType:f,timeStep:m}=this.data,y=!!f&&this.enableScripting;d&&(i.title=d),this._setRequired(i,this.data.required),c&&(i.maxLength=c),i.addEventListener("input",x=>{e.setValue(t,{value:x.target.value}),this.setPropertyOnSiblings(i,"value",x.target.value,"value"),h.formattedValue=null}),i.addEventListener("resetform",x=>{const v=this.data.defaultFieldValue??"";i.value=h.userValue=v,h.formattedValue=null});let w=x=>{const{formattedValue:v}=h;v!=null&&(x.target.value=v),x.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",v=>{var A;if(h.focused)return;const{target:b}=v;if(y&&(b.type=f,m&&(b.step=m)),h.userValue){const E=h.userValue;if(y)if(f==="time"){const _=new Date(E),k=[_.getHours(),_.getMinutes(),_.getSeconds()];b.value=k.map(T=>T.toString().padStart(2,"0")).join(":")}else b.value=new Date(E-zD).toISOString().split(f==="date"?"T":".",1)[0];else b.value=E}h.lastCommittedValue=b.value,h.commitKey=1,(A=this.data.actions)!=null&&A.Focus||(h.focused=!0)}),i.addEventListener("updatefromsandbox",v=>{this.showElementAndHideCanvas(v.target);const b={value(A){h.userValue=A.detail.value??"",y||e.setValue(t,{value:h.userValue.toString()}),A.target.value=h.userValue},formattedValue(A){const{formattedValue:E}=A.detail;h.formattedValue=E,E!=null&&A.target!==document.activeElement&&(A.target.value=E);const _={formattedValue:E};y&&(_.value=E),e.setValue(t,_)},selRange(A){A.target.setSelectionRange(...A.detail.selRange)},charLimit:A=>{var T;const{charLimit:E}=A.detail,{target:_}=A;if(E===0){_.removeAttribute("maxLength");return}_.setAttribute("maxLength",E);let k=h.userValue;!k||k.length<=E||(k=k.slice(0,E),_.value=h.userValue=k,e.setValue(t,{value:k}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:k,willCommit:!0,commitKey:1,selStart:_.selectionStart,selEnd:_.selectionEnd}}))}};this._dispatchEventFromSandbox(b,v)}),i.addEventListener("keydown",v=>{var E;h.commitKey=1;let b=-1;if(v.key==="Escape"?b=0:v.key==="Enter"&&!this.data.multiLine?b=2:v.key==="Tab"&&(h.commitKey=3),b===-1)return;const{value:A}=v.target;h.lastCommittedValue!==A&&(h.lastCommittedValue=A,h.userValue=A,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:b,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}}))});const x=w;w=null,i.addEventListener("blur",v=>{var E,_;if(!h.focused||!v.relatedTarget)return;(E=this.data.actions)!=null&&E.Blur||(h.focused=!1);const{target:b}=v;let{value:A}=b;if(y){if(A&&f==="time"){const k=A.split(":").map(T=>parseInt(T,10));A=new Date(2e3,0,1,k[0],k[1],k[2]||0).valueOf(),b.step=""}else A.includes("T")||(A=`${A}T00:00`),A=new Date(A).valueOf();b.type="text"}h.userValue=A,h.lastCommittedValue!==A&&((_=this.linkService.eventBus)==null||_.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:A,willCommit:!0,commitKey:h.commitKey,selStart:v.target.selectionStart,selEnd:v.target.selectionEnd}})),x(v)}),(r=this.data.actions)!=null&&r.Keystroke&&i.addEventListener("beforeinput",v=>{var N;h.lastCommittedValue=null;const{data:b,target:A}=v,{value:E,selectionStart:_,selectionEnd:k}=A;let T=_,P=k;switch(v.inputType){case"deleteWordBackward":{const R=E.substring(0,_).match(/\w*[^\w]*$/);R&&(T-=R[0].length);break}case"deleteWordForward":{const R=E.substring(_).match(/^[^\w]*\w*/);R&&(P+=R[0].length);break}case"deleteContentBackward":_===k&&(T-=1);break;case"deleteContentForward":_===k&&(P+=1);break}v.preventDefault(),(N=this.linkService.eventBus)==null||N.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:E,change:b||"",willCommit:!1,selStart:T,selEnd:P}})}),this._setEventListeners(i,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],v=>v.target.value)}if(w&&i.addEventListener("blur",w),this.data.comb){const v=(this.data.rect[2]-this.data.rect[0])/c;i.classList.add("comb"),i.style.letterSpacing=`calc(${v}px * var(--total-scale-factor) - 1ch)`}}else i=document.createElement("div"),i.textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell",this.data.hasOwnCanvas&&(i.hidden=!0);return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class VD extends hc{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class WD extends hc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(i,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return rc.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.setAttribute("exportValue",t.exportValue),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i)){const h=c&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=h),e.setValue(u.id,{value:h})}e.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const l=t.defaultFieldValue||"Off";o.target.checked=l===t.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",e.setValue(i,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class hP extends hc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,i=t.id;let s=e.getValue(i,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(i,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,i))e.setValue(o.id,{value:!1});const r=document.createElement("input");if(rc.add(r),r.setAttribute("data-element-id",i),r.disabled=t.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=t.fieldName,s&&r.setAttribute("checked",!0),r.tabIndex=0,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const u of this._getElementsByName(l,i))e.setValue(u.id,{value:!1});e.setValue(i,{value:c})}),r.addEventListener("resetform",o=>{const l=t.defaultFieldValue;o.target.checked=l!=null&&l===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:u=>{const h=o===u.detail.value;for(const d of this._getElementsByName(u.target.name)){const f=h&&d.id===i;d.domElement&&(d.domElement.checked=f),e.setValue(d.id,{value:f})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class XD extends gx{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",i=>{this._dispatchEventFromSandbox({},i)})),e}}class GD extends hc{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,i=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");rc.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",h=>{const d=this.data.defaultFieldValue;for(const f of s.options)f.selected=f.value===d});for(const h of this.data.options){const d=document.createElement("option");d.textContent=h.displayValue,d.value=h.exportValue,i.value.includes(h.exportValue)&&(d.setAttribute("selected",!0),r=!1),s.append(d)}let o=null;if(r){const h=document.createElement("option");h.value=" ",h.setAttribute("hidden",!0),h.setAttribute("selected",!0),s.prepend(h),o=()=>{h.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const l=h=>{const d=h?"value":"textContent",{options:f,multiple:m}=s;return m?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[d]):f.selectedIndex===-1?null:f[f.selectedIndex][d]};let c=l(!1);const u=h=>{const d=h.target.options;return Array.prototype.map.call(d,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",h=>{const d={value(f){o==null||o();const m=f.detail.value,y=new Set(Array.isArray(m)?m:[m]);for(const w of s.options)w.selected=y.has(w.value);e.setValue(t,{value:l(!0)}),c=l(!1)},multipleSelection(f){s.multiple=!0},remove(f){const m=s.options,y=f.detail.remove;m[y].selected=!1,s.remove(y),m.length>0&&Array.prototype.findIndex.call(m,x=>x.selected)===-1&&(m[0].selected=!0),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},clear(f){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),c=l(!1)},insert(f){const{index:m,displayValue:y,exportValue:w}=f.detail.insert,x=s.children[m],v=document.createElement("option");v.textContent=y,v.value=w,x?x.before(v):s.append(v),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},items(f){const{items:m}=f.detail;for(;s.length!==0;)s.remove(0);for(const y of m){const{displayValue:w,exportValue:x}=y,v=document.createElement("option");v.textContent=w,v.value=x,s.append(v)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:l(!0),items:u(f)}),c=l(!1)},indices(f){const m=new Set(f.detail.indices);for(const y of f.target.options)y.selected=m.has(y.index);e.setValue(t,{value:l(!0)}),c=l(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(d,h)}),s.addEventListener("input",h=>{var m;const d=l(!0),f=l(!1);e.setValue(t,{value:d}),h.preventDefault(),(m=this.linkService.eventBus)==null||m.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:c,change:f,changeEx:d,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],h=>h.target.value)):s.addEventListener("input",function(h){e.setValue(t,{value:l(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var og,A1;class S1 extends qe{constructor(t){const{data:i,elements:s,parent:r}=t,o=!!r._commentManager;super(t,{isRenderable:!o&&qe._hasPopupData(i)});p(this,og);if(this.elements=s,o&&qe._hasPopupData(i)){const l=this.popup=S(this,og,A1).call(this);for(const c of s)c.popup=l}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=S(this,og,A1).call(this),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${ox}${r}`).join(",")),this.container}}og=new WeakSet,A1=function(){return new YD({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Bn,Ao,S0,A0,th,nh,Je,Ss,xo,Sl,ih,sh,As,jn,fr,pr,wt,gr,Eo,ag,mr,rh,Al,Co,qt,_o,oh,xv,lg,x1,cg,E1,ug,C1,ah,Ev,hg,_1,x0,dP,E0,fP,C0,pP,_0,gP,lh,Cv,ch,_v,dg,k1;class YD{constructor({container:e,color:t,elements:i,titleObj:s,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:u,parentRect:h,open:d,commentManager:f=null}){p(this,oh);p(this,lg);p(this,cg);p(this,ug);p(this,ah);p(this,hg);p(this,x0);p(this,E0);p(this,C0);p(this,_0);p(this,lh);p(this,ch);p(this,dg);p(this,Bn,null);p(this,Ao,S(this,C0,pP).bind(this));p(this,S0,S(this,dg,k1).bind(this));p(this,A0,S(this,ch,_v).bind(this));p(this,th,S(this,lh,Cv).bind(this));p(this,nh,null);p(this,Je,null);p(this,Ss,null);p(this,xo,null);p(this,Sl,null);p(this,ih,null);p(this,sh,null);p(this,As,!1);p(this,jn,null);p(this,fr,null);p(this,pr,null);p(this,wt,null);p(this,gr,null);p(this,Eo,null);p(this,ag,null);p(this,mr,null);p(this,rh,null);p(this,Al,null);p(this,Co,!1);p(this,qt,null);p(this,_o,null);g(this,Je,e),g(this,rh,s),g(this,Ss,o),g(this,mr,l),g(this,ih,c),g(this,nh,t),g(this,ag,u),g(this,sh,h),g(this,Sl,i),g(this,Bn,f),g(this,qt,i[0]),g(this,xo,_f.toDateObject(r)),this.trigger=i.flatMap(m=>m.getElementsToTriggerPopup()),f?this.renderCommentButton():(S(this,oh,xv).call(this),a(this,Je).hidden=!0,d&&S(this,lh,Cv).call(this))}renderCommentButton(){if(a(this,wt)||(a(this,gr)||S(this,lg,x1).call(this),!a(this,gr)))return;const{signal:e}=g(this,fr,new AbortController),t=!!a(this,qt).extraPopupElement,i=()=>{a(this,Bn).toggleCommentPopup(this,!0,void 0,!t)},s=()=>{a(this,Bn).toggleCommentPopup(this,!1,!0,!t)},r=()=>{a(this,Bn).toggleCommentPopup(this,!1,!1)};if(t){g(this,wt,a(this,qt).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",a(this,Ao),{signal:e}),o.addEventListener("click",i,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=g(this,wt,document.createElement("button"));o.className="annotationCommentButton";const l=a(this,qt).container;o.style.zIndex=l.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),S(this,ug,C1).call(this),S(this,cg,E1).call(this),o.addEventListener("keydown",a(this,Ao),{signal:e}),o.addEventListener("click",i,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",r,{signal:e}),l.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=a(this,qt).commentData;return e?a(this,ih)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=a(this,wt))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:i,creationDate:s,modificationDate:r}=a(this,qt).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:i,creationDate:s,modificationDate:r}}get elementBeforePopup(){return a(this,wt)}get comment(){return a(this,_o)||g(this,_o,a(this,qt).commentText),a(this,_o)}set comment(e){e!==this.comment&&(a(this,qt).commentText=g(this,_o,e))}get parentBoundingClientRect(){return a(this,qt).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){a(this,wt)&&(a(this,wt).classList.toggle("selected",e),a(this,wt).ariaExpanded=t)}setSelectedCommentButton(e){a(this,wt).classList.toggle("selected",e)}get commentPopupPosition(){if(a(this,Eo))return a(this,Eo);const{x:e,y:t,height:i}=a(this,wt).getBoundingClientRect(),{x:s,y:r,width:o,height:l}=a(this,qt).layer.getBoundingClientRect();return[(e-s)/o,(t+i-r)/l]}set commentPopupPosition(e){g(this,Eo,e)}hasDefaultPopupPosition(){return a(this,Eo)===null}get commentButtonPosition(){return a(this,gr)}get commentButtonWidth(){return a(this,wt).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,i]=a(this,Eo)||this.commentButtonPosition.map(u=>u/100),s=this.parentBoundingClientRect,{x:r,y:o,width:l,height:c}=s;a(this,Bn).showDialog(null,this,r+t*l,o+i*c,{...e,parentDimensions:s})}render(){var i,s;if(a(this,jn))return;const e=g(this,jn,document.createElement("div"));if(e.className="popup",a(this,nh)){const r=e.style.outlineColor=V.makeHexColor(...a(this,nh));e.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const t=document.createElement("span");if(t.className="header",(i=a(this,rh))!=null&&i.str){const r=document.createElement("span");r.className="title",t.append(r),{dir:r.dir,str:r.textContent}=a(this,rh)}if(e.append(t),a(this,xo)){const r=document.createElement("time");r.className="popupDate",r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,xo).valueOf()})),r.dateTime=a(this,xo).toISOString(),t.append(r)}lx({html:a(this,ah,Ev)||a(this,Ss).str,dir:(s=a(this,Ss))==null?void 0:s.dir,className:"popupContent"},e),a(this,Je).append(e)}updateEdited({rect:e,popup:t,deleted:i}){var s;if(a(this,Bn)){i?(this.remove(),g(this,_o,null)):t&&(t.deleted?this.remove():(S(this,ug,C1).call(this),g(this,_o,t.text))),e&&(g(this,gr,null),S(this,lg,x1).call(this),S(this,cg,E1).call(this));return}if(i||t!=null&&t.deleted){this.remove();return}S(this,oh,xv).call(this),a(this,Al)||g(this,Al,{contentsObj:a(this,Ss),richText:a(this,mr)}),e&&g(this,pr,null),t&&t.text&&(g(this,mr,S(this,E0,fP).call(this,t.text)),g(this,xo,_f.toDateObject(t.date)),g(this,Ss,null)),(s=a(this,jn))==null||s.remove(),g(this,jn,null)}resetEdited(){var e;a(this,Al)&&({contentsObj:ht(this,Ss)._,richText:ht(this,mr)._}=a(this,Al),g(this,Al,null),(e=a(this,jn))==null||e.remove(),g(this,jn,null),g(this,pr,null))}remove(){var e,t,i;if((e=a(this,fr))==null||e.abort(),g(this,fr,null),(t=a(this,jn))==null||t.remove(),g(this,jn,null),g(this,Co,!1),g(this,As,!1),(i=a(this,wt))==null||i.remove(),g(this,wt,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){g(this,Co,this.isVisible),a(this,Co)&&(a(this,Je).hidden=!0)}maybeShow(){a(this,Bn)||(S(this,oh,xv).call(this),a(this,Co)&&(a(this,jn)||S(this,ch,_v).call(this),g(this,Co,!1),a(this,Je).hidden=!1))}get isVisible(){return a(this,Bn)?!1:a(this,Je).hidden===!1}}Bn=new WeakMap,Ao=new WeakMap,S0=new WeakMap,A0=new WeakMap,th=new WeakMap,nh=new WeakMap,Je=new WeakMap,Ss=new WeakMap,xo=new WeakMap,Sl=new WeakMap,ih=new WeakMap,sh=new WeakMap,As=new WeakMap,jn=new WeakMap,fr=new WeakMap,pr=new WeakMap,wt=new WeakMap,gr=new WeakMap,Eo=new WeakMap,ag=new WeakMap,mr=new WeakMap,rh=new WeakMap,Al=new WeakMap,Co=new WeakMap,qt=new WeakMap,_o=new WeakMap,oh=new WeakSet,xv=function(){var t;if(a(this,fr))return;g(this,fr,new AbortController);const{signal:e}=a(this,fr);for(const i of this.trigger)i.addEventListener("click",a(this,th),{signal:e}),i.addEventListener("pointerenter",a(this,A0),{signal:e}),i.addEventListener("pointerleave",a(this,S0),{signal:e}),i.classList.add("popupTriggerArea");for(const i of a(this,Sl))(t=i.container)==null||t.addEventListener("keydown",a(this,Ao),{signal:e})},lg=new WeakSet,x1=function(){const e=a(this,Sl).find(t=>t.hasCommentButton);e&&g(this,gr,e._normalizePoint(e.commentButtonPosition))},cg=new WeakSet,E1=function(){if(a(this,qt).extraPopupElement&&!a(this,qt).editor)return;this.renderCommentButton();const[e,t]=a(this,gr),{style:i}=a(this,wt);i.left=`calc(${e}%)`,i.top=`calc(${t}% - var(--comment-button-dim))`},ug=new WeakSet,C1=function(){a(this,qt).extraPopupElement||(this.renderCommentButton(),a(this,wt).style.backgroundColor=this.commentButtonColor||"")},ah=new WeakSet,Ev=function(){const e=a(this,mr),t=a(this,Ss);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&a(this,mr).html||null},hg=new WeakSet,_1=function(){var e,t,i;return((i=(t=(e=a(this,ah,Ev))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.fontSize)||0},x0=new WeakSet,dP=function(){var e,t,i;return((i=(t=(e=a(this,ah,Ev))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:i.color)||null},E0=new WeakSet,fP=function(e){const t=[],i={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:a(this,x0,dP),fontSize:a(this,hg,_1)?`calc(${a(this,hg,_1)}px * var(--total-scale-factor))`:""}};for(const r of e.split(`
`))t.push({name:"span",value:r,attributes:s});return i},C0=new WeakSet,pP=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&a(this,As))&&S(this,lh,Cv).call(this)},_0=new WeakSet,gP=function(){if(a(this,pr)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:i,pageX:s,pageY:r}}}=a(this,ih);let o=!!a(this,sh),l=o?a(this,sh):a(this,ag);for(const y of a(this,Sl))if(!l||V.intersect(y.data.rect,l)!==null){l=y.data.rect,o=!0;break}const c=V.normalizeRect([l[0],e[3]-l[1]+e[1],l[2],e[3]-l[3]+e[1]]),u=5,h=o?l[2]-l[0]+u:0,d=c[0]+h,f=c[1];g(this,pr,[100*(d-s)/t,100*(f-r)/i]);const{style:m}=a(this,Je);m.left=`${a(this,pr)[0]}%`,m.top=`${a(this,pr)[1]}%`},lh=new WeakSet,Cv=function(){if(a(this,Bn)){a(this,Bn).toggleCommentPopup(this,!1);return}g(this,As,!a(this,As)),a(this,As)?(S(this,ch,_v).call(this),a(this,Je).addEventListener("click",a(this,th)),a(this,Je).addEventListener("keydown",a(this,Ao))):(S(this,dg,k1).call(this),a(this,Je).removeEventListener("click",a(this,th)),a(this,Je).removeEventListener("keydown",a(this,Ao)))},ch=new WeakSet,_v=function(){a(this,jn)||this.render(),this.isVisible?a(this,As)&&a(this,Je).classList.add("focused"):(S(this,_0,gP).call(this),a(this,Je).hidden=!1,a(this,Je).style.zIndex=parseInt(a(this,Je).style.zIndex)+1e3)},dg=new WeakSet,k1=function(){a(this,Je).classList.remove("focused"),!(a(this,As)||!this.isVisible)&&(a(this,Je).hidden=!0,a(this,Je).style.zIndex=parseInt(a(this,Je).style.zIndex)-1e3)};class mP extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=J.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const i=document.createElement("span");i.textContent=t,e.append(i)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var fg;class qD extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,fg,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=g(this,fg,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,fg)}addHighlightArea(){this.container.classList.add("highlightArea")}}fg=new WeakMap;var pg;class KD extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,pg,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,l=g(this,pg,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",i-o),l.setAttribute("height",s-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,pg)}addHighlightArea(){this.container.classList.add("highlightArea")}}pg=new WeakMap;var gg;class QD extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,gg,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),o=t.borderStyle.width,l=g(this,gg,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",i/2),l.setAttribute("cy",s/2),l.setAttribute("rx",i/2-o/2),l.setAttribute("ry",s/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,gg)}addHighlightArea(){this.container.classList.add("highlightArea")}}gg=new WeakMap;var mg;class vP extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,mg,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:o,height:l}=this;if(!i)return this.container;const c=this.svgFactory.create(o,l,!0);let u=[];for(let d=0,f=i.length;d<f;d+=2){const m=i[d]-t[0],y=t[3]-i[d+1];u.push(`${m},${y}`)}u=u.join(" ");const h=g(this,mg,this.svgFactory.createElement(this.svgElementName));return h.setAttribute("points",u),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),c.append(h),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,mg)}addHighlightArea(){this.container.classList.add("highlightArea")}}mg=new WeakMap;class ZD extends vP{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class JD extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var vg,xl,yg,T1;class mx extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});p(this,yg);p(this,vg,null);p(this,xl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?J.HIGHLIGHT:J.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:u}=S(this,yg,T1).call(this,i,t),h=this.svgFactory.create(c,u,!0),d=g(this,vg,this.svgFactory.createElement("svg:g"));h.append(d),d.setAttribute("stroke-width",r.width||1),d.setAttribute("stroke-linecap","round"),d.setAttribute("stroke-linejoin","round"),d.setAttribute("stroke-miterlimit",10),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),d.setAttribute("transform",l);for(let f=0,m=s.length;f<m;f++){const y=this.svgFactory.createElement(this.svgElementName);a(this,xl).push(y),y.setAttribute("points",s[f].join(",")),d.append(y)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(h),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,o=a(this,vg);if(i>=0&&o.setAttribute("stroke-width",i||1),s)for(let l=0,c=a(this,xl).length;l<c;l++)a(this,xl)[l].setAttribute("points",s[l].join(","));if(r){const{transform:l,width:c,height:u}=S(this,yg,T1).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${u}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,xl)}addHighlightArea(){this.container.classList.add("highlightArea")}}vg=new WeakMap,xl=new WeakMap,yg=new WeakSet,T1=function(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}};class yP extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=J.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const i=document.createElement("mark");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class eM extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class tM extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const i=document.createElement("u");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class nM extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const i=document.createElement("s");i.classList.add("overlaidText"),i.textContent=e,this.container.append(i)}return this.container}}class wP extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=J.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var wg,bg,P1;class iM extends qe{constructor(t){var s;super(t,{isRenderable:!0});p(this,bg);p(this,wg,null);const{file:i}=this.data;this.filename=i.filename,this.content=i.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",S(this,bg,P1).bind(this)),g(this,wg,s);const{isMac:r}=kt.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&S(this,bg,P1).call(this)}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return a(this,wg)}addHighlightArea(){this.container.classList.add("highlightArea")}}wg=new WeakMap,bg=new WeakSet,P1=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var uh,El,hh,ko,Sg,Cl,Ag,R1,xg,N1,Eg;let vx=(Eg=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:i,annotationEditorUIManager:s,page:r,viewport:o,structTreeLayer:l,commentManager:c,linkService:u,annotationStorage:h}){p(this,Ag);p(this,xg);p(this,uh,null);p(this,El,null);p(this,hh,null);p(this,ko,new Map);p(this,Sg,null);p(this,Cl,null);this.div=e,g(this,uh,t),g(this,El,i),g(this,Sg,l||null),g(this,Cl,u||null),g(this,hh,h||new cx),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=c||null}hasEditableAnnotations(){return a(this,ko).size>0}async render(e){var o,l,c;const{annotations:t}=e,i=this.div;ia(i,this.viewport);const s=new Map,r={data:null,layer:i,linkService:a(this,Cl),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new Rf,annotationStorage:a(this,hh),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const u of t){if(u.noHTML)continue;const h=u.annotationType===tt.POPUP;if(h){const m=s.get(u.id);if(!m)continue;r.elements=m}else if(u.rect[2]===u.rect[0]||u.rect[3]===u.rect[1])continue;r.data=u;const d=pC.create(r);if(!d.isRenderable)continue;if(!h&&u.popupRef){const m=s.get(u.popupRef);m?m.push(d):s.set(u.popupRef,[d])}const f=d.render();u.hidden&&(f.style.visibility="hidden"),await S(this,Ag,R1).call(this,f,u.id,r.elements),(l=(o=d.extraPopupElement)==null?void 0:o.popup)==null||l.renderCommentButton(),d._isEditable&&(a(this,ko).set(d.data.id,d),(c=this._annotationEditorUIManager)==null||c.renderAnnotationElement(d))}S(this,xg,N1).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:a(this,Cl),svgFactory:new Rf,parent:this};for(const i of e){i.borderStyle||(i.borderStyle=Eg._defaultBorderStyle),t.data=i;const s=pC.create(t);if(!s.isRenderable)continue;const r=s.render();await S(this,Ag,R1).call(this,r,i.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,ia(t,{rotation:e.rotation}),S(this,xg,N1).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(a(this,ko).values())}getEditableAnnotation(e){return a(this,ko).get(e)}addFakeAnnotation(e){var l;const{div:t}=this,{id:i,rotation:s}=e,r=new UD({data:{id:i,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:a(this,Cl),annotationStorage:a(this,hh)}),o=r.render();return t.append(o),(l=a(this,uh))==null||l.moveElementInDOM(t,o,o,!1),r.createOrUpdatePopup(),r}static get _defaultBorderStyle(){return ie(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:pc.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},uh=new WeakMap,El=new WeakMap,hh=new WeakMap,ko=new WeakMap,Sg=new WeakMap,Cl=new WeakMap,Ag=new WeakSet,R1=async function(e,t,i){var l,c;const s=e.firstChild||e,r=s.id=`${ox}${t}`,o=await((l=a(this,Sg))==null?void 0:l.getAriaAttributes(r));if(o)for(const[u,h]of o)s.setAttribute(u,h);i?i.at(-1).container.after(e):(this.div.append(e),(c=a(this,uh))==null||c.moveElementInDOM(this.div,e,s,!1))},xg=new WeakSet,N1=function(){var t;if(!a(this,El))return;const e=this.div;for(const[i,s]of a(this,El)){const r=e.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):r.append(s);const l=a(this,ko).get(i);l&&(l._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(i,r.id,s),l._hasNoCanvas=!1):l.canvas=s)}a(this,El).clear()},Eg);const Ym=/\r\n?|\n/g;var zn,Cg,_l,Un,k0,bP,T0,SP,P0,AP,dh,kv,fh,Tv,ph,Pv,R0,xP,_g,D1,N0,EP;const Pe=class Pe extends De{constructor(t){super({...t,name:"freeTextEditor"});p(this,k0);p(this,T0);p(this,P0);p(this,dh);p(this,ph);p(this,R0);p(this,N0);p(this,zn,"");p(this,Cg,`${this.id}-editor`);p(this,_l,null);p(this,Un,void 0);F(this,"_colorPicker",null);this.color=t.color||Pe._defaultColor||De._defaultLineColor,g(this,Un,t.fontSize||Pe._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=Pe.prototype,i=o=>o.isEmpty(),s=sa.TRANSLATE_SMALL,r=sa.TRANSLATE_BIG;return ie(this,"_keyboardManager",new gm([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static initialize(t,i){De.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case le.FREETEXT_SIZE:Pe._defaultFontSize=i;break;case le.FREETEXT_COLOR:Pe._defaultColor=i;break}}updateParams(t,i){switch(t){case le.FREETEXT_SIZE:S(this,k0,bP).call(this,i);break;case le.FREETEXT_COLOR:S(this,T0,SP).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[le.FREETEXT_SIZE,Pe._defaultFontSize],[le.FREETEXT_COLOR,Pe._defaultColor||De._defaultLineColor]]}get propertiesToUpdate(){return[[le.FREETEXT_SIZE,a(this,Un)],[le.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new yy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return le.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-Pe._internalPadding*t,-(Pe._internalPadding+a(this,Un))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),g(this,_l,new AbortController);const t=this._uiManager.combinedSignal(a(this,_l));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Cg)),this._isDraggable=!0,(t=a(this,_l))==null||t.abort(),g(this,_l,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var i;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(i=this._initialOptions)!=null&&i.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=a(this,zn),i=g(this,zn,S(this,P0,AP).call(this).trimEnd());if(t===i)return;const s=r=>{if(g(this,zn,r),!r){this.remove();return}S(this,ph,Pv).call(this),this._uiManager.rebuild(this),S(this,dh,kv).call(this)};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),S(this,dh,kv).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Pe._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Cg)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${a(this,Un)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,u]=this.getInitialTranslation();[c,u]=this.pageTranslationToScreen(c,u);const[h,d]=this.pageDimensions,[f,m]=this.pageTranslation;let y,w;switch(this.rotation){case 0:y=t+(l[0]-f)/h,w=i+this.height-(l[1]-m)/d;break;case 90:y=t+(l[0]-f)/h,w=i-(l[1]-m)/d,[c,u]=[u,-c];break;case 180:y=t-this.width+(l[0]-f)/h,w=i-(l[1]-m)/d,[c,u]=[-c,-u];break;case 270:y=t+(l[0]-f-this.height*d)/h,w=i+(l[1]-m-this.width*h)/d,[c,u]=[-u,c];break}this.setAt(y*r,w*o,c,u)}else this._moveAfterPaste(t,i);S(this,ph,Pv).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,w,x;const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=S(y=Pe,_g,D1).call(y,i.getData("text")||"").replaceAll(Ym,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:u}=l,h=[],d=[];if(c.nodeType===Node.TEXT_NODE){const v=c.parentElement;if(d.push(c.nodeValue.slice(u).replaceAll(Ym,"")),v!==this.editorDiv){let b=h;for(const A of this.editorDiv.childNodes){if(A===v){b=d;continue}b.push(S(w=Pe,fh,Tv).call(w,A))}}h.push(c.nodeValue.slice(0,u).replaceAll(Ym,""))}else if(c===this.editorDiv){let v=h,b=0;for(const A of this.editorDiv.childNodes)b++===u&&(v=d),v.push(S(x=Pe,fh,Tv).call(x,A))}g(this,zn,`${h.join(`
`)}${r}${d.join(`
`)}`),S(this,ph,Pv).call(this);const f=new Range;let m=Math.sumPrecise(h.map(v=>v.length));for(const{firstChild:v}of this.editorDiv.childNodes)if(v.nodeType===Node.TEXT_NODE){const b=v.nodeValue.length;if(m<=b){f.setStart(v,m),f.setEnd(v,m);break}m-=b}o.removeAllRanges(),o.addRange(f)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=Pe._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){var l;let r=null;if(t instanceof mP){const{data:{defaultAppearanceData:{fontSize:c,fontColor:u},rect:h,rotation:d,id:f,popupRef:m,richText:y,contentsObj:w,creationDate:x,modificationDate:v},textContent:b,textPosition:A,parent:{page:{pageNumber:E}}}=t;if(!b||b.length===0)return null;r=t={annotationType:J.FREETEXT,color:Array.from(u),fontSize:c,value:b.join(`
`),position:A,pageIndex:E-1,rect:h.slice(0),rotation:d,annotationElementId:f,id:f,deleted:!1,popupRef:m,comment:(w==null?void 0:w.str)||null,richText:y,creationDate:x,modificationDate:v}}const o=await super.deserialize(t,i,s);return g(o,Un,t.fontSize),o.color=V.makeHexColor(...t.color),g(o,zn,S(l=Pe,_g,D1).call(l,t.value)),o._initialData=r,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=De._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:a(this,Un),value:S(this,R0,xP).call(this)});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!S(this,N0,EP).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${a(this,Un)}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of a(this,zn).split(`
`)){const o=document.createElement("div");o.append(r?document.createTextNode(r):document.createElement("br")),i.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:a(this,zn)}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};zn=new WeakMap,Cg=new WeakMap,_l=new WeakMap,Un=new WeakMap,k0=new WeakSet,bP=function(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,Un))*this.parentScale),g(this,Un,r),S(this,dh,kv).call(this)},s=a(this,Un);this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:le.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},T0=new WeakSet,SP=function(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:le.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},P0=new WeakSet,AP=function(){var s;const t=[];this.editorDiv.normalize();let i=null;for(const r of this.editorDiv.childNodes)(i==null?void 0:i.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(t.push(S(s=Pe,fh,Tv).call(s,r)),i=r);return t.join(`
`)},dh=new WeakSet,kv=function(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()},fh=new WeakSet,Tv=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Ym,"")},ph=new WeakSet,Pv=function(){if(this.editorDiv.replaceChildren(),!!a(this,zn))for(const t of a(this,zn).split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}},R0=new WeakSet,xP=function(){return a(this,zn).replaceAll(""," ")},_g=new WeakSet,D1=function(t){return t.replaceAll(" ","")},N0=new WeakSet,EP=function(t){const{value:i,fontSize:s,color:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((l,c)=>l!==r[c])||t.pageIndex!==o},p(Pe,fh),p(Pe,_g),F(Pe,"_freeTextDefaultContent",""),F(Pe,"_internalPadding",0),F(Pe,"_defaultColor",null),F(Pe,"_defaultFontSize",10),F(Pe,"_type","freetext"),F(Pe,"_editorType",J.FREETEXT);let L1=Pe;class W{toSVGPath(){Te("Abstract method `toSVGPath` must be implemented.")}get box(){Te("Abstract getter `box` must be implemented.")}serialize(e,t){Te("Abstract method `serialize` must be implemented.")}static _rescale(e,t,i,s,r,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l]*s,o[l+1]=i+e[l+1]*r;return o}static _rescaleAndSwap(e,t,i,s,r,o){o||(o=new Float32Array(e.length));for(let l=0,c=e.length;l<c;l+=2)o[l]=t+e[l+1]*s,o[l+1]=i+e[l]*r;return o}static _translate(e,t,i,s){s||(s=new Float32Array(e.length));for(let r=0,o=e.length;r<o;r+=2)s[r]=t+e[r],s[r+1]=i+e[r+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,i,s,r){switch(r){case 90:return[1-t/i,e/s];case 180:return[1-e/i,1-t/s];case 270:return[t/i,1-e/s];default:return[e/i,t/s]}}static _normalizePagePoint(e,t,i){switch(i){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,i,s,r,o){return[(e+5*i)/6,(t+5*s)/6,(5*i+r)/6,(5*s+o)/6,(i+r)/2,(s+o)/2]}}F(W,"PRECISION",1e-4);var Hn,zi,gh,mh,xs,se,kl,Tl,kg,Tg,vh,yh,To,Pg,L0,D0,Pl,Vd,M0,CP,F0,_P,I0,kP,O0,TP,B0,PP,j0,RP;const zs=class zs{constructor({x:e,y:t},i,s,r,o,l=0){p(this,Pl);p(this,M0);p(this,F0);p(this,I0);p(this,O0);p(this,B0);p(this,j0);p(this,Hn,void 0);p(this,zi,[]);p(this,gh,void 0);p(this,mh,void 0);p(this,xs,[]);p(this,se,new Float32Array(18));p(this,kl,void 0);p(this,Tl,void 0);p(this,kg,void 0);p(this,Tg,void 0);p(this,vh,void 0);p(this,yh,void 0);p(this,To,[]);g(this,Hn,i),g(this,yh,r*s),g(this,mh,o),a(this,se).set([NaN,NaN,NaN,NaN,e,t],6),g(this,gh,l),g(this,Tg,a(zs,Pg)*s),g(this,kg,a(zs,D0)*s),g(this,vh,s),a(this,To).push(e,t)}isEmpty(){return isNaN(a(this,se)[8])}add({x:e,y:t}){var N;g(this,kl,e),g(this,Tl,t);const[i,s,r,o]=a(this,Hn);let[l,c,u,h]=a(this,se).subarray(8,12);const d=e-u,f=t-h,m=Math.hypot(d,f);if(m<a(this,kg))return!1;const y=m-a(this,Tg),w=y/m,x=w*d,v=w*f;let b=l,A=c;l=u,c=h,u+=x,h+=v,(N=a(this,To))==null||N.push(e,t);const E=-v/y,_=x/y,k=E*a(this,yh),T=_*a(this,yh);return a(this,se).set(a(this,se).subarray(2,8),0),a(this,se).set([u+k,h+T],4),a(this,se).set(a(this,se).subarray(14,18),12),a(this,se).set([u-k,h-T],16),isNaN(a(this,se)[6])?(a(this,xs).length===0&&(a(this,se).set([l+k,c+T],2),a(this,xs).push(NaN,NaN,NaN,NaN,(l+k-i)/r,(c+T-s)/o),a(this,se).set([l-k,c-T],14),a(this,zi).push(NaN,NaN,NaN,NaN,(l-k-i)/r,(c-T-s)/o)),a(this,se).set([b,A,l,c,u,h],6),!this.isEmpty()):(a(this,se).set([b,A,l,c,u,h],6),Math.abs(Math.atan2(A-c,b-l)-Math.atan2(v,x))<Math.PI/2?([l,c,u,h]=a(this,se).subarray(2,6),a(this,xs).push(NaN,NaN,NaN,NaN,((l+u)/2-i)/r,((c+h)/2-s)/o),[l,c,b,A]=a(this,se).subarray(14,18),a(this,zi).push(NaN,NaN,NaN,NaN,((b+l)/2-i)/r,((A+c)/2-s)/o),!0):([b,A,l,c,u,h]=a(this,se).subarray(0,6),a(this,xs).push(((b+5*l)/6-i)/r,((A+5*c)/6-s)/o,((5*l+u)/6-i)/r,((5*c+h)/6-s)/o,((l+u)/2-i)/r,((c+h)/2-s)/o),[u,h,l,c,b,A]=a(this,se).subarray(12,18),a(this,zi).push(((b+5*l)/6-i)/r,((A+5*c)/6-s)/o,((5*l+u)/6-i)/r,((5*c+h)/6-s)/o,((l+u)/2-i)/r,((c+h)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=a(this,xs),t=a(this,zi);if(isNaN(a(this,se)[6])&&!this.isEmpty())return S(this,M0,CP).call(this);const i=[];i.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?i.push(`L${e[s+4]} ${e[s+5]}`):i.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);S(this,I0,kP).call(this,i);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?i.push(`L${t[s+4]} ${t[s+5]}`):i.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return S(this,F0,_P).call(this,i),i.join(" ")}newFreeDrawOutline(e,t,i,s,r,o){return new NP(e,t,i,s,r,o)}getOutlines(){var d;const e=a(this,xs),t=a(this,zi),i=a(this,se),[s,r,o,l]=a(this,Hn),c=new Float32Array((((d=a(this,To))==null?void 0:d.length)??0)+2);for(let f=0,m=c.length-2;f<m;f+=2)c[f]=(a(this,To)[f]-s)/o,c[f+1]=(a(this,To)[f+1]-r)/l;if(c[c.length-2]=(a(this,kl)-s)/o,c[c.length-1]=(a(this,Tl)-r)/l,isNaN(i[6])&&!this.isEmpty())return S(this,O0,TP).call(this,c);const u=new Float32Array(a(this,xs).length+24+a(this,zi).length);let h=e.length;for(let f=0;f<h;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}h=S(this,j0,RP).call(this,u,h);for(let f=t.length-6;f>=6;f-=6)for(let m=0;m<6;m+=2){if(isNaN(t[f+m])){u[h]=u[h+1]=NaN,h+=2;continue}u[h]=t[f+m],u[h+1]=t[f+m+1],h+=2}return S(this,B0,PP).call(this,u,h),this.newFreeDrawOutline(u,c,a(this,Hn),a(this,vh),a(this,gh),a(this,mh))}};Hn=new WeakMap,zi=new WeakMap,gh=new WeakMap,mh=new WeakMap,xs=new WeakMap,se=new WeakMap,kl=new WeakMap,Tl=new WeakMap,kg=new WeakMap,Tg=new WeakMap,vh=new WeakMap,yh=new WeakMap,To=new WeakMap,Pg=new WeakMap,L0=new WeakMap,D0=new WeakMap,Pl=new WeakSet,Vd=function(){const e=a(this,se).subarray(4,6),t=a(this,se).subarray(16,18),[i,s,r,o]=a(this,Hn);return[(a(this,kl)+(e[0]-t[0])/2-i)/r,(a(this,Tl)+(e[1]-t[1])/2-s)/o,(a(this,kl)+(t[0]-e[0])/2-i)/r,(a(this,Tl)+(t[1]-e[1])/2-s)/o]},M0=new WeakSet,CP=function(){const[e,t,i,s]=a(this,Hn),[r,o,l,c]=S(this,Pl,Vd).call(this);return`M${(a(this,se)[2]-e)/i} ${(a(this,se)[3]-t)/s} L${(a(this,se)[4]-e)/i} ${(a(this,se)[5]-t)/s} L${r} ${o} L${l} ${c} L${(a(this,se)[16]-e)/i} ${(a(this,se)[17]-t)/s} L${(a(this,se)[14]-e)/i} ${(a(this,se)[15]-t)/s} Z`},F0=new WeakSet,_P=function(e){const t=a(this,zi);e.push(`L${t[4]} ${t[5]} Z`)},I0=new WeakSet,kP=function(e){const[t,i,s,r]=a(this,Hn),o=a(this,se).subarray(4,6),l=a(this,se).subarray(16,18),[c,u,h,d]=S(this,Pl,Vd).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-i)/r} L${c} ${u} L${h} ${d} L${(l[0]-t)/s} ${(l[1]-i)/r}`)},O0=new WeakSet,TP=function(e){const t=a(this,se),[i,s,r,o]=a(this,Hn),[l,c,u,h]=S(this,Pl,Vd).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-i)/r,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-i)/r,(t[5]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,(t[16]-i)/r,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-i)/r,(t[15]-s)/o],0),this.newFreeDrawOutline(d,e,a(this,Hn),a(this,vh),a(this,gh),a(this,mh))},B0=new WeakSet,PP=function(e,t){const i=a(this,zi);return e.set([NaN,NaN,NaN,NaN,i[4],i[5]],t),t+=6},j0=new WeakSet,RP=function(e,t){const i=a(this,se).subarray(4,6),s=a(this,se).subarray(16,18),[r,o,l,c]=a(this,Hn),[u,h,d,f]=S(this,Pl,Vd).call(this);return e.set([NaN,NaN,NaN,NaN,(i[0]-r)/l,(i[1]-o)/c,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,f,NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c],t),t+=24},p(zs,Pg,8),p(zs,L0,2),p(zs,D0,a(zs,Pg)+a(zs,L0));let wy=zs;var wh,Rl,vr,Rg,$n,Ng,it,z0,LP;class NP extends W{constructor(t,i,s,r,o,l){super();p(this,z0);p(this,wh,void 0);p(this,Rl,new Float32Array(4));p(this,vr,void 0);p(this,Rg,void 0);p(this,$n,void 0);p(this,Ng,void 0);p(this,it,void 0);g(this,it,t),g(this,$n,i),g(this,wh,s),g(this,Ng,r),g(this,vr,o),g(this,Rg,l),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],S(this,z0,LP).call(this,l);const[c,u,h,d]=a(this,Rl);for(let f=0,m=t.length;f<m;f+=2)t[f]=(t[f]-c)/h,t[f+1]=(t[f+1]-u)/d;for(let f=0,m=i.length;f<m;f+=2)i[f]=(i[f]-c)/h,i[f+1]=(i[f+1]-u)/d}toSVGPath(){const t=[`M${a(this,it)[4]} ${a(this,it)[5]}`];for(let i=6,s=a(this,it).length;i<s;i+=6){if(isNaN(a(this,it)[i])){t.push(`L${a(this,it)[i+4]} ${a(this,it)[i+5]}`);continue}t.push(`C${a(this,it)[i]} ${a(this,it)[i+1]} ${a(this,it)[i+2]} ${a(this,it)[i+3]} ${a(this,it)[i+4]} ${a(this,it)[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],o){const l=s-t,c=r-i;let u,h;switch(o){case 0:u=W._rescale(a(this,it),t,r,l,-c),h=W._rescale(a(this,$n),t,r,l,-c);break;case 90:u=W._rescaleAndSwap(a(this,it),t,i,l,c),h=W._rescaleAndSwap(a(this,$n),t,i,l,c);break;case 180:u=W._rescale(a(this,it),s,i,-l,c),h=W._rescale(a(this,$n),s,i,-l,c);break;case 270:u=W._rescaleAndSwap(a(this,it),s,r,-l,-c),h=W._rescaleAndSwap(a(this,$n),s,r,-l,-c);break}return{outline:Array.from(u),points:[Array.from(h)]}}get box(){return a(this,Rl)}newOutliner(t,i,s,r,o,l=0){return new wy(t,i,s,r,o,l)}getNewOutline(t,i){const[s,r,o,l]=a(this,Rl),[c,u,h,d]=a(this,wh),f=o*h,m=l*d,y=s*h+c,w=r*d+u,x=this.newOutliner({x:a(this,$n)[0]*f+y,y:a(this,$n)[1]*m+w},a(this,wh),a(this,Ng),t,a(this,Rg),i??a(this,vr));for(let v=2;v<a(this,$n).length;v+=2)x.add({x:a(this,$n)[v]*f+y,y:a(this,$n)[v+1]*m+w});return x.getOutlines()}}wh=new WeakMap,Rl=new WeakMap,vr=new WeakMap,Rg=new WeakMap,$n=new WeakMap,Ng=new WeakMap,it=new WeakMap,z0=new WeakSet,LP=function(t){const i=a(this,it);let s=i[4],r=i[5];const o=[s,r,s,r];let l=s,c=r,u=s,h=r;const d=t?Math.max:Math.min,f=new Float32Array(4);for(let y=6,w=i.length;y<w;y+=6){const x=i[y+4],v=i[y+5];isNaN(i[y])?(V.pointBoundingBox(x,v,o),c>v?(l=x,c=v):c===v&&(l=d(l,x)),h<v?(u=x,h=v):h===v&&(u=d(u,x))):(f[0]=f[1]=1/0,f[2]=f[3]=-1/0,V.bezierBoundingBox(s,r,...i.slice(y,y+6),f),V.rectBoundingBox(f[0],f[1],f[2],f[3],o),c>f[1]?(l=f[0],c=f[1]):c===f[1]&&(l=d(l,f[0])),h<f[3]?(u=f[2],h=f[3]):h===f[3]&&(u=d(u,f[2]))),s=x,r=v}const m=a(this,Rl);m[0]=o[0]-a(this,vr),m[1]=o[1]-a(this,vr),m[2]=o[2]-o[0]+2*a(this,vr),m[3]=o[3]-o[1]+2*a(this,vr),this.firstPoint=[l,c],this.lastPoint=[u,h]};var Lg,Dg,Mg,Po,Ui,U0,DP,bh,Rv,H0,MP,$0,FP,Fg,F1;class M1{constructor(e,t=0,i=0,s=!0){p(this,U0);p(this,bh);p(this,H0);p(this,$0);p(this,Fg);p(this,Lg,void 0);p(this,Dg,void 0);p(this,Mg,void 0);p(this,Po,[]);p(this,Ui,[]);const r=[1/0,1/0,-1/0,-1/0],l=10**-4;for(const{x,y:v,width:b,height:A}of e){const E=Math.floor((x-t)/l)*l,_=Math.ceil((x+b+t)/l)*l,k=Math.floor((v-t)/l)*l,T=Math.ceil((v+A+t)/l)*l,P=[E,k,T,!0],N=[_,k,T,!1];a(this,Po).push(P,N),V.rectBoundingBox(E,k,_,T,r)}const c=r[2]-r[0]+2*i,u=r[3]-r[1]+2*i,h=r[0]-i,d=r[1]-i;let f=s?-1/0:1/0,m=1/0;const y=a(this,Po).at(s?-1:-2),w=[y[0],y[2]];for(const x of a(this,Po)){const[v,b,A,E]=x;!E&&s?b<m?(m=b,f=v):b===m&&(f=Math.max(f,v)):E&&!s&&(b<m?(m=b,f=v):b===m&&(f=Math.min(f,v))),x[0]=(v-h)/c,x[1]=(b-d)/u,x[2]=(A-d)/u}g(this,Lg,new Float32Array([h,d,c,u])),g(this,Dg,[f,m]),g(this,Mg,w)}getOutlines(){a(this,Po).sort((t,i)=>t[0]-i[0]||t[1]-i[1]||t[2]-i[2]);const e=[];for(const t of a(this,Po))t[3]?(e.push(...S(this,Fg,F1).call(this,t)),S(this,H0,MP).call(this,t)):(S(this,$0,FP).call(this,t),e.push(...S(this,Fg,F1).call(this,t)));return S(this,U0,DP).call(this,e)}}Lg=new WeakMap,Dg=new WeakMap,Mg=new WeakMap,Po=new WeakMap,Ui=new WeakMap,U0=new WeakSet,DP=function(e){const t=[],i=new Set;for(const o of e){const[l,c,u]=o;t.push([l,c,o],[l,u,o])}t.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=t.length;o<l;o+=2){const c=t[o][2],u=t[o+1][2];c.push(u),u.push(c),i.add(c),i.add(u)}const s=[];let r;for(;i.size>0;){const o=i.values().next().value;let[l,c,u,h,d]=o;i.delete(o);let f=l,m=c;for(r=[l,u],s.push(r);;){let y;if(i.has(h))y=h;else if(i.has(d))y=d;else break;i.delete(y),[l,c,u,h,d]=y,f!==l&&(r.push(f,m,l,m===c?c:u),f=l),m=m===c?u:c}r.push(f,m)}return new sM(s,a(this,Lg),a(this,Dg),a(this,Mg))},bh=new WeakSet,Rv=function(e){const t=a(this,Ui);let i=0,s=t.length-1;for(;i<=s;){const r=i+s>>1,o=t[r][0];if(o===e)return r;o<e?i=r+1:s=r-1}return s+1},H0=new WeakSet,MP=function([,e,t]){const i=S(this,bh,Rv).call(this,e);a(this,Ui).splice(i,0,[e,t])},$0=new WeakSet,FP=function([,e,t]){const i=S(this,bh,Rv).call(this,e);for(let s=i;s<a(this,Ui).length;s++){const[r,o]=a(this,Ui)[s];if(r!==e)break;if(r===e&&o===t){a(this,Ui).splice(s,1);return}}for(let s=i-1;s>=0;s--){const[r,o]=a(this,Ui)[s];if(r!==e)break;if(r===e&&o===t){a(this,Ui).splice(s,1);return}}},Fg=new WeakSet,F1=function(e){const[t,i,s]=e,r=[[t,i,s]],o=S(this,bh,Rv).call(this,s);for(let l=0;l<o;l++){const[c,u]=a(this,Ui)[l];for(let h=0,d=r.length;h<d;h++){const[,f,m]=r[h];if(!(u<=f||m<=c)){if(f>=c){if(m>u)r[h][1]=u;else{if(d===1)return[];r.splice(h,1),h--,d--}continue}r[h][2]=c,m>u&&r.push([t,u,m])}}}return r};var Ig,Sh;class sM extends W{constructor(t,i,s,r){super();p(this,Ig,void 0);p(this,Sh,void 0);g(this,Sh,t),g(this,Ig,i),this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of a(this,Sh)){let[s,r]=i;t.push(`M${s} ${r}`);for(let o=2;o<i.length;o+=2){const l=i[o],c=i[o+1];l===s?(t.push(`V${c}`),r=c):c===r&&(t.push(`H${l}`),s=l)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],o){const l=[],c=s-t,u=r-i;for(const h of a(this,Sh)){const d=new Array(h.length);for(let f=0;f<h.length;f+=2)d[f]=t+h[f]*c,d[f+1]=r-h[f+1]*u;l.push(d)}return l}get box(){return a(this,Ig)}get classNamesForOutlining(){return["highlightOutline"]}}Ig=new WeakMap,Sh=new WeakMap;class I1 extends wy{newFreeDrawOutline(e,t,i,s,r,o){return new rM(e,t,i,s,r,o)}}class rM extends NP{newOutliner(e,t,i,s,r,o=0){return new I1(e,t,i,s,r,o)}}var Ah,Og,yr,Nl,Bg,Sn,jg,zg,Ll,Vn,Wn,Mt,xh,Eh,Kt,Ch,mi,Ug,Hg,O1,_h,Nv,V0,IP,W0,OP,X0,BP,$g,B1,wr,ma,Ro,bc,G0,jP,kh,Lv,Th,Dv,Y0,zP,q0,UP,K0,HP,Q0,$P,Z0,VP;const he=class he extends De{constructor(t){super({...t,name:"highlightEditor"});p(this,Hg);p(this,_h);p(this,V0);p(this,W0);p(this,X0);p(this,$g);p(this,wr);p(this,G0);p(this,kh);p(this,Th);p(this,Y0);p(this,q0);p(this,Z0);p(this,Ah,null);p(this,Og,0);p(this,yr,void 0);p(this,Nl,null);p(this,Bg,null);p(this,Sn,null);p(this,jg,null);p(this,zg,0);p(this,Ll,null);p(this,Vn,null);p(this,Wn,null);p(this,Mt,!1);p(this,xh,null);p(this,Eh,null);p(this,Kt,null);p(this,Ch,"");p(this,mi,void 0);p(this,Ug,"");this.color=t.color||he._defaultColor,g(this,mi,t.thickness||he._defaultThickness),this.opacity=t.opacity||he._defaultOpacity,g(this,yr,t.boxes||null),g(this,Ug,t.methodOfCreation||""),g(this,Ch,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(g(this,Mt,!0),S(this,_h,Nv).call(this,t),S(this,wr,ma).call(this)):a(this,yr)&&(g(this,Ah,t.anchorNode),g(this,Og,t.anchorOffset),g(this,jg,t.focusNode),g(this,zg,t.focusOffset),S(this,Hg,O1).call(this),S(this,wr,ma).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=he.prototype;return ie(this,"_keyboardManager",new gm([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,Mt)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:a(this,mi),methodOfCreation:a(this,Ug)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,i){var s;De.initialize(t,i),he._defaultColor||(he._defaultColor=((s=i.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,i){switch(t){case le.HIGHLIGHT_COLOR:he._defaultColor=i;break;case le.HIGHLIGHT_THICKNESS:he._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return a(this,Eh)}get commentButtonPosition(){return a(this,xh)}updateParams(t,i){switch(t){case le.HIGHLIGHT_COLOR:S(this,V0,IP).call(this,i);break;case le.HIGHLIGHT_THICKNESS:S(this,W0,OP).call(this,i);break}}static get defaultPropertiesToUpdate(){return[[le.HIGHLIGHT_COLOR,he._defaultColor],[le.HIGHLIGHT_THICKNESS,he._defaultThickness]]}get propertiesToUpdate(){return[[le.HIGHLIGHT_COLOR,this.color||he._defaultColor],[le.HIGHLIGHT_THICKNESS,a(this,mi)||he._defaultThickness],[le.HIGHLIGHT_FREE,a(this,Mt)]]}onUpdatedColor(){var t,i;(t=this.parent)==null||t.drawLayer.updateProperties(a(this,Wn),{root:{fill:this.color,"fill-opacity":this.opacity}}),(i=a(this,Bg))==null||i.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",g(this,Bg,new Pf({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(S(this,Th,Dv).call(this))}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,S(this,Th,Dv).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){S(this,$g,B1).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,wr,ma).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?S(this,$g,B1).call(this):t&&(S(this,wr,ma).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),i&&this.select()}rotate(t){var r,o,l;const{drawLayer:i}=this.parent;let s;a(this,Mt)?(t=(t-this.rotation+360)%360,s=S(r=he,Ro,bc).call(r,a(this,Vn).box,t)):s=S(o=he,Ro,bc).call(o,[this.x,this.y,this.width,this.height],t),i.updateProperties(a(this,Wn),{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(a(this,Kt),{bbox:S(l=he,Ro,bc).call(l,a(this,Sn).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();a(this,Ch)&&(t.setAttribute("aria-label",a(this,Ch)),t.setAttribute("role","mark")),a(this,Mt)?t.classList.add("free"):this.div.addEventListener("keydown",S(this,G0,jP).bind(this),{signal:this._uiManager._signal});const i=g(this,Ll,document.createElement("div"));return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=a(this,Nl),this.setDims(this.width,this.height),hT(this,a(this,Ll),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(a(this,Kt),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(a(this,Kt),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:S(this,kh,Lv).call(this,!0);break;case 1:case 3:S(this,kh,Lv).call(this,!1);break}}select(){var t;super.select(),a(this,Kt)&&((t=this.parent)==null||t.drawLayer.updateProperties(a(this,Kt),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),a(this,Kt)&&((t=this.parent)==null||t.drawLayer.updateProperties(a(this,Kt),{rootClass:{selected:!1}}),a(this,Mt)||S(this,kh,Lv).call(this,!1))}get _mustFixPosition(){return!a(this,Mt)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(a(this,Wn),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(a(this,Kt),{rootClass:{hidden:!t}}))}static startHighlighting(t,i,{target:s,x:r,y:o}){const{x:l,y:c,width:u,height:h}=s.getBoundingClientRect(),d=new AbortController,f=t.combinedSignal(d),m=y=>{d.abort(),S(this,Q0,$P).call(this,t,y)};window.addEventListener("blur",m,{signal:f}),window.addEventListener("pointerup",m,{signal:f}),window.addEventListener("pointerdown",Ge,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ti,{signal:f}),s.addEventListener("pointermove",S(this,K0,HP).bind(this,t),{signal:f}),this._freeHighlight=new I1({x:r,y:o},[l,c,u,h],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,i,s){var w,x,v,b;let r=null;if(t instanceof yP){const{data:{quadPoints:A,rect:E,rotation:_,id:k,color:T,opacity:P,popupRef:N,richText:R,contentsObj:L,creationDate:O,modificationDate:$},parent:{page:{pageNumber:U}}}=t;r=t={annotationType:J.HIGHLIGHT,color:Array.from(T),opacity:P,quadPoints:A,boxes:null,pageIndex:U-1,rect:E.slice(0),rotation:_,annotationElementId:k,id:k,deleted:!1,popupRef:N,richText:R,comment:(L==null?void 0:L.str)||null,creationDate:O,modificationDate:$}}else if(t instanceof mx){const{data:{inkLists:A,rect:E,rotation:_,id:k,color:T,borderStyle:{rawWidth:P},popupRef:N,richText:R,contentsObj:L,creationDate:O,modificationDate:$},parent:{page:{pageNumber:U}}}=t;r=t={annotationType:J.HIGHLIGHT,color:Array.from(T),thickness:P,inkLists:A,boxes:null,pageIndex:U-1,rect:E.slice(0),rotation:_,annotationElementId:k,id:k,deleted:!1,popupRef:N,richText:R,comment:(L==null?void 0:L.str)||null,creationDate:O,modificationDate:$}}const{color:o,quadPoints:l,inkLists:c,opacity:u}=t,h=await super.deserialize(t,i,s);h.color=V.makeHexColor(...o),h.opacity=u||1,c&&g(h,mi,t.thickness),h._initialData=r,t.comment&&h.setCommentData(t);const[d,f]=h.pageDimensions,[m,y]=h.pageTranslation;if(l){const A=g(h,yr,[]);for(let E=0;E<l.length;E+=8)A.push({x:(l[E]-m)/d,y:1-(l[E+1]-y)/f,width:(l[E+2]-l[E])/d,height:(l[E+1]-l[E+5])/f});S(w=h,Hg,O1).call(w),S(x=h,wr,ma).call(x),h.rotate(h.rotation)}else if(c){g(h,Mt,!0);const A=c[0],E={x:A[0]-m,y:f-(A[1]-y)},_=new I1(E,[0,0,d,f],1,a(h,mi)/2,!0,.001);for(let P=0,N=A.length;P<N;P+=2)E.x=A[P]-m,E.y=f-(A[P+1]-y),_.add(E);const{id:k,clipPathId:T}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:h.color,"fill-opacity":h._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:_.toSVGPath()}},!0,!0);S(v=h,_h,Nv).call(v,{highlightOutlines:_.getOutlines(),highlightId:k,clipPathId:T}),S(b=h,wr,ma).call(b),h.rotate(h.parentRotation)}return h}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=De._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:a(this,mi),quadPoints:S(this,Y0,zP).call(this),outlines:S(this,q0,UP).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!S(this,Z0,VP).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Ah=new WeakMap,Og=new WeakMap,yr=new WeakMap,Nl=new WeakMap,Bg=new WeakMap,Sn=new WeakMap,jg=new WeakMap,zg=new WeakMap,Ll=new WeakMap,Vn=new WeakMap,Wn=new WeakMap,Mt=new WeakMap,xh=new WeakMap,Eh=new WeakMap,Kt=new WeakMap,Ch=new WeakMap,mi=new WeakMap,Ug=new WeakMap,Hg=new WeakSet,O1=function(){const t=new M1(a(this,yr),.001);g(this,Vn,t.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,Vn).box;const i=new M1(a(this,yr),.0025,.001,this._uiManager.direction==="ltr");g(this,Sn,i.getOutlines());const{firstPoint:s}=a(this,Vn);g(this,xh,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:r}=a(this,Sn);g(this,Eh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},_h=new WeakSet,Nv=function({highlightOutlines:t,highlightId:i,clipPathId:s}){var f,m;g(this,Vn,t);const r=1.5;if(g(this,Sn,t.getNewOutline(a(this,mi)/2+r,.0025)),i>=0)g(this,Wn,i),g(this,Nl,s),this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),g(this,Kt,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,Sn).box,path:{d:a(this,Sn).toSVGPath()}},!0));else if(this.parent){const y=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,Wn),{bbox:S(f=he,Ro,bc).call(f,a(this,Vn).box,(y-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,Kt),{bbox:S(m=he,Ro,bc).call(m,a(this,Sn).box,y),path:{d:a(this,Sn).toSVGPath()}})}const[o,l,c,u]=t.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=u;break;case 90:{const[y,w]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*w/y,this.height=u*y/w;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=u;break;case 270:{const[y,w]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*w/y,this.height=u*y/w;break}}const{firstPoint:h}=t;g(this,xh,[(h[0]-o)/c,(h[1]-l)/u]);const{lastPoint:d}=a(this,Sn);g(this,Eh,[(d[0]-o)/c,(d[1]-l)/u])},V0=new WeakSet,IP=function(t){const i=(o,l)=>{this.color=o,this.opacity=l,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,he._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:le.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},W0=new WeakSet,OP=function(t){const i=a(this,mi),s=r=>{g(this,mi,r),S(this,X0,BP).call(this,r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:le.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},X0=new WeakSet,BP=function(t){a(this,Mt)&&(S(this,_h,Nv).call(this,{highlightOutlines:a(this,Vn).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},$g=new WeakSet,B1=function(){a(this,Wn)===null||!this.parent||(this.parent.drawLayer.remove(a(this,Wn)),g(this,Wn,null),this.parent.drawLayer.remove(a(this,Kt)),g(this,Kt,null))},wr=new WeakSet,ma=function(t=this.parent){a(this,Wn)===null&&({id:ht(this,Wn)._,clipPathId:ht(this,Nl)._}=t.drawLayer.draw({bbox:a(this,Vn).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:a(this,Mt)},path:{d:a(this,Vn).toSVGPath()}},!1,!0),g(this,Kt,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,Mt)},bbox:a(this,Sn).box,path:{d:a(this,Sn).toSVGPath()}},a(this,Mt))),a(this,Ll)&&(a(this,Ll).style.clipPath=a(this,Nl)))},Ro=new WeakSet,bc=function([t,i,s,r],o){switch(o){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]},G0=new WeakSet,jP=function(t){he._keyboardManager.exec(this,t)},kh=new WeakSet,Lv=function(t){if(!a(this,Ah))return;const i=window.getSelection();t?i.setPosition(a(this,Ah),a(this,Og)):i.setPosition(a(this,jg),a(this,zg))},Th=new WeakSet,Dv=function(){return a(this,Mt)?this.rotation:0},Y0=new WeakSet,zP=function(){if(a(this,Mt))return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,o=a(this,yr),l=new Float32Array(o.length*8);let c=0;for(const{x:u,y:h,width:d,height:f}of o){const m=u*t+s,y=(1-h)*i+r;l[c]=l[c+4]=m,l[c+1]=l[c+3]=y,l[c+2]=l[c+6]=m+d*t,l[c+5]=l[c+7]=y-f*i,c+=8}return l},q0=new WeakSet,UP=function(t){return a(this,Vn).serialize(t,S(this,Th,Dv).call(this))},K0=new WeakSet,HP=function(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},Q0=new WeakSet,$P=function(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},Z0=new WeakSet,VP=function(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])},p(he,Ro),p(he,K0),p(he,Q0),F(he,"_defaultColor",null),F(he,"_defaultOpacity",1),F(he,"_defaultThickness",12),F(he,"_type","highlight"),F(he,"_editorType",J.HIGHLIGHT),F(he,"_freeHighlightId",-1),F(he,"_freeHighlight",null),F(he,"_freeHighlightClipId","");let by=he;var Dl;class WP{constructor(){p(this,Dl,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,i]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,i)}updateSVGProperty(e,t){a(this,Dl)[e]=t}toSVGProperties(){const e=a(this,Dl);return g(this,Dl,Object.create(null)),{root:e}}reset(){g(this,Dl,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Te("Not implemented")}}Dl=new WeakMap;var Xn,Ph,bt,Ml,Fl,No,Lo,Do,Il,Vg,j1,Wg,z1,Xg,U1,Ol,Wd,J0,XP,Rh,Mv,Bl,Xd,Mo,Sc;const G=class G extends De{constructor(t){super(t);p(this,Vg);p(this,Wg);p(this,Xg);p(this,Ol);p(this,J0);p(this,Rh);p(this,Bl);p(this,Mo);p(this,Xn,null);p(this,Ph,void 0);F(this,"_colorPicker",null);F(this,"_drawId",null);g(this,Ph,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(S(this,Vg,j1).call(this,t),S(this,Ol,Wd).call(this))}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,o]of Object.entries(i))s.has(r)?Object.assign(t[r],o):t[r]=o;return t}static getDefaultDrawingOptions(t){Te("Not implemented")}static get typesMap(){Te("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(a(G,bt).updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,o=r[i],l=c=>{var h;r.updateProperty(i,c);const u=a(this,Xn).updateProperty(i,c);u&&S(this,Bl,Xd).call(this,u),(h=this.parent)==null||h.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:l.bind(this,s),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,G._mergeSVGProperties(a(this,Xn).getPathResizingSVGProperties(S(this,Rh,Mv).call(this)),{bbox:S(this,Mo,Sc).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,G._mergeSVGProperties(a(this,Xn).getPathResizedSVGProperties(S(this,Rh,Mv).call(this)),{bbox:S(this,Mo,Sc).call(this)}))}_onTranslating(t,i){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:S(this,Mo,Sc).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,G._mergeSVGProperties(a(this,Xn).getPathTranslatedSVGProperties(S(this,Rh,Mv).call(this),this.parentDimensions),{bbox:S(this,Mo,Sc).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,Ph)&&(g(this,Ph,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){S(this,Xg,U1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(S(this,Ol,Wd).call(this),S(this,Bl,Xd).call(this,a(this,Xn).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),S(this,Xg,U1).call(this)):t&&(this._uiManager.addShouldRescale(this),S(this,Ol,Wd).call(this,t),i=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),i&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,G._mergeSVGProperties({bbox:S(this,Mo,Sc).call(this)},a(this,Xn).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&S(this,Bl,Xd).call(this,a(this,Xn).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,o){Te("Not implemented")}static startDrawing(t,i,s,r){var x;const{target:o,offsetX:l,offsetY:c,pointerId:u,pointerType:h}=r;if(a(G,Lo)&&a(G,Lo)!==h)return;const{viewport:{rotation:d}}=t,{width:f,height:m}=o.getBoundingClientRect(),y=g(G,Ml,new AbortController),w=t.combinedSignal(y);if(a(G,No)||g(G,No,u),a(G,Lo)??g(G,Lo,h),window.addEventListener("pointerup",v=>{var b;a(G,No)===v.pointerId?this._endDraw(v):(b=a(G,Do))==null||b.delete(v.pointerId)},{signal:w}),window.addEventListener("pointercancel",v=>{var b;a(G,No)===v.pointerId?this._currentParent.endDrawingSession():(b=a(G,Do))==null||b.delete(v.pointerId)},{signal:w}),window.addEventListener("pointerdown",v=>{a(G,Lo)===v.pointerType&&((a(G,Do)||g(G,Do,new Set)).add(v.pointerId),a(G,bt).isCancellable()&&(a(G,bt).removeLastElement(),a(G,bt).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",ti,{signal:w}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),o.addEventListener("touchmove",v=>{v.timeStamp===a(G,Il)&&Ge(v)},{signal:w}),t.toggleDrawing(),(x=i._editorUndoBar)==null||x.hide(),a(G,bt)){t.drawLayer.updateProperties(this._currentDrawId,a(G,bt).startNew(l,c,f,m,d));return}i.updateUIForDefaultProperties(this),g(G,bt,this.createDrawerInstance(l,c,f,m,d)),g(G,Fl,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(a(G,Fl).toSVGProperties(),a(G,bt).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(g(G,Il,-1),!a(G,bt))return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(a(G,No)===r){if(((o=a(G,Do))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(G,bt).add(i,s)),g(G,Il,t.timeStamp),Ge(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,g(G,bt,null),g(G,Fl,null),g(G,Lo,null),g(G,Il,NaN)),a(G,Ml)&&(a(G,Ml).abort(),g(G,Ml,null),g(G,No,NaN),g(G,Do,null))}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===i.div&&i.drawLayer.updateProperties(this._currentDrawId,a(G,bt).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=a(G,bt),r=this._currentDrawId,o=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(o))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:le.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(le.DRAW_STEP),!a(G,bt).isEmpty()){const{pageDimensions:[s,r],scale:o}=i,l=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(G,bt).getOutlines(s*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(G,Fl),mustBeCommitted:!t});return this._cleanup(!0),l}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,o,l){Te("Not implemented")}static async deserialize(t,i,s){var d,f;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=i.viewport,u=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,t),h=await super.deserialize(t,i,s);return h.createDrawingOptions(t),S(d=h,Vg,j1).call(d,{drawOutlines:u}),S(f=h,Ol,Wd).call(f),h.onScaleChanging(),h.rotate(),h}serializeDraw(t){const[i,s]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,Xn).serialize([i,s,r,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Xn=new WeakMap,Ph=new WeakMap,bt=new WeakMap,Ml=new WeakMap,Fl=new WeakMap,No=new WeakMap,Lo=new WeakMap,Do=new WeakMap,Il=new WeakMap,Vg=new WeakSet,j1=function({drawOutlines:t,drawId:i,drawingOptions:s}){g(this,Xn,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=S(this,Wg,z1).call(this,t,this.parent),S(this,Bl,Xd).call(this,t.box)},Wg=new WeakSet,z1=function(t,i){const{id:s}=i.drawLayer.draw(G._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},Xg=new WeakSet,U1=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Ol=new WeakSet,Wd=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=S(this,Wg,z1).call(this,a(this,Xn),t)}},J0=new WeakSet,XP=function([t,i,s,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[i,1-t,s*(l/o),r*(o/l)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(l/o),r*(o/l)];default:return[t,i,s,r]}},Rh=new WeakSet,Mv=function(){const{x:t,y:i,width:s,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-i,t,s*(o/l),r*(l/o)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(o/l),r*(l/o)];default:return[t,i,s,r]}},Bl=new WeakSet,Xd=function(t){[this.x,this.y,this.width,this.height]=S(this,J0,XP).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Mo=new WeakSet,Sc=function(){const{x:t,y:i,width:s,height:r,rotation:o,parentRotation:l,parentDimensions:[c,u]}=this;switch((o*4+l)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(c/u),r*(u/c),s*(c/u)];case 5:return[1-i,t,s*(c/u),r*(u/c)];case 6:return[1-t-r*(u/c),1-i,r*(u/c),s*(c/u)];case 7:return[i-s*(c/u),1-t-r*(u/c),s*(c/u),r*(u/c)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(u/c),i,r*(u/c),s*(c/u)];case 13:return[1-i-s*(c/u),t-r*(u/c),s*(c/u),r*(u/c)];case 14:return[1-t,1-i-s*(c/u),r*(u/c),s*(c/u)];case 15:return[i,1-t,s*(c/u),r*(u/c)];default:return[t,i,s,r]}},F(G,"_currentDrawId",-1),F(G,"_currentParent",null),p(G,bt,null),p(G,Ml,null),p(G,Fl,null),p(G,No,NaN),p(G,Lo,null),p(G,Do,null),p(G,Il,NaN),F(G,"_INNER_MARGIN",3);let Sy=G;var Es,St,At,jl,Nh,sn,Ft,vi,zl,Ul,Hl,Lh,Fv;class oM{constructor(e,t,i,s,r,o){p(this,Lh);p(this,Es,new Float64Array(6));p(this,St,void 0);p(this,At,void 0);p(this,jl,void 0);p(this,Nh,void 0);p(this,sn,void 0);p(this,Ft,"");p(this,vi,0);p(this,zl,new vm);p(this,Ul,void 0);p(this,Hl,void 0);g(this,Ul,i),g(this,Hl,s),g(this,jl,r),g(this,Nh,o),[e,t]=S(this,Lh,Fv).call(this,e,t);const l=g(this,St,[NaN,NaN,NaN,NaN,e,t]);g(this,sn,[e,t]),g(this,At,[{line:l,points:a(this,sn)}]),a(this,Es).set(l,0)}updateProperty(e,t){e==="stroke-width"&&g(this,Nh,t)}isEmpty(){return!a(this,At)||a(this,At).length===0}isCancellable(){return a(this,sn).length<=10}add(e,t){[e,t]=S(this,Lh,Fv).call(this,e,t);const[i,s,r,o]=a(this,Es).subarray(2,6),l=e-r,c=t-o;return Math.hypot(a(this,Ul)*l,a(this,Hl)*c)<=2?null:(a(this,sn).push(e,t),isNaN(i)?(a(this,Es).set([r,o,e,t],2),a(this,St).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(a(this,Es)[0])&&a(this,St).splice(6,6),a(this,Es).set([i,s,r,o,e,t],0),a(this,St).push(...W.createBezierPoints(i,s,r,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const i=this.add(e,t);return i||(a(this,sn).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,i,s,r){g(this,Ul,i),g(this,Hl,s),g(this,jl,r),[e,t]=S(this,Lh,Fv).call(this,e,t);const o=g(this,St,[NaN,NaN,NaN,NaN,e,t]);g(this,sn,[e,t]);const l=a(this,At).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,At).push({line:o,points:a(this,sn)}),a(this,Es).set(o,0),g(this,vi,0),this.toSVGPath(),null}getLastElement(){return a(this,At).at(-1)}setLastElement(e){return a(this,At)?(a(this,At).push(e),g(this,St,e.line),g(this,sn,e.points),g(this,vi,0),{path:{d:this.toSVGPath()}}):a(this,zl).setLastElement(e)}removeLastElement(){if(!a(this,At))return a(this,zl).removeLastElement();a(this,At).pop(),g(this,Ft,"");for(let e=0,t=a(this,At).length;e<t;e++){const{line:i,points:s}=a(this,At)[e];g(this,St,i),g(this,sn,s),g(this,vi,0),this.toSVGPath()}return{path:{d:a(this,Ft)}}}toSVGPath(){const e=W.svgRound(a(this,St)[4]),t=W.svgRound(a(this,St)[5]);if(a(this,sn).length===2)return g(this,Ft,`${a(this,Ft)} M ${e} ${t} Z`),a(this,Ft);if(a(this,sn).length<=6){const s=a(this,Ft).lastIndexOf("M");g(this,Ft,`${a(this,Ft).slice(0,s)} M ${e} ${t}`),g(this,vi,6)}if(a(this,sn).length===4){const s=W.svgRound(a(this,St)[10]),r=W.svgRound(a(this,St)[11]);return g(this,Ft,`${a(this,Ft)} L ${s} ${r}`),g(this,vi,12),a(this,Ft)}const i=[];a(this,vi)===0&&(i.push(`M ${e} ${t}`),g(this,vi,6));for(let s=a(this,vi),r=a(this,St).length;s<r;s+=6){const[o,l,c,u,h,d]=a(this,St).slice(s,s+6).map(W.svgRound);i.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}return g(this,Ft,a(this,Ft)+i.join(" ")),g(this,vi,a(this,St).length),a(this,Ft)}getOutlines(e,t,i,s){const r=a(this,At).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,zl).build(a(this,At),e,t,i,a(this,jl),a(this,Nh),s),g(this,Es,null),g(this,St,null),g(this,At,null),g(this,Ft,null),a(this,zl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Es=new WeakMap,St=new WeakMap,At=new WeakMap,jl=new WeakMap,Nh=new WeakMap,sn=new WeakMap,Ft=new WeakMap,vi=new WeakMap,zl=new WeakMap,Ul=new WeakMap,Hl=new WeakMap,Lh=new WeakSet,Fv=function(e,t){return W._normalizePoint(e,t,a(this,Ul),a(this,Hl),a(this,jl))};var rn,Gg,Yg,Gn,Cs,_s,Dh,Mh,$l,Hi,Os,ew,GP,tw,YP,nw,qP;class vm extends W{constructor(){super(...arguments);p(this,Hi);p(this,ew);p(this,tw);p(this,nw);p(this,rn,void 0);p(this,Gg,0);p(this,Yg,void 0);p(this,Gn,void 0);p(this,Cs,void 0);p(this,_s,void 0);p(this,Dh,void 0);p(this,Mh,void 0);p(this,$l,void 0)}build(t,i,s,r,o,l,c){g(this,Cs,i),g(this,_s,s),g(this,Dh,r),g(this,Mh,o),g(this,$l,l),g(this,Yg,c??0),g(this,Gn,t),S(this,tw,YP).call(this)}get thickness(){return a(this,$l)}setLastElement(t){return a(this,Gn).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,Gn).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of a(this,Gn)){if(t.push(`M${W.svgRound(i[4])} ${W.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${W.svgRound(i[10])} ${W.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[o,l,c,u,h,d]=i.subarray(s,s+6).map(W.svgRound);t.push(`C${o} ${l} ${c} ${u} ${h} ${d}`)}}return t.join("")}serialize([t,i,s,r],o){const l=[],c=[],[u,h,d,f]=S(this,ew,GP).call(this);let m,y,w,x,v,b,A,E,_;switch(a(this,Mh)){case 0:_=W._rescale,m=t,y=i+r,w=s,x=-r,v=t+u*s,b=i+(1-h-f)*r,A=t+(u+d)*s,E=i+(1-h)*r;break;case 90:_=W._rescaleAndSwap,m=t,y=i,w=s,x=r,v=t+h*s,b=i+u*r,A=t+(h+f)*s,E=i+(u+d)*r;break;case 180:_=W._rescale,m=t+s,y=i,w=-s,x=r,v=t+(1-u-d)*s,b=i+h*r,A=t+(1-u)*s,E=i+(h+f)*r;break;case 270:_=W._rescaleAndSwap,m=t+s,y=i+r,w=-s,x=-r,v=t+(1-h-f)*s,b=i+(1-u-d)*r,A=t+(1-h)*s,E=i+(1-u)*r;break}for(const{line:k,points:T}of a(this,Gn))l.push(_(k,m,y,w,x,o?new Array(k.length):null)),c.push(_(T,m,y,w,x,o?new Array(T.length):null));return{lines:l,points:c,rect:[v,b,A,E]}}static deserialize(t,i,s,r,o,{paths:{lines:l,points:c},rotation:u,thickness:h}){const d=[];let f,m,y,w,x;switch(u){case 0:x=W._rescale,f=-t/s,m=i/r+1,y=1/s,w=-1/r;break;case 90:x=W._rescaleAndSwap,f=-i/r,m=-t/s,y=1/r,w=1/s;break;case 180:x=W._rescale,f=t/s+1,m=-i/r,y=-1/s,w=1/r;break;case 270:x=W._rescaleAndSwap,f=i/r+1,m=t/s+1,y=-1/r,w=-1/s;break}if(!l){l=[];for(const b of c){const A=b.length;if(A===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1]]));continue}if(A===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,b[0],b[1],NaN,NaN,NaN,NaN,b[2],b[3]]));continue}const E=new Float32Array(3*(A-2));l.push(E);let[_,k,T,P]=b.subarray(0,4);E.set([NaN,NaN,NaN,NaN,_,k],0);for(let N=4;N<A;N+=2){const R=b[N],L=b[N+1];E.set(W.createBezierPoints(_,k,T,P,R,L),(N-2)*3),[_,k,T,P]=[T,P,R,L]}}}for(let b=0,A=l.length;b<A;b++)d.push({line:x(l[b].map(E=>E??NaN),f,m,y,w),points:x(c[b].map(E=>E??NaN),f,m,y,w)});const v=new this.prototype.constructor;return v.build(d,s,r,1,u,h,o),v}get box(){return a(this,rn)}updateProperty(t,i){return t==="stroke-width"?S(this,nw,qP).call(this,i):null}updateParentDimensions([t,i],s){const[r,o]=S(this,Hi,Os).call(this);g(this,Cs,t),g(this,_s,i),g(this,Dh,s);const[l,c]=S(this,Hi,Os).call(this),u=l-r,h=c-o,d=a(this,rn);return d[0]-=u,d[1]-=h,d[2]+=2*u,d[3]+=2*h,d}updateRotation(t){return g(this,Gg,t),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,rn).map(W.svgRound).join(" ")}get defaultProperties(){const[t,i]=a(this,rn);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${W.svgRound(t)} ${W.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=a(this,rn);let s=0,r=0,o=0,l=0,c=0,u=0;switch(a(this,Gg)){case 90:r=i/t,o=-t/i,c=t;break;case 180:s=-1,l=-1,c=t,u=i;break;case 270:r=-i/t,o=t/i,u=i;break;default:return""}return`matrix(${s} ${r} ${o} ${l} ${W.svgRound(c)} ${W.svgRound(u)})`}getPathResizingSVGProperties([t,i,s,r]){const[o,l]=S(this,Hi,Os).call(this),[c,u,h,d]=a(this,rn);if(Math.abs(h-o)<=W.PRECISION||Math.abs(d-l)<=W.PRECISION){const x=t+s/2-(c+h/2),v=i+r/2-(u+d/2);return{path:{"transform-origin":`${W.svgRound(t)} ${W.svgRound(i)}`,transform:`${this.rotationTransform} translate(${x} ${v})`}}}const f=(s-2*o)/(h-2*o),m=(r-2*l)/(d-2*l),y=h/s,w=d/r;return{path:{"transform-origin":`${W.svgRound(c)} ${W.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${w}) translate(${W.svgRound(o)} ${W.svgRound(l)}) scale(${f} ${m}) translate(${W.svgRound(-o)} ${W.svgRound(-l)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[o,l]=S(this,Hi,Os).call(this),c=a(this,rn),[u,h,d,f]=c;if(c[0]=t,c[1]=i,c[2]=s,c[3]=r,Math.abs(d-o)<=W.PRECISION||Math.abs(f-l)<=W.PRECISION){const v=t+s/2-(u+d/2),b=i+r/2-(h+f/2);for(const{line:A,points:E}of a(this,Gn))W._translate(A,v,b,A),W._translate(E,v,b,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${W.svgRound(t)} ${W.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const m=(s-2*o)/(d-2*o),y=(r-2*l)/(f-2*l),w=-m*(u+o)+t+o,x=-y*(h+l)+i+l;if(m!==1||y!==1||w!==0||x!==0)for(const{line:v,points:b}of a(this,Gn))W._rescale(v,w,x,m,y,v),W._rescale(b,w,x,m,y,b);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${W.svgRound(t)} ${W.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,o]=s,l=a(this,rn),c=t-l[0],u=i-l[1];if(a(this,Cs)===r&&a(this,_s)===o)for(const{line:h,points:d}of a(this,Gn))W._translate(h,c,u,h),W._translate(d,c,u,d);else{const h=a(this,Cs)/r,d=a(this,_s)/o;g(this,Cs,r),g(this,_s,o);for(const{line:f,points:m}of a(this,Gn))W._rescale(f,c,u,h,d,f),W._rescale(m,c,u,h,d,m);l[2]*=h,l[3]*=d}return l[0]=t,l[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${W.svgRound(t)} ${W.svgRound(i)}`}}}get defaultSVGProperties(){const t=a(this,rn);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${W.svgRound(t[0])} ${W.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}rn=new WeakMap,Gg=new WeakMap,Yg=new WeakMap,Gn=new WeakMap,Cs=new WeakMap,_s=new WeakMap,Dh=new WeakMap,Mh=new WeakMap,$l=new WeakMap,Hi=new WeakSet,Os=function(t=a(this,$l)){const i=a(this,Yg)+t/2*a(this,Dh);return a(this,Mh)%180===0?[i/a(this,Cs),i/a(this,_s)]:[i/a(this,_s),i/a(this,Cs)]},ew=new WeakSet,GP=function(){const[t,i,s,r]=a(this,rn),[o,l]=S(this,Hi,Os).call(this,0);return[t+o,i+l,s-2*o,r-2*l]},tw=new WeakSet,YP=function(){const t=g(this,rn,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,Gn)){if(r.length<=12){for(let c=4,u=r.length;c<u;c+=6)V.pointBoundingBox(r[c],r[c+1],t);continue}let o=r[4],l=r[5];for(let c=6,u=r.length;c<u;c+=6){const[h,d,f,m,y,w]=r.subarray(c,c+6);V.bezierBoundingBox(o,l,h,d,f,m,y,w,t),o=y,l=w}}const[i,s]=S(this,Hi,Os).call(this);t[0]=Qt(t[0]-i,0,1),t[1]=Qt(t[1]-s,0,1),t[2]=Qt(t[2]+i,0,1),t[3]=Qt(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},nw=new WeakSet,qP=function(t){const[i,s]=S(this,Hi,Os).call(this);g(this,$l,t);const[r,o]=S(this,Hi,Os).call(this),[l,c]=[r-i,o-s],u=a(this,rn);return u[0]-=l,u[1]-=c,u[2]+=2*l,u[3]+=2*c,u};class Fw extends WP{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:De._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new Fw(this._viewParameters);return e.updateAll(this),e}}var iw,KP;const Bc=class Bc extends Sy{constructor(t){super({...t,name:"inkEditor"});p(this,iw);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){De.initialize(t,i),this._defaultDrawingOptions=new Fw(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return ie(this,"typesMap",new Map([[le.INK_THICKNESS,"stroke-width"],[le.INK_COLOR,"stroke"],[le.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,o){return new oM(t,i,s,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,o,l){return vm.deserialize(t,i,s,r,o,l)}static async deserialize(t,i,s){let r=null;if(t instanceof mx){const{data:{inkLists:l,rect:c,rotation:u,id:h,color:d,opacity:f,borderStyle:{rawWidth:m},popupRef:y,richText:w,contentsObj:x,creationDate:v,modificationDate:b},parent:{page:{pageNumber:A}}}=t;r=t={annotationType:J.INK,color:Array.from(d),thickness:m,opacity:f,paths:{points:l},boxes:null,pageIndex:A-1,rect:c.slice(0),rotation:u,annotationElementId:h,id:h,deleted:!1,popupRef:y,richText:w,comment:(x==null?void 0:x.str)||null,creationDate:v,modificationDate:b}}const o=await super.deserialize(t,i,s);return o._initialData=r,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new yy(this)),[["colorPicker",this._colorPicker]]}get colorType(){return le.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=Bc.getDefaultDrawingOptions({stroke:V.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":o,"stroke-width":l}}=this,c=Object.assign(super.serialize(t),{color:De._colorManager.convert(r),opacity:o,thickness:l,paths:{lines:i,points:s}});return this.addComment(c),t?(c.isCopy=!0,c):this.annotationElementId&&!S(this,iw,KP).call(this,c)?null:(c.id=this.annotationElementId,c)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}};iw=new WeakSet,KP=function(t){const{color:i,thickness:s,opacity:r,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((l,c)=>l!==i[c])||t.thickness!==s||t.opacity!==r||t.pageIndex!==o},F(Bc,"_type","ink"),F(Bc,"_editorType",J.INK),F(Bc,"_defaultDrawingOptions",null);let H1=Bc;class $1 extends vm{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const qm=8,Sd=3;var Vl,qg,V1,$i,sw,QP,rw,ZP,Kg,W1,Fh,Iv,ow,JP,aw,e2,lw,t2,Qg,X1,Zg,G1,cw,n2;class ct{static extractContoursFromText(e,{fontFamily:t,fontStyle:i,fontWeight:s},r,o,l,c){let u=new OffscreenCanvas(1,1),h=u.getContext("2d",{alpha:!1});const d=200,f=h.font=`${i} ${s} ${d}px ${t}`,{actualBoundingBoxLeft:m,actualBoundingBoxRight:y,actualBoundingBoxAscent:w,actualBoundingBoxDescent:x,fontBoundingBoxAscent:v,fontBoundingBoxDescent:b,width:A}=h.measureText(e),E=1.5,_=Math.ceil(Math.max(Math.abs(m)+Math.abs(y)||0,A)*E),k=Math.ceil(Math.max(Math.abs(w)+Math.abs(x)||d,Math.abs(v)+Math.abs(b)||d)*E);u=new OffscreenCanvas(_,k),h=u.getContext("2d",{alpha:!0,willReadFrequently:!0}),h.font=f,h.filter="grayscale(1)",h.fillStyle="white",h.fillRect(0,0,_,k),h.fillStyle="black",h.fillText(e,_*(E-1)/2,k*(3-E)/2);const T=S(this,Qg,X1).call(this,h.getImageData(0,0,_,k).data),P=S(this,lw,t2).call(this,T),N=S(this,Zg,G1).call(this,P),R=S(this,Kg,W1).call(this,T,_,k,N);return this.processDrawnLines({lines:{curves:R,width:_,height:k},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(e,t,i,s,r){const[o,l,c]=S(this,cw,n2).call(this,e),[u,h]=S(this,aw,e2).call(this,o,l,c,Math.hypot(l,c)*a(this,Vl).sigmaSFactor,a(this,Vl).sigmaR,a(this,Vl).kernelSize),d=S(this,Zg,G1).call(this,h),f=S(this,Kg,W1).call(this,u,l,c,d);return this.processDrawnLines({lines:{curves:f,width:l,height:c},pageWidth:t,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:i,rotation:s,innerMargin:r,mustSmooth:o,areContours:l}){s%180!==0&&([t,i]=[i,t]);const{curves:c,width:u,height:h}=e,d=e.thickness??0,f=[],m=Math.min(t/u,i/h),y=m/t,w=m/i,x=[];for(const{points:b}of c){const A=o?S(this,ow,JP).call(this,b):b;if(!A)continue;x.push(A);const E=A.length,_=new Float32Array(E),k=new Float32Array(3*(E===2?2:E-2));if(f.push({line:k,points:_}),E===2){_[0]=A[0]*y,_[1]=A[1]*w,k.set([NaN,NaN,NaN,NaN,_[0],_[1]],0);continue}let[T,P,N,R]=A;T*=y,P*=w,N*=y,R*=w,_.set([T,P,N,R],0),k.set([NaN,NaN,NaN,NaN,T,P],0);for(let L=4;L<E;L+=2){const O=_[L]=A[L]*y,$=_[L+1]=A[L+1]*w;k.set(W.createBezierPoints(T,P,N,R,O,$),(L-2)*3),[T,P,N,R]=[N,R,O,$]}}if(f.length===0)return null;const v=l?new $1:new vm;return v.build(f,t,i,1,s,l?0:d,r),{outline:v,newCurves:x,areContours:l,thickness:d,width:u,height:h}}static async compressSignature({outlines:e,areContours:t,thickness:i,width:s,height:r}){let o=1/0,l=-1/0,c=0;for(const A of e){c+=A.length;for(let E=2,_=A.length;E<_;E++){const k=A[E]-A[E-2];o=Math.min(o,k),l=Math.max(l,k)}}let u;o>=-128&&l<=127?u=Int8Array:o>=-32768&&l<=32767?u=Int16Array:u=Int32Array;const h=e.length,d=qm+Sd*h,f=new Uint32Array(d);let m=0;f[m++]=d*Uint32Array.BYTES_PER_ELEMENT+(c-2*h)*u.BYTES_PER_ELEMENT,f[m++]=0,f[m++]=s,f[m++]=r,f[m++]=t?0:1,f[m++]=Math.max(0,Math.floor(i??0)),f[m++]=h,f[m++]=u.BYTES_PER_ELEMENT;for(const A of e)f[m++]=A.length-2,f[m++]=A[0],f[m++]=A[1];const y=new CompressionStream("deflate-raw"),w=y.writable.getWriter();await w.ready,w.write(f);const x=u.prototype.constructor;for(const A of e){const E=new x(A.length-2);for(let _=2,k=A.length;_<k;_++)E[_-2]=A[_]-A[_-2];w.write(E)}w.close();const v=await new Response(y.readable).arrayBuffer(),b=new Uint8Array(v);return Jk(b)}static async decompressSignature(e){try{const t=NL(e),{readable:i,writable:s}=new DecompressionStream("deflate-raw"),r=s.getWriter();await r.ready,r.write(t).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const A of i)o||(o=new Uint8Array(new Uint32Array(A.buffer,0,4)[0])),o.set(A,l),l+=A.length;const c=new Uint32Array(o.buffer,0,o.length>>2),u=c[1];if(u!==0)throw new Error(`Invalid version: ${u}`);const h=c[2],d=c[3],f=c[4]===0,m=c[5],y=c[6],w=c[7],x=[],v=(qm+Sd*y)*Uint32Array.BYTES_PER_ELEMENT;let b;switch(w){case Int8Array.BYTES_PER_ELEMENT:b=new Int8Array(o.buffer,v);break;case Int16Array.BYTES_PER_ELEMENT:b=new Int16Array(o.buffer,v);break;case Int32Array.BYTES_PER_ELEMENT:b=new Int32Array(o.buffer,v);break}l=0;for(let A=0;A<y;A++){const E=c[Sd*A+qm],_=new Float32Array(E+2);x.push(_);for(let k=0;k<Sd-1;k++)_[k]=c[Sd*A+qm+k+1];for(let k=0;k<E;k++)_[k+2]=_[k]+b[l++]}return{areContours:f,thickness:m,outlines:x,width:h,height:d}}catch(t){return ee(`decompressSignature: ${t}`),null}}}Vl=new WeakMap,qg=new WeakSet,V1=function(e,t,i,s){return i-=e,s-=t,i===0?s>0?0:4:i===1?s+6:2-s},$i=new WeakMap,sw=new WeakSet,QP=function(e,t,i,s,r,o,l){const c=S(this,qg,V1).call(this,i,s,r,o);for(let u=0;u<8;u++){const h=(-u+c-l+16)%8,d=a(this,$i)[2*h],f=a(this,$i)[2*h+1];if(e[(i+d)*t+(s+f)]!==0)return h}return-1},rw=new WeakSet,ZP=function(e,t,i,s,r,o,l){const c=S(this,qg,V1).call(this,i,s,r,o);for(let u=0;u<8;u++){const h=(u+c+l+16)%8,d=a(this,$i)[2*h],f=a(this,$i)[2*h+1];if(e[(i+d)*t+(s+f)]!==0)return h}return-1},Kg=new WeakSet,W1=function(e,t,i,s){const r=e.length,o=new Int32Array(r);for(let h=0;h<r;h++)o[h]=e[h]<=s?1:0;for(let h=1;h<i-1;h++)o[h*t]=o[h*t+t-1]=0;for(let h=0;h<t;h++)o[h]=o[t*i-1-h]=0;let l=1,c;const u=[];for(let h=1;h<i-1;h++){c=1;for(let d=1;d<t-1;d++){const f=h*t+d,m=o[f];if(m===0)continue;let y=h,w=d;if(m===1&&o[f-1]===0)l+=1,w-=1;else if(m>=1&&o[f+1]===0)l+=1,w+=1,m>1&&(c=m);else{m!==1&&(c=Math.abs(m));continue}const x=[d,h],v=w===d+1,b={isHole:v,points:x,id:l,parent:0};u.push(b);let A;for(const L of u)if(L.id===c){A=L;break}A?A.isHole?b.parent=v?A.parent:c:b.parent=v?c:A.parent:b.parent=v?c:0;const E=S(this,sw,QP).call(this,o,t,h,d,y,w,0);if(E===-1){o[f]=-l,o[f]!==1&&(c=Math.abs(o[f]));continue}let _=a(this,$i)[2*E],k=a(this,$i)[2*E+1];const T=h+_,P=d+k;y=T,w=P;let N=h,R=d;for(;;){const L=S(this,rw,ZP).call(this,o,t,N,R,y,w,1);_=a(this,$i)[2*L],k=a(this,$i)[2*L+1];const O=N+_,$=R+k;x.push($,O);const U=N*t+R;if(o[U+1]===0?o[U]=-l:o[U]===1&&(o[U]=l),O===h&&$===d&&N===T&&R===P){o[f]!==1&&(c=Math.abs(o[f]));break}else y=N,w=R,N=O,R=$}}}return u},Fh=new WeakSet,Iv=function(e,t,i,s){if(i-t<=4){for(let T=t;T<i-2;T+=2)s.push(e[T],e[T+1]);return}const r=e[t],o=e[t+1],l=e[i-4]-r,c=e[i-3]-o,u=Math.hypot(l,c),h=l/u,d=c/u,f=h*o-d*r,m=c/l,y=1/u,w=Math.atan(m),x=Math.cos(w),v=Math.sin(w),b=y*(Math.abs(x)+Math.abs(v)),A=y*(1-b+b**2),E=Math.max(Math.atan(Math.abs(v+x)*A),Math.atan(Math.abs(v-x)*A));let _=0,k=t;for(let T=t+2;T<i-2;T+=2){const P=Math.abs(f-h*e[T+1]+d*e[T]);P>_&&(k=T,_=P)}_>(u*E)**2?(S(this,Fh,Iv).call(this,e,t,k+2,s),S(this,Fh,Iv).call(this,e,k,i,s)):s.push(r,o)},ow=new WeakSet,JP=function(e){const t=[],i=e.length;return S(this,Fh,Iv).call(this,e,0,i,t),t.push(e[i-2],e[i-1]),t.length<=4?null:t},aw=new WeakSet,e2=function(e,t,i,s,r,o){const l=new Float32Array(o**2),c=-2*s**2,u=o>>1;for(let w=0;w<o;w++){const x=(w-u)**2;for(let v=0;v<o;v++)l[w*o+v]=Math.exp((x+(v-u)**2)/c)}const h=new Float32Array(256),d=-2*r**2;for(let w=0;w<256;w++)h[w]=Math.exp(w**2/d);const f=e.length,m=new Uint8Array(f),y=new Uint32Array(256);for(let w=0;w<i;w++)for(let x=0;x<t;x++){const v=w*t+x,b=e[v];let A=0,E=0;for(let k=0;k<o;k++){const T=w+k-u;if(!(T<0||T>=i))for(let P=0;P<o;P++){const N=x+P-u;if(N<0||N>=t)continue;const R=e[T*t+N],L=l[k*o+P]*h[Math.abs(R-b)];A+=R*L,E+=L}}const _=m[v]=Math.round(A/E);y[_]++}return[m,y]},lw=new WeakSet,t2=function(e){const t=new Uint32Array(256);for(const i of e)t[i]++;return t},Qg=new WeakSet,X1=function(e){const t=e.length,i=new Uint8ClampedArray(t>>2);let s=-1/0,r=1/0;for(let l=0,c=i.length;l<c;l++){const u=i[l]=e[l<<2];s=Math.max(s,u),r=Math.min(r,u)}const o=255/(s-r);for(let l=0,c=i.length;l<c;l++)i[l]=(i[l]-r)*o;return i},Zg=new WeakSet,G1=function(e){let t,i=-1/0,s=-1/0;const r=e.findIndex(c=>c!==0);let o=r,l=r;for(t=r;t<256;t++){const c=e[t];c>i&&(t-o>s&&(s=t-o,l=t-1),i=c,o=t)}for(t=l-1;t>=0&&!(e[t]>e[t+1]);t--);return t},cw=new WeakSet,n2=function(e){const t=e,{width:i,height:s}=e,{maxDim:r}=a(this,Vl);let o=i,l=s;if(i>r||s>r){let f=i,m=s,y=Math.log2(Math.max(i,s)/r);const w=Math.floor(y);y=y===w?w-1:w;for(let v=0;v<y;v++){o=Math.ceil(f/2),l=Math.ceil(m/2);const b=new OffscreenCanvas(o,l);b.getContext("2d").drawImage(e,0,0,f,m,0,0,o,l),f=o,m=l,e!==t&&e.close(),e=b.transferToImageBitmap()}const x=Math.min(r/o,r/l);o=Math.round(o*x),l=Math.round(l*x)}const u=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});u.fillStyle="white",u.fillRect(0,0,o,l),u.filter="grayscale(1)",u.drawImage(e,0,0,e.width,e.height,0,0,o,l);const h=u.getImageData(0,0,o,l).data;return[S(this,Qg,X1).call(this,h),o,l]},p(ct,qg),p(ct,sw),p(ct,rw),p(ct,Kg),p(ct,Fh),p(ct,ow),p(ct,aw),p(ct,lw),p(ct,Qg),p(ct,Zg),p(ct,cw),p(ct,Vl,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),p(ct,$i,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class yx extends WP{constructor(){super(),super.updateProperties({fill:De._defaultLineColor,"stroke-width":0})}clone(){const e=new yx;return e.updateAll(this),e}}class wx extends Fw{constructor(e){super(e),super.updateProperties({stroke:De._defaultLineColor,"stroke-width":1})}clone(){const e=new wx(this._viewParameters);return e.updateAll(this),e}}var Fo,ks,Io,Wl;const Rn=class Rn extends Sy{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});p(this,Fo,!1);p(this,ks,null);p(this,Io,null);p(this,Wl,null);this._willKeepAspectRatio=!0,g(this,Io,t.signatureData||null),g(this,ks,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){De.initialize(t,i),this._defaultDrawingOptions=new yx,this._defaultDrawnSignatureOptions=new wx(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return ie(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,ks)}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(a(this,Io)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:u,heightInPage:h}=a(this,Io),{rawDims:{pageWidth:d,pageHeight:f},rotation:m}=this.parent.viewport,y=ct.processDrawnLines({lines:r,pageWidth:d,pageHeight:f,rotation:m,innerMargin:Rn._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(y,h,c,u)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:a(this,ks)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){g(this,Wl,t),this.addEditToolbar()}getUuid(){return a(this,Wl)}get description(){return a(this,ks)}set description(t){g(this,ks,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i==null||i.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:o}=a(this,Io),l=Math.max(r,o),c=ct.processDrawnLines({lines:{curves:t.map(u=>({points:u})),thickness:s,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:c.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:o,y:l}=this,{outline:c}=g(this,Io,t);g(this,Fo,c instanceof $1),this.description=s;let u;a(this,Fo)?u=Rn.getDefaultDrawingOptions():(u=Rn._defaultDrawnSignatureOptions.clone(),u.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:u});const[,h]=this.pageDimensions;let d=i/h;d=d>=1?.5:d,this.width*=d/this.height,this.width>=1&&(d*=.9/this.width,this.width=.9),this.height=d,this.setDims(),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return ct.process(t,i,s,r,Rn._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:o}=this.parent.viewport;return ct.extractContoursFromText(t,i,s,r,o,Rn._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return ct.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:Rn._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=Rn.getDefaultDrawingOptions():(this._drawingOptions=Rn._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:a(this,Fo),color:[0,0,0],thickness:a(this,Fo)?0:r});return this.addComment(o),t?(o.paths={lines:i,points:s},o.uuid=a(this,Wl),o.isCopy=!0):o.lines=i,a(this,ks)&&(o.accessibilityData={type:"Figure",alt:a(this,ks)}),o}static deserializeDraw(t,i,s,r,o,l){return l.areContours?$1.deserialize(t,i,s,r,o,l):vm.deserialize(t,i,s,r,o,l)}static async deserialize(t,i,s){var o;const r=await super.deserialize(t,i,s);return g(r,Fo,t.areContours),r.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",g(r,Wl,t.uuid),r}};Fo=new WeakMap,ks=new WeakMap,Io=new WeakMap,Wl=new WeakMap,F(Rn,"_type","signature"),F(Rn,"_editorType",J.SIGNATURE),F(Rn,"_defaultDrawingOptions",null);let Y1=Rn;var je,xt,Oo,br,Bo,Ih,Sr,Xl,Ts,Yn,Oh,Gl,Gd,Yl,Yd,Bh,Ov,jh,Bv,zh,jv,Jg,K1,Uh,zv,uw,i2;class q1 extends De{constructor(t){super({...t,name:"stampEditor"});p(this,Gl);p(this,Yl);p(this,Bh);p(this,jh);p(this,zh);p(this,Jg);p(this,Uh);p(this,uw);p(this,je,null);p(this,xt,null);p(this,Oo,null);p(this,br,null);p(this,Bo,null);p(this,Ih,"");p(this,Sr,null);p(this,Xl,!1);p(this,Ts,null);p(this,Yn,!1);p(this,Oh,!1);g(this,br,t.bitmapUrl),g(this,Bo,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){De.initialize(t,i)}static isHandlingMimeForPasting(t){return fy.includes(t)}static paste(t,i){i.pasteEditor({mode:J.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=t||this.copyCanvas(null,null,!0).imageData,c=await s.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const u=c.output;return await this.setGuessedAltText(u),i&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;a(this,xt)&&(g(this,je,null),this._uiManager.imageManager.deleteId(a(this,xt)),(t=a(this,Sr))==null||t.remove(),g(this,Sr,null),a(this,Ts)&&(clearTimeout(a(this,Ts)),g(this,Ts,null))),super.remove()}rebuild(){if(!this.parent){a(this,xt)&&S(this,Bh,Ov).call(this);return}super.rebuild(),this.div!==null&&(a(this,xt)&&a(this,Sr)===null&&S(this,Bh,Ov).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(a(this,Oo)||a(this,je)||a(this,br)||a(this,Bo)||a(this,xt)||a(this,Xl))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),a(this,Xl)||(a(this,je)?S(this,jh,Bv).call(this):S(this,Bh,Ov).call(this)),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(g(this,xt,s),r&&g(this,je,r),g(this,Xl,!1),S(this,jh,Bv).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,Ts)!==null&&clearTimeout(a(this,Ts)),g(this,Ts,setTimeout(()=>{g(this,Ts,null),S(this,Jg,K1).call(this)},200))}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:o}=a(this,je),l=new Zi;let c=a(this,je),u=r,h=o,d=null;if(i){if(r>i||o>i){const T=Math.min(i/r,i/o);u=Math.floor(r*T),h=Math.floor(o*T)}d=document.createElement("canvas");const m=d.width=Math.ceil(u*l.sx),y=d.height=Math.ceil(h*l.sy);a(this,Yn)||(c=S(this,zh,jv).call(this,m,y));const w=d.getContext("2d");w.filter=this._uiManager.hcmFilter;let x="white",v="#cfcfd8";this._uiManager.hcmFilter!=="none"?v="black":ML.isDarkMode&&(x="#8f8f9d",v="#42414d");const b=15,A=b*l.sx,E=b*l.sy,_=new OffscreenCanvas(A*2,E*2),k=_.getContext("2d");k.fillStyle=x,k.fillRect(0,0,A*2,E*2),k.fillStyle=v,k.fillRect(0,0,A,E),k.fillRect(A,E,A,E),w.fillStyle=w.createPattern(_,"repeat"),w.fillRect(0,0,m,y),w.drawImage(c,0,0,c.width,c.height,0,0,m,y)}let f=null;if(s){let m,y;if(l.symmetric&&c.width<t&&c.height<t)m=c.width,y=c.height;else if(c=a(this,je),r>t||o>t){const v=Math.min(t/r,t/o);m=Math.floor(r*v),y=Math.floor(o*v),a(this,Yn)||(c=S(this,zh,jv).call(this,m,y))}const x=new OffscreenCanvas(m,y).getContext("2d",{willReadFrequently:!0});x.drawImage(c,0,0,c.width,c.height,0,0,m,y),f={width:m,height:y,data:x.getImageData(0,0,m,y).data}}return{canvas:d,width:u,height:h,imageData:f}}static async deserialize(t,i,s){var x;let r=null,o=!1;if(t instanceof wP){const{data:{rect:v,rotation:b,id:A,structParent:E,popupRef:_,richText:k,contentsObj:T,creationDate:P,modificationDate:N},container:R,parent:{page:{pageNumber:L}},canvas:O}=t;let $,U;O?(delete t.canvas,{id:$,bitmap:U}=s.imageManager.getFromCanvas(R.id,O),O.remove()):(o=!0,t._hasNoCanvas=!0);const Q=((x=await i._structTree.getAriaAttributes(`${ox}${A}`))==null?void 0:x.get("aria-label"))||"";r=t={annotationType:J.STAMP,bitmapId:$,bitmap:U,pageIndex:L-1,rect:v.slice(0),rotation:b,annotationElementId:A,id:A,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:E,popupRef:_,richText:k,comment:(T==null?void 0:T.str)||null,creationDate:P,modificationDate:N}}const l=await super.deserialize(t,i,s),{rect:c,bitmap:u,bitmapUrl:h,bitmapId:d,isSvg:f,accessibilityData:m}=t;o?(s.addMissingCanvas(t.id,l),g(l,Xl,!0)):d&&s.imageManager.isValidId(d)?(g(l,xt,d),u&&g(l,je,u)):g(l,br,h),g(l,Yn,f);const[y,w]=l.pageDimensions;return l.width=(c[2]-c[0])/y,l.height=(c[3]-c[1])/w,m&&(l.altTextData=m),l._initialData=r,t.comment&&l.setCommentData(t),g(l,Oh,!!r),l}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:a(this,xt),isSvg:a(this,Yn)});if(this.addComment(s),t)return s.bitmapUrl=S(this,Uh,zv).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=S(this,uw,i2).call(this,s);return c.isSame?null:(c.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||(i.stamps=new Map);const l=a(this,Yn)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(a(this,xt)))i.stamps.set(a(this,xt),{area:l,serialized:s}),s.bitmap=S(this,Uh,zv).call(this,!1);else if(a(this,Yn)){const c=i.stamps.get(a(this,xt));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=S(this,Uh,zv).call(this,!1))}return s}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}je=new WeakMap,xt=new WeakMap,Oo=new WeakMap,br=new WeakMap,Bo=new WeakMap,Ih=new WeakMap,Sr=new WeakMap,Xl=new WeakMap,Ts=new WeakMap,Yn=new WeakMap,Oh=new WeakMap,Gl=new WeakSet,Gd=function(t,i=!1){if(!t){this.remove();return}g(this,je,t.bitmap),i||(g(this,xt,t.id),g(this,Yn,t.isSvg)),t.file&&g(this,Ih,t.file.name),S(this,jh,Bv).call(this)},Yl=new WeakSet,Yd=function(){if(g(this,Oo,null),this._uiManager.enableWaiting(!1),!!a(this,Sr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,je)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,je)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},Bh=new WeakSet,Ov=function(){if(a(this,xt)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,xt)).then(s=>S(this,Gl,Gd).call(this,s,!0)).finally(()=>S(this,Yl,Yd).call(this));return}if(a(this,br)){const s=a(this,br);g(this,br,null),this._uiManager.enableWaiting(!0),g(this,Oo,this._uiManager.imageManager.getFromUrl(s).then(r=>S(this,Gl,Gd).call(this,r)).finally(()=>S(this,Yl,Yd).call(this)));return}if(a(this,Bo)){const s=a(this,Bo);g(this,Bo,null),this._uiManager.enableWaiting(!0),g(this,Oo,this._uiManager.imageManager.getFromFile(s).then(r=>S(this,Gl,Gd).call(this,r)).finally(()=>S(this,Yl,Yd).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=fy.join(",");const i=this._uiManager._signal;g(this,Oo,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),S(this,Gl,Gd).call(this,r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>S(this,Yl,Yd).call(this))),t.click()},jh=new WeakSet,Bv=function(){var u;const{div:t}=this;let{width:i,height:s}=a(this,je);const[r,o]=this.pageDimensions,l=.75;if(this.width)i=this.width*r,s=this.height*o;else if(i>l*r||s>l*o){const h=Math.min(l*r/i,l*o/s);i*=h,s*=h}this._uiManager.enableWaiting(!1);const c=g(this,Sr,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=i/r,this.height=s/o,this.setDims(),(u=this._initialOptions)!=null&&u.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),S(this,Jg,K1).call(this),a(this,Oh)||(this.parent.addUndoableEditor(this),g(this,Oh,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,Ih)&&this.div.setAttribute("aria-description",a(this,Ih)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},zh=new WeakSet,jv=function(t,i){const{width:s,height:r}=a(this,je);let o=s,l=r,c=a(this,je);for(;o>2*t||l>2*i;){const u=o,h=l;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*i&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const d=new OffscreenCanvas(o,l);d.getContext("2d").drawImage(c,0,0,u,h,0,0,o,l),c=d.transferToImageBitmap()}return c},Jg=new WeakSet,K1=function(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,o=new Zi,l=Math.ceil(s*t*o.sx),c=Math.ceil(r*i*o.sy),u=a(this,Sr);if(!u||u.width===l&&u.height===c)return;u.width=l,u.height=c;const h=a(this,Yn)?a(this,je):S(this,zh,jv).call(this,l,c),d=u.getContext("2d");d.filter=this._uiManager.hcmFilter,d.drawImage(h,0,0,h.width,h.height,0,0,l,c)},Uh=new WeakSet,zv=function(t){if(t){if(a(this,Yn)){const r=this._uiManager.imageManager.getSvgUrl(a(this,xt));if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=a(this,je),i.getContext("2d").drawImage(a(this,je),0,0),i.toDataURL()}if(a(this,Yn)){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*Mr.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*Mr.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,je),0,0,a(this,je).width,a(this,je).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,je))},uw=new WeakSet,i2=function(t){var l;const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,o=(((l=t.accessibilityData)==null?void 0:l.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},F(q1,"_type","stamp"),F(q1,"_editorType",J.STAMP);var ql,Hh,jo,zo,Ar,An,Uo,$h,Vh,Vi,xr,Et,Er,Ho,Wh,q,$o,em,Q1,hw,s2,yi,is,tm,Z1,nm,J1,Xh,Uv;const Ri=class Ri{constructor({uiManager:e,pageIndex:t,div:i,structTreeLayer:s,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:u,l10n:h}){p(this,em);p(this,hw);p(this,yi);p(this,tm);p(this,nm);p(this,Xh);p(this,ql,void 0);p(this,Hh,!1);p(this,jo,null);p(this,zo,null);p(this,Ar,null);p(this,An,new Map);p(this,Uo,!1);p(this,$h,!1);p(this,Vh,!1);p(this,Vi,null);p(this,xr,null);p(this,Et,null);p(this,Er,null);p(this,Ho,null);p(this,Wh,-1);p(this,q,void 0);const d=[...a(Ri,$o).values()];if(!Ri._initialized){Ri._initialized=!0;for(const f of d)f.initialize(h,e)}e.registerEditorTypes(d),g(this,q,e),this.pageIndex=t,this.div=i,g(this,ql,r),g(this,jo,o),this.viewport=u,g(this,Et,c),this.drawLayer=l,this._structTree=s,a(this,q).addLayer(this)}get isEmpty(){return a(this,An).size===0}get isInvisible(){return this.isEmpty&&a(this,q).getMode()===J.NONE}updateToolbar(e){a(this,q).updateToolbar(e)}updateMode(e=a(this,q).getMode()){switch(S(this,Xh,Uv).call(this),e){case J.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case J.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case J.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===J.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const i of a(Ri,$o).values())t.toggle(`${i._type}Editing`,e===i._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=a(this,Et))==null?void 0:t.div)}setEditingState(e){a(this,q).setEditingState(e)}addCommands(e){a(this,q).addCommands(e)}cleanUndoStack(e){a(this,q).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=a(this,jo))==null||t.div.classList.toggle("disabled",!e)}async enable(){var i;g(this,Vh,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(i=a(this,Ho))==null||i.abort(),g(this,Ho,null);const e=new Set;for(const s of a(this,em,Q1))s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,q).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=a(this,jo);if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),a(this,q).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}g(this,Vh,!1),a(this,q)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var i;if(g(this,$h,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),a(this,Et)&&!a(this,Ho)){g(this,Ho,new AbortController);const s=a(this,q).combinedSignal(a(this,Ho));a(this,Et).div.addEventListener("pointerdown",r=>{const{clientX:l,clientY:c,timeStamp:u}=r,h=a(this,Wh);if(u-h>500){g(this,Wh,u);return}g(this,Wh,-1);const{classList:d}=this.div;d.toggle("getElements",!0);const f=document.elementsFromPoint(l,c);if(d.toggle("getElements",!1),!this.div.contains(f[0]))return;let m;const y=new RegExp(`^${xf}[0-9]+$`);for(const x of f)if(y.test(x.id)){m=x.id;break}if(!m)return;const w=a(this,An).get(m);(w==null?void 0:w.annotationElementId)===null&&(r.stopPropagation(),r.preventDefault(),w.dblclick(r))},{signal:s,capture:!0})}const e=a(this,jo);if(e){const s=new Map,r=new Map;for(const l of a(this,em,Q1)){if(l.disableEditing(),!l.annotationElementId){l.updateFakeAnnotationElement(e);continue}if(l.serialize()!==null){s.set(l.annotationElementId,l);continue}else r.set(l.annotationElementId,l);(i=this.getEditableAnnotation(l.annotationElementId))==null||i.show(),l.remove()}const o=e.getEditableAnnotations();for(const l of o){const{id:c}=l.data;if(a(this,q).isDeletedAnnotationElement(c)){l.updateEdited({deleted:!0});continue}let u=r.get(c);if(u){u.resetAnnotationElement(l),u.show(!1),l.show();continue}u=s.get(c),u&&(a(this,q).addChangedExistingAnnotation(u),u.renderAnnotationElement(l)&&u.show(!1)),l.show()}}S(this,Xh,Uv).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of a(Ri,$o).values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),g(this,$h,!1)}getEditableAnnotation(e){var t;return((t=a(this,jo))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){a(this,q).getActive()!==e&&a(this,q).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=a(this,Et))!=null&&e.div&&!a(this,Er)){g(this,Er,new AbortController);const t=a(this,q).combinedSignal(a(this,Er));a(this,Et).div.addEventListener("pointerdown",S(this,hw,s2).bind(this),{signal:t}),a(this,Et).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=a(this,Et))!=null&&e.div&&a(this,Er)&&(a(this,Er).abort(),g(this,Er,null),a(this,Et).div.classList.remove("highlighting"))}enableClick(){if(a(this,zo))return;g(this,zo,new AbortController);const e=a(this,q).combinedSignal(a(this,zo));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=a(this,zo))==null||e.abort(),g(this,zo,null)}attach(e){a(this,An).set(e.id,e);const{annotationElementId:t}=e;t&&a(this,q).isDeletedAnnotationElement(t)&&a(this,q).removeDeletedAnnotationElement(e)}detach(e){var t;a(this,An).delete(e.id),(t=a(this,ql))==null||t.removePointerInTextLayer(e.contentDiv),!a(this,$h)&&e.annotationElementId&&a(this,q).addDeletedAnnotationElement(e)}remove(e){this.detach(e),a(this,q).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(a(this,q).addDeletedAnnotationElement(e.annotationElementId),De.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),a(this,q).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!a(this,Vh)),a(this,q).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var i;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!a(this,Ar)&&(e._focusEventsAllowed=!1,g(this,Ar,setTimeout(()=>{g(this,Ar,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:a(this,q)._signal}),t.focus())},0))),e._structTreeParentId=(i=a(this,ql))==null?void 0:i.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),i=()=>{e.remove()};this.addCommands({cmd:t,undo:i,mustExec:!1})}getEditorByUID(e){for(const t of a(this,An).values())if(t.uid===e)return t;return null}getNextId(){return a(this,q).getId()}combinedSignal(e){return a(this,q).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=a(this,yi,is))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await a(this,q).updateMode(e.mode);const{offsetX:i,offsetY:s}=S(this,nm,J1).call(this),r=this.getNextId(),o=S(this,tm,Z1).call(this,{parent:this,id:r,x:i,y:s,uiManager:a(this,q),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=a(Ri,$o).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,a(this,q)))||null}createAndAddNewEditor(e,t,i={}){const s=this.getNextId(),r=S(this,tm,Z1).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:a(this,q),isCentered:t,...i});return r&&this.add(r),r}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(S(this,nm,J1).call(this),!0,e)}setSelected(e){a(this,q).setSelected(e)}toggleSelected(e){a(this,q).toggleSelected(e)}unselect(e){a(this,q).unselect(e)}pointerup(e){var s;const{isMac:t}=kt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!a(this,Uo)||(g(this,Uo,!1),(s=a(this,yi,is))!=null&&s.isDrawer&&a(this,yi,is).supportMultipleDrawings))return;if(!a(this,Hh)){g(this,Hh,!0);return}const i=a(this,q).getMode();if(i===J.STAMP||i===J.SIGNATURE){a(this,q).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(a(this,q).getMode()===J.HIGHLIGHT&&this.enableTextSelection(),a(this,Uo)){g(this,Uo,!1);return}const{isMac:t}=kt.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(g(this,Uo,!0),(s=a(this,yi,is))!=null&&s.isDrawer){this.startDrawingSession(e);return}const i=a(this,q).getActive();g(this,Hh,!i||i.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),a(this,Vi)){a(this,yi,is).startDrawing(this,a(this,q),!1,e);return}a(this,q).setCurrentDrawingSession(this),g(this,Vi,new AbortController);const t=a(this,q).combinedSignal(a(this,Vi));this.div.addEventListener("blur",({relatedTarget:i})=>{i&&!this.div.contains(i)&&(g(this,xr,null),this.commitOrRemove())},{signal:t}),a(this,yi,is).startDrawing(this,a(this,q),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&g(this,xr,t);return}a(this,xr)&&setTimeout(()=>{var t;(t=a(this,xr))==null||t.focus(),g(this,xr,null)},0)}endDrawingSession(e=!1){return a(this,Vi)?(a(this,q).setCurrentDrawingSession(null),a(this,Vi).abort(),g(this,Vi,null),g(this,xr,null),a(this,yi,is).endDrawing(e)):null}findNewParent(e,t,i){const s=a(this,q).findParent(t,i);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return a(this,Vi)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,Vi)&&a(this,yi,is).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=a(this,q).getActive())==null?void 0:e.parent)===this&&(a(this,q).commitOrRemove(),a(this,q).setActiveEditor(null)),a(this,Ar)&&(clearTimeout(a(this,Ar)),g(this,Ar,null));for(const i of a(this,An).values())(t=a(this,ql))==null||t.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,a(this,An).clear(),a(this,q).removeLayer(this)}render({viewport:e}){this.viewport=e,ia(this.div,e);for(const t of a(this,q).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){a(this,q).commitOrRemove(),S(this,Xh,Uv).call(this);const t=this.viewport.rotation,i=e.rotation;if(this.viewport=e,ia(this.div,{rotation:i}),t!==i)for(const s of a(this,An).values())s.rotate(i)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return a(this,q).viewParameters.realScale}};ql=new WeakMap,Hh=new WeakMap,jo=new WeakMap,zo=new WeakMap,Ar=new WeakMap,An=new WeakMap,Uo=new WeakMap,$h=new WeakMap,Vh=new WeakMap,Vi=new WeakMap,xr=new WeakMap,Et=new WeakMap,Er=new WeakMap,Ho=new WeakMap,Wh=new WeakMap,q=new WeakMap,$o=new WeakMap,em=new WeakSet,Q1=function(){return a(this,An).size!==0?a(this,An).values():a(this,q).getEditors(this.pageIndex)},hw=new WeakSet,s2=function(e){a(this,q).unselectAll();const{target:t}=e;if(t===a(this,Et).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&a(this,Et).div.contains(t)){const{isMac:i}=kt.platform;if(e.button!==0||e.ctrlKey&&i)return;a(this,q).showAllEditors("highlight",!0,!0),a(this,Et).div.classList.add("free"),this.toggleDrawing(),by.startHighlighting(this,a(this,q).direction==="ltr",{target:a(this,Et).div,x:e.x,y:e.y}),a(this,Et).div.addEventListener("pointerup",()=>{a(this,Et).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,q)._signal}),e.preventDefault()}},yi=new WeakSet,is=function(){return a(Ri,$o).get(a(this,q).getMode())},tm=new WeakSet,Z1=function(e){const t=a(this,yi,is);return t?new t.prototype.constructor(e):null},nm=new WeakSet,J1=function(){const{x:e,y:t,width:i,height:s}=this.boundingClientRect,r=Math.max(0,e),o=Math.max(0,t),l=Math.min(window.innerWidth,e+i),c=Math.min(window.innerHeight,t+s),u=(r+l)/2-e,h=(o+c)/2-t,[d,f]=this.viewport.rotation%180===0?[u,h]:[h,u];return{offsetX:d,offsetY:f}},Xh=new WeakSet,Uv=function(){for(const e of a(this,An).values())e.isEmpty()&&e.remove()},F(Ri,"_initialized",!1),p(Ri,$o,new Map([L1,H1,q1,by,Y1].map(e=>[e._editorType,e])));let Ay=Ri;var Wi,on,Kl,im,dw,r2,sm,eA,fw,o2,rm,tA;const dt=class dt{constructor({pageIndex:e}){p(this,sm);p(this,fw);p(this,rm);p(this,Wi,null);p(this,on,new Map);p(this,Kl,new Map);this.pageIndex=e}setParent(e){if(!a(this,Wi)){g(this,Wi,e);return}if(a(this,Wi)!==e){if(a(this,on).size>0)for(const t of a(this,on).values())t.remove(),e.append(t);g(this,Wi,e)}}static get _svgFactory(){return ie(this,"_svgFactory",new Rf)}draw(e,t=!1,i=!1){const s=ht(dt,im)._++,r=S(this,sm,eA).call(this),o=dt._svgFactory.createElement("defs");r.append(o);const l=dt._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${s}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),t&&a(this,Kl).set(s,l);const u=i?S(this,fw,o2).call(this,o,c):null,h=dt._svgFactory.createElement("use");return r.append(h),h.setAttribute("href",`#${c}`),this.updateProperties(r,e),a(this,on).set(s,r),{id:s,clipPathId:`url(#${u})`}}drawOutline(e,t){const i=ht(dt,im)._++,s=S(this,sm,eA).call(this),r=dt._svgFactory.createElement("defs");s.append(r);const o=dt._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${i}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(t){const d=dt._svgFactory.createElement("mask");r.append(d),c=`mask_p${this.pageIndex}_${i}`,d.setAttribute("id",c),d.setAttribute("maskUnits","objectBoundingBox");const f=dt._svgFactory.createElement("rect");d.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const m=dt._svgFactory.createElement("use");d.append(m),m.setAttribute("href",`#${l}`),m.setAttribute("stroke","none"),m.setAttribute("fill","black"),m.setAttribute("fill-rule","nonzero"),m.classList.add("mask")}const u=dt._svgFactory.createElement("use");s.append(u),u.setAttribute("href",`#${l}`),c&&u.setAttribute("mask",`url(#${c})`);const h=u.cloneNode();return s.append(h),u.classList.add("mainOutline"),h.classList.add("secondaryOutline"),this.updateProperties(s,e),a(this,on).set(i,s),i}finalizeDraw(e,t){a(this,Kl).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var c;if(!t)return;const{root:i,bbox:s,rootClass:r,path:o}=t,l=typeof e=="number"?a(this,on).get(e):e;if(l){if(i&&S(this,rm,tA).call(this,l,i),s&&S(c=dt,dw,r2).call(c,l,s),r){const{classList:u}=l;for(const[h,d]of Object.entries(r))u.toggle(h,d)}if(o){const h=l.firstChild.firstChild;S(this,rm,tA).call(this,h,o)}}}updateParent(e,t){if(t===this)return;const i=a(this,on).get(e);i&&(a(t,Wi).append(i),a(this,on).delete(e),a(t,on).set(e,i))}remove(e){a(this,Kl).delete(e),a(this,Wi)!==null&&(a(this,on).get(e).remove(),a(this,on).delete(e))}destroy(){g(this,Wi,null);for(const e of a(this,on).values())e.remove();a(this,on).clear(),a(this,Kl).clear()}};Wi=new WeakMap,on=new WeakMap,Kl=new WeakMap,im=new WeakMap,dw=new WeakSet,r2=function(e,[t,i,s,r]){const{style:o}=e;o.top=`${100*i}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*r}%`},sm=new WeakSet,eA=function(){const e=dt._svgFactory.create(1,1,!0);return a(this,Wi).append(e),e.setAttribute("aria-hidden",!0),e},fw=new WeakSet,o2=function(e,t){const i=dt._svgFactory.createElement("clipPath");e.append(i);const s=`clip_${t}`;i.setAttribute("id",s),i.setAttribute("clipPathUnits","objectBoundingBox");const r=dt._svgFactory.createElement("use");return i.append(r),r.setAttribute("href",`#${t}`),r.classList.add("clip"),s},rm=new WeakSet,tA=function(e,t){for(const[i,s]of Object.entries(t))s===null?e.removeAttribute(i):e.setAttribute(i,s)},p(dt,dw),p(dt,im,0);let xy=dt;globalThis._pdfjsTestingUtils={HighlightOutliner:M1};globalThis.pdfjsLib={AbortException:Dr,AnnotationEditorLayer:Ay,AnnotationEditorParamsType:le,AnnotationEditorType:J,AnnotationEditorUIManager:sa,AnnotationLayer:vx,AnnotationMode:Rs,AnnotationType:tt,applyOpacity:sT,build:aP,ColorPicker:Pf,createValidAbsoluteUrl:ix,CSSConstants:iT,DOMSVGFactory:Rf,DrawLayer:xy,FeatureTest:kt,fetchData:od,findContrastColor:rT,getDocument:dx,getFilenameFromUrl:eT,getPdfFilenameFromUrl:tT,getRGB:ad,getUuid:rx,getXfaPageViewport:nT,GlobalWorkerOptions:Si,ImageKind:rf,InvalidPDFException:dy,isDataScheme:pm,isPdfFile:Dw,isValidExplicitDest:BT,MathClamp:Qt,noContextMenu:ti,normalizeUnicode:Zk,OPS:ed,OutputScale:Zi,PasswordResponses:Kk,PDFDataRangeTransport:fx,PDFDateString:_f,PDFWorker:td,PermissionFlag:qk,PixelsPerInch:Mr,RenderingCancelledException:Lw,renderRichText:lx,ResponseException:Ef,setLayerDimensions:ia,shadow:ie,SignatureExtractor:ct,stopEvent:Ge,SupportedImageMimeTypes:fy,TextLayer:Tf,TouchManager:kf,updateUrlHash:sx,Util:V,VerbosityLevel:hm,version:px,XfaLayer:ax};const aM=Object.freeze(Object.defineProperty({__proto__:null,AbortException:Dr,AnnotationEditorLayer:Ay,AnnotationEditorParamsType:le,AnnotationEditorType:J,AnnotationEditorUIManager:sa,AnnotationLayer:vx,AnnotationMode:Rs,AnnotationType:tt,CSSConstants:iT,ColorPicker:Pf,DOMSVGFactory:Rf,DrawLayer:xy,FeatureTest:kt,GlobalWorkerOptions:Si,ImageKind:rf,InvalidPDFException:dy,MathClamp:Qt,OPS:ed,OutputScale:Zi,PDFDataRangeTransport:fx,PDFDateString:_f,PDFWorker:td,PasswordResponses:Kk,PermissionFlag:qk,PixelsPerInch:Mr,RenderingCancelledException:Lw,ResponseException:Ef,SignatureExtractor:ct,SupportedImageMimeTypes:fy,TextLayer:Tf,TouchManager:kf,Util:V,VerbosityLevel:hm,XfaLayer:ax,applyOpacity:sT,build:aP,createValidAbsoluteUrl:ix,fetchData:od,findContrastColor:rT,getDocument:dx,getFilenameFromUrl:eT,getPdfFilenameFromUrl:tT,getRGB:ad,getUuid:rx,getXfaPageViewport:nT,isDataScheme:pm,isPdfFile:Dw,isValidExplicitDest:BT,noContextMenu:ti,normalizeUnicode:Zk,renderRichText:lx,setLayerDimensions:ia,shadow:ie,stopEvent:Ge,updateUrlHash:sx,version:px},Symbol.toStringTag,{value:"Module"}));function a2(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=a2(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function Iw(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=a2(n))&&(i&&(i+=" "),i+=e);return i}var gC=Object.prototype.hasOwnProperty;function mC(n,e,t){for(t of n.keys())if(Xc(t,e))return t}function Xc(n,e){var t,i,s;if(n===e)return!0;if(n&&e&&(t=n.constructor)===e.constructor){if(t===Date)return n.getTime()===e.getTime();if(t===RegExp)return n.toString()===e.toString();if(t===Array){if((i=n.length)===e.length)for(;i--&&Xc(n[i],e[i]););return i===-1}if(t===Set){if(n.size!==e.size)return!1;for(i of n)if(s=i,s&&typeof s=="object"&&(s=mC(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(n.size!==e.size)return!1;for(i of n)if(s=i[0],s&&typeof s=="object"&&(s=mC(e,s),!s)||!Xc(i[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)n=new Uint8Array(n),e=new Uint8Array(e);else if(t===DataView){if((i=n.byteLength)===e.byteLength)for(;i--&&n.getInt8(i)===e.getInt8(i););return i===-1}if(ArrayBuffer.isView(n)){if((i=n.byteLength)===e.byteLength)for(;i--&&n[i]===e[i];);return i===-1}if(!t||typeof n=="object"){i=0;for(t in n)if(gC.call(n,t)&&++i&&!gC.call(e,t)||!(t in e)||!Xc(n[t],e[t]))return!1;return Object.keys(e).length===i}}return n!==n&&e!==e}function ym(n){let e=!1;return{promise:new Promise((i,s)=>{n.then(r=>!e&&i(r)).catch(r=>!e&&s(r))}),cancel(){e=!0}}}const lM=["onCopy","onCut","onPaste"],cM=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],uM=["onFocus","onBlur"],hM=["onInput","onInvalid","onReset","onSubmit"],dM=["onLoad","onError"],fM=["onKeyDown","onKeyPress","onKeyUp"],pM=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],gM=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],mM=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],vM=["onSelect"],yM=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],wM=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],bM=["onScroll"],SM=["onWheel"],AM=["onAnimationStart","onAnimationEnd","onAnimationIteration"],xM=["onTransitionEnd"],EM=["onToggle"],CM=["onChange"],_M=[...lM,...cM,...uM,...hM,...dM,...fM,...pM,...gM,...mM,...vM,...yM,...wM,...bM,...SM,...AM,...xM,...CM,...EM];function l2(n,e){const t={};for(const i of _M){const s=n[i];s&&(e?t[i]=r=>s(r,e(i)):t[i]=s)}return t}var kM=!0,Ib="Invariant failed";function ke(n,e){if(!n){if(kM)throw new Error(Ib);var t=typeof e=="function"?e():e,i=t?"".concat(Ib,": ").concat(t):Ib;throw new Error(i)}}var TM=function(){},PM=TM;const Jt=IC(PM),RM=M.createContext(null),c2=RM,NM="noopener noreferrer nofollow";class LM{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return ke(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){ke(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,i){e.href=t,e.rel=this.externalLinkRel||NM,e.target=i?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{ke(this.pdfDocument,"PDF document not loaded."),ke(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{ke(Array.isArray(t),`"${t}" is not a valid destination array.`);const i=t[0];new Promise(s=>{ke(this.pdfDocument,"PDF document not loaded."),i instanceof Object?this.pdfDocument.getPageIndex(i).then(r=>{s(r)}).catch(()=>{ke(!1,`"${i}" is not a valid page reference.`)}):typeof i=="number"?s(i):ke(!1,`"${i}" is not a valid destination reference.`)}).then(s=>{const r=s+1;ke(this.pdfViewer,"PDF viewer is not initialized."),ke(r>=1&&r<=this.pagesCount,`"${r}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:r})})})}goToPage(e){const t=e-1;ke(this.pdfViewer,"PDF viewer is not initialized."),ke(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function Gc({children:n,type:e}){return C.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:n})}const DM={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},vC=DM;function MM(n,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return n}}function nd(){return M.useReducer(MM,{value:void 0,error:void 0})}const Ow=typeof window<"u",u2=Ow&&window.location.protocol==="file:";function FM(n){return typeof n<"u"}function ha(n){return FM(n)&&n!==null}function IM(n){return typeof n=="string"}function OM(n){return n instanceof ArrayBuffer}function BM(n){return ke(Ow,"isBlob can only be used in a browser environment"),n instanceof Blob}function nA(n){return IM(n)&&/^data:/.test(n)}function yC(n){ke(nA(n),"Invalid data URI.");const[e="",t=""]=n.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function jM(){return Ow&&window.devicePixelRatio||1}const h2="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function wC(){Jt(!u2,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${h2}`)}function zM(){Jt(!u2,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${h2}`)}function oc(n){n!=null&&n.cancel&&n.cancel()}function iA(n,e){return Object.defineProperty(n,"width",{get(){return this.getViewport({scale:e}).width},configurable:!0}),Object.defineProperty(n,"height",{get(){return this.getViewport({scale:e}).height},configurable:!0}),Object.defineProperty(n,"originalWidth",{get(){return this.getViewport({scale:1}).width},configurable:!0}),Object.defineProperty(n,"originalHeight",{get(){return this.getViewport({scale:1}).height},configurable:!0}),n}function d2(n){return n.name==="AbortException"||n.name==="RenderingCancelledException"}function UM(n){return new Promise((e,t)=>{const i=new FileReader;i.onload=()=>{if(!i.result)return t(new Error("Error while reading a file."));e(i.result)},i.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:r}=s.target;if(!r)return t(new Error("Error while reading a file."));switch(r.code){case r.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case r.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case r.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},i.readAsArrayBuffer(n)})}const{PDFDataRangeTransport:HM}=aM,$M=(n,e)=>{switch(e){case vC.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");n(t);break}case vC.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");n(t);break}}};function bC(n){return typeof n=="object"&&n!==null&&("data"in n||"range"in n||"url"in n)}const VM=M.forwardRef(function({children:e,className:t,error:i="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:r,file:o,inputRef:l,imageResourcesPath:c,loading:u="Loading PDF",noData:h="No PDF file specified.",onItemClick:d,onLoadError:f,onLoadProgress:m,onLoadSuccess:y,onPassword:w=$M,onSourceError:x,onSourceSuccess:v,options:b,renderMode:A,rotate:E,scale:_,...k},T){const[P,N]=nd(),{value:R,error:L}=P,[O,$]=nd(),{value:U,error:Q}=O,j=M.useRef(new LM),B=M.useRef([]),D=M.useRef(void 0),z=M.useRef(void 0);o&&o!==D.current&&bC(o)&&(Jt(!Xc(o,D.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),D.current=o),b&&b!==z.current&&(Jt(!Xc(b,z.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),z.current=b);const Y=M.useRef({scrollPageIntoView:ye=>{const{dest:we,pageNumber:$e,pageIndex:zt=$e-1}=ye;if(d){d({dest:we,pageIndex:zt,pageNumber:$e});return}const ot=B.current[zt];if(ot){ot.scrollIntoView();return}Jt(!1,`An internal link leading to page ${$e} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});M.useImperativeHandle(T,()=>({linkService:j,pages:B,viewer:Y}),[]);function Z(){v&&v()}function K(){L&&(Jt(!1,L.toString()),x&&x(L))}function H(){N({type:"RESET"})}M.useEffect(H,[o,N]);const fe=M.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return nA(o)?{data:yC(o)}:(wC(),{url:o});if(o instanceof HM)return{range:o};if(OM(o))return{data:o};if(Ow&&BM(o))return{data:await UM(o)};if(ke(typeof o=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),ke(bC(o),"Invalid parameter object: need either .data, .range or .url"),"url"in o&&typeof o.url=="string"){if(nA(o.url)){const{url:ye,...we}=o;return{data:yC(ye),...we}}wC()}return o},[o]);M.useEffect(()=>{const ye=ym(fe());return ye.promise.then(we=>{N({type:"RESOLVE",value:we})}).catch(we=>{N({type:"REJECT",error:we})}),()=>{oc(ye)}},[fe,N]),M.useEffect(()=>{if(!(typeof R>"u")){if(R===!1){K();return}Z()}},[R]);function Me(){U&&(y&&y(U),B.current=new Array(U.numPages),j.current.setDocument(U))}function Ee(){Q&&(Jt(!1,Q.toString()),f&&f(Q))}M.useEffect(function(){$({type:"RESET"})},[$,R]),M.useEffect(function(){if(!R)return;const we=b?{...R,...b}:R,$e=dx(we);m&&($e.onProgress=m),w&&($e.onPassword=w);const zt=$e;return zt.promise.then(ot=>{zt.destroyed||$({type:"RESOLVE",value:ot})}).catch(ot=>{zt.destroyed||$({type:"REJECT",error:ot})}),()=>{zt.destroy()}},[b,$,R]),M.useEffect(()=>{if(!(typeof U>"u")){if(U===!1){Ee();return}Me()}},[U]),M.useEffect(function(){j.current.setViewer(Y.current),j.current.setExternalLinkRel(s),j.current.setExternalLinkTarget(r)},[s,r]);const re=M.useCallback((ye,we)=>{B.current[ye]=we},[]),dn=M.useCallback(ye=>{delete B.current[ye]},[]),Tt=M.useMemo(()=>({imageResourcesPath:c,linkService:j.current,onItemClick:d,pdf:U,registerPage:re,renderMode:A,rotate:E,scale:_,unregisterPage:dn}),[c,d,U,re,A,E,_,dn]),rt=M.useMemo(()=>l2(k,()=>U),[k,U]);function oe(){function ye($e){return!!($e!=null&&$e.pdf)}if(!ye(Tt))throw new Error("pdf is undefined");const we=typeof e=="function"?e(Tt):e;return C.jsx(c2.Provider,{value:Tt,children:we})}function Pn(){return o?U==null?C.jsx(Gc,{type:"loading",children:typeof u=="function"?u():u}):U===!1?C.jsx(Gc,{type:"error",children:typeof i=="function"?i():i}):oe():C.jsx(Gc,{type:"no-data",children:typeof h=="function"?h():h})}return C.jsx("div",{className:Iw("react-pdf__Document",t),ref:l,...rt,children:Pn()})}),WM=VM;function f2(){return M.useContext(c2)}function p2(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];var t=n.filter(Boolean);if(t.length<=1){var i=t[0];return i||null}return function(r){for(var o=0,l=t;o<l.length;o++){var c=l[o];typeof c=="function"?c(r):c&&(c.current=r)}}}const XM=M.createContext(null),g2=XM;function Bw(){return M.useContext(g2)}function GM(){const n=f2(),e=Bw();ke(e,"Unable to find Page context.");const t={...n,...e},{filterAnnotations:i,imageResourcesPath:s,linkService:r,onGetAnnotationsError:o,onGetAnnotationsSuccess:l,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:u,page:h,pdf:d,renderForms:f,rotate:m,scale:y=1}=t;ke(d,"Attempted to load page annotations, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop."),ke(h,"Attempted to load page annotations, but no page was specified."),ke(r,"Attempted to load page annotations, but no linkService was specified.");const[w,x]=nd(),{value:v,error:b}=w,A=M.useRef(null);Jt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function E(){v&&l&&l(v)}function _(){b&&(Jt(!1,b.toString()),o&&o(b))}M.useEffect(function(){x({type:"RESET"})},[x,h]),M.useEffect(function(){if(!h)return;const R=ym(h.getAnnotations()),L=R;return R.promise.then(O=>{x({type:"RESOLVE",value:O})}).catch(O=>{x({type:"REJECT",error:O})}),()=>{oc(L)}},[x,h]),M.useEffect(()=>{if(v!==void 0){if(v===!1){_();return}E()}},[v]);function k(){u&&u()}function T(N){Jt(!1,`${N}`),c&&c(N)}const P=M.useMemo(()=>h.getViewport({scale:y,rotation:m}),[h,m,y]);return M.useEffect(function(){if(!d||!h||!r||!v)return;const{current:R}=A;if(!R)return;const L=P.clone({dontFlip:!0}),O={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:d.annotationStorage,commentManager:null,div:R,l10n:null,linkService:r,page:h,structTreeLayer:null,viewport:L},$={annotations:i?i({annotations:v}):v,annotationStorage:d.annotationStorage,div:R,imageResourcesPath:s,linkService:r,page:h,renderForms:f,viewport:L};R.innerHTML="";try{new vx(O).render($),k()}catch(U){T(U)}return()=>{}},[v,i,s,r,h,d,f,P]),C.jsx("div",{className:Iw("react-pdf__Page__annotations","annotationLayer"),ref:A})}const m2={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},YM=/^H(\d+)$/;function qM(n){return n in m2}function jw(n){return"children"in n}function v2(n){return jw(n)?n.children.length===1&&0 in n.children&&"id"in n.children[0]:!1}function KM(n){const e={};if(jw(n)){const{role:t}=n,i=t.match(YM);if(i)e.role="heading",e["aria-level"]=Number(i[1]);else if(qM(t)){const s=m2[t];s&&(e.role=s)}}return e}function y2(n){const e={};if(jw(n)){if(n.alt!==void 0&&(e["aria-label"]=n.alt),n.lang!==void 0&&(e.lang=n.lang),v2(n)){const[t]=n.children;if(t){const i=y2(t);return{...e,...i}}}}else"id"in n&&(e["aria-owns"]=n.id);return e}function QM(n){return n?{...KM(n),...y2(n)}:null}function w2({className:n,node:e}){const t=M.useMemo(()=>QM(e),[e]),i=M.useMemo(()=>!jw(e)||v2(e)?null:e.children.map((s,r)=>C.jsx(w2,{node:s},r)),[e]);return C.jsx("span",{className:n,...t,children:i})}function ZM(){const n=Bw();ke(n,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=n,[i,s]=nd(),{value:r,error:o}=i,{customTextRenderer:l,page:c}=n;function u(){r&&t&&t(r)}function h(){o&&(Jt(!1,o.toString()),e&&e(o))}return M.useEffect(function(){s({type:"RESET"})},[s,c]),M.useEffect(function(){if(l||!c)return;const f=ym(c.getStructTree()),m=f;return f.promise.then(y=>{s({type:"RESOLVE",value:y})}).catch(y=>{s({type:"REJECT",error:y})}),()=>oc(m)},[l,c,s]),M.useEffect(()=>{if(r!==void 0){if(r===!1){h();return}u()}},[r]),r?C.jsx(w2,{className:"react-pdf__Page__structTree structTree",node:r}):null}const SC=Rs;function JM(n){const e=Bw();ke(e,"Unable to find Page context.");const t={...e,...n},{_className:i,canvasBackground:s,devicePixelRatio:r=jM(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:u,renderTextLayer:h,rotate:d,scale:f}=t,{canvasRef:m}=n;ke(c,"Attempted to render page canvas, but no page was specified.");const y=M.useRef(null);function w(){c&&l&&l(iA(c,f))}function x(E){d2(E)||(Jt(!1,E.toString()),o&&o(E))}const v=M.useMemo(()=>c.getViewport({scale:f*r,rotation:d}),[r,c,d,f]),b=M.useMemo(()=>c.getViewport({scale:f,rotation:d}),[c,d,f]);M.useEffect(function(){if(!c)return;c.cleanup();const{current:_}=y;if(!_)return;_.width=v.width,_.height=v.height,_.style.width=`${Math.floor(b.width)}px`,_.style.height=`${Math.floor(b.height)}px`,_.style.visibility="hidden";const k={annotationMode:u?SC.ENABLE_FORMS:SC.ENABLE,canvas:_,canvasContext:_.getContext("2d",{alpha:!1}),viewport:v};s&&(k.background=s);const T=c.render(k),P=T;return T.promise.then(()=>{_.style.visibility="",w()}).catch(x),()=>oc(P)},[s,c,u,v,b]);const A=M.useCallback(()=>{const{current:E}=y;E&&(E.width=0,E.height=0)},[]);return M.useEffect(()=>A,[A]),C.jsx("canvas",{className:`${i}__canvas`,dir:"ltr",ref:p2(m,y),style:{display:"block",userSelect:"none"},children:h?C.jsx(ZM,{}):null})}function eF(n){return"str"in n}function tF(){const n=Bw();ke(n,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:i,onRenderTextLayerError:s,onRenderTextLayerSuccess:r,page:o,pageIndex:l,pageNumber:c,rotate:u,scale:h}=n;ke(o,"Attempted to load page text content, but no page was specified.");const[d,f]=nd(),{value:m,error:y}=d,w=M.useRef(null);Jt(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function x(){m&&i&&i(m)}function v(){y&&(Jt(!1,y.toString()),t&&t(y))}M.useEffect(function(){f({type:"RESET"})},[o,f]),M.useEffect(function(){if(!o)return;const P=ym(o.getTextContent()),N=P;return P.promise.then(R=>{f({type:"RESOLVE",value:R})}).catch(R=>{f({type:"REJECT",error:R})}),()=>oc(N)},[o,f]),M.useEffect(()=>{if(m!==void 0){if(m===!1){v();return}x()}},[m]);const b=M.useCallback(()=>{r&&r()},[r]),A=M.useCallback(T=>{d2(T)||(Jt(!1,T.toString()),s&&s(T))},[s]);function E(){const T=w.current;T&&T.classList.add("selecting")}function _(){const T=w.current;T&&T.classList.remove("selecting")}const k=M.useMemo(()=>o.getViewport({scale:h,rotation:u}),[o,u,h]);return M.useLayoutEffect(function(){if(!o||!m)return;const{current:P}=w;if(!P)return;P.innerHTML="";const N=o.streamTextContent({includeMarkedContent:!0}),R={container:P,textContentSource:N,viewport:k},L=new Tf(R),O=L;return L.render().then(()=>{const $=document.createElement("div");$.className="endOfContent",P.append($);const U=P.querySelectorAll('[role="presentation"]');if(e){let Q=0;m.items.forEach((j,B)=>{if(!eF(j))return;const D=U[Q];if(!D)return;const z=e({pageIndex:l,pageNumber:c,itemIndex:B,...j});D.innerHTML=z,Q+=j.str&&j.hasEOL?2:1})}b()}).catch(A),()=>oc(O)},[e,A,b,o,l,c,m,k]),C.jsx("div",{className:Iw("react-pdf__Page__textContent","textLayer"),onMouseUp:_,onMouseDown:E,ref:w})}const AC=1;function nF(n){const t={...f2(),...n},{_className:i="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:r,canvasRef:o,children:l,className:c,customRenderer:u,customTextRenderer:h,devicePixelRatio:d,error:f="Failed to load the page.",filterAnnotations:m,height:y,inputRef:w,loading:x="Loading page",noData:v="No page specified.",onGetAnnotationsError:b,onGetAnnotationsSuccess:A,onGetStructTreeError:E,onGetStructTreeSuccess:_,onGetTextError:k,onGetTextSuccess:T,onLoadError:P,onLoadSuccess:N,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:L,onRenderError:O,onRenderSuccess:$,onRenderTextLayerError:U,onRenderTextLayerSuccess:Q,pageIndex:j,pageNumber:B,pdf:D,registerPage:z,renderAnnotationLayer:Y=!0,renderForms:Z=!1,renderMode:K="canvas",renderTextLayer:H=!0,rotate:fe,scale:Me=AC,unregisterPage:Ee,width:re,...dn}=t,[Tt,rt]=nd(),{value:oe,error:Pn}=Tt,ye=M.useRef(null);ke(D,"Attempted to load a page, but no document was specified. Wrap <Page /> in a <Document /> or pass explicit `pdf` prop.");const we=ha(B)?B-1:j??null,$e=B??(ha(j)?j+1:null),zt=fe??(oe?oe.rotate:null),ot=M.useMemo(()=>{if(!oe)return null;let Ut=1;const Ir=Me??AC;if(re||y){const Ji=oe.getViewport({scale:1,rotation:zt});re?Ut=re/Ji.width:y&&(Ut=y/Ji.height)}return Ir*Ut},[y,oe,zt,Me,re]);M.useEffect(function(){return()=>{ha(we)&&s&&Ee&&Ee(we)}},[s,D,we,Ee]);function Hw(){if(N){if(!oe||!ot)return;N(iA(oe,ot))}if(s&&z){if(!ha(we)||!ye.current)return;z(we,ye.current)}}function $w(){Pn&&(Jt(!1,Pn.toString()),P&&P(Pn))}M.useEffect(function(){rt({type:"RESET"})},[rt,D,we]),M.useEffect(function(){if(!D||!$e)return;const Ir=ym(D.getPage($e)),Ji=Ir;return Ir.promise.then(ld=>{rt({type:"RESOLVE",value:ld})}).catch(ld=>{rt({type:"REJECT",error:ld})}),()=>oc(Ji)},[rt,D,$e]),M.useEffect(()=>{if(oe!==void 0){if(oe===!1){$w();return}Hw()}},[oe,ot]);const ua=M.useMemo(()=>ha(we)&&$e&&ha(zt)&&ha(ot)?{_className:i,canvasBackground:r,customTextRenderer:h,devicePixelRatio:d,filterAnnotations:m,onGetAnnotationsError:b,onGetAnnotationsSuccess:A,onGetStructTreeError:E,onGetStructTreeSuccess:_,onGetTextError:k,onGetTextSuccess:T,onRenderAnnotationLayerError:R,onRenderAnnotationLayerSuccess:L,onRenderError:O,onRenderSuccess:$,onRenderTextLayerError:U,onRenderTextLayerSuccess:Q,page:oe,pageIndex:we,pageNumber:$e,renderForms:Z,renderTextLayer:H,rotate:zt,scale:ot}:null,[i,r,h,d,m,b,A,E,_,k,T,R,L,O,$,U,Q,oe,we,$e,Z,H,zt,ot]),Sm=M.useMemo(()=>l2(dn,()=>oe&&(ot?iA(oe,ot):void 0)),[dn,oe,ot]),Ds=`${we}@${ot}/${zt}`;function Vw(){switch(K){case"custom":return ke(u,'renderMode was set to "custom", but no customRenderer was passed.'),C.jsx(u,{},`${Ds}_custom`);case"none":return null;case"canvas":default:return C.jsx(JM,{canvasRef:o},`${Ds}_canvas`)}}function pe(){return H?C.jsx(tF,{},`${Ds}_text`):null}function ce(){return Y?C.jsx(GM,{},`${Ds}_annotations`):null}function fn(){function Ut(Ji){return!!(Ji!=null&&Ji.page)}if(!Ut(ua))throw new Error("page is undefined");const Ir=typeof l=="function"?l(ua):l;return C.jsxs(g2.Provider,{value:ua,children:[Vw(),pe(),ce(),Ir]})}function ki(){return $e?D===null||oe===void 0||oe===null?C.jsx(Gc,{type:"loading",children:typeof x=="function"?x():x}):D===!1||oe===!1?C.jsx(Gc,{type:"error",children:typeof f=="function"?f():f}):fn():C.jsx(Gc,{type:"no-data",children:typeof v=="function"?v():v})}return C.jsx("div",{className:Iw(i,c),"data-page-number":$e,ref:p2(w,ye),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${ot}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:r||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Sm,children:ki()})}zM();Si.workerSrc="pdf.worker.mjs";var xi=function(n,e){return Number(n.toFixed(e))},iF=function(n,e){return typeof n=="number"?n:e},ze=function(n,e,t){t&&typeof t=="function"&&t(n,e)},sF=function(n){return-Math.cos(n*Math.PI)/2+.5},rF=function(n){return n},oF=function(n){return n*n},aF=function(n){return n*(2-n)},lF=function(n){return n<.5?2*n*n:-1+(4-2*n)*n},cF=function(n){return n*n*n},uF=function(n){return--n*n*n+1},hF=function(n){return n<.5?4*n*n*n:(n-1)*(2*n-2)*(2*n-2)+1},dF=function(n){return n*n*n*n},fF=function(n){return 1- --n*n*n*n},pF=function(n){return n<.5?8*n*n*n*n:1-8*--n*n*n*n},gF=function(n){return n*n*n*n*n},mF=function(n){return 1+--n*n*n*n*n},vF=function(n){return n<.5?16*n*n*n*n*n:1+16*--n*n*n*n*n},b2={easeOut:sF,linear:rF,easeInQuad:oF,easeOutQuad:aF,easeInOutQuad:lF,easeInCubic:cF,easeOutCubic:uF,easeInOutCubic:hF,easeInQuart:dF,easeOutQuart:fF,easeInOutQuart:pF,easeInQuint:gF,easeOutQuint:mF,easeInOutQuint:vF},S2=function(n){typeof n=="number"&&cancelAnimationFrame(n)},Yi=function(n){n.mounted&&(S2(n.animation),n.animate=!1,n.animation=null,n.velocity=null)};function A2(n,e,t,i){if(n.mounted){var s=new Date().getTime(),r=1;Yi(n),n.animation=function(){if(!n.mounted)return S2(n.animation);var o=new Date().getTime()-s,l=o/t,c=b2[e],u=c(l);o>=t?(i(r),n.animation=null):n.animation&&(i(u),requestAnimationFrame(n.animation))},requestAnimationFrame(n.animation)}}function yF(n){var e=n.scale,t=n.positionX,i=n.positionY;return!(Number.isNaN(e)||Number.isNaN(t)||Number.isNaN(i))}function ca(n,e,t,i){var s=yF(e);if(!(!n.mounted||!s)){var r=n.setTransformState,o=n.transformState,l=o.scale,c=o.positionX,u=o.positionY,h=e.scale-l,d=e.positionX-c,f=e.positionY-u;t===0?r(e.scale,e.positionX,e.positionY):A2(n,i,t,function(m){var y=l+h*m,w=c+d*m,x=u+f*m;r(y,w,x)})}}function wF(n,e,t){var i=n.offsetWidth,s=n.offsetHeight,r=e.offsetWidth,o=e.offsetHeight,l=r*t,c=o*t,u=i-l,h=s-c;return{wrapperWidth:i,wrapperHeight:s,newContentWidth:l,newDiffWidth:u,newContentHeight:c,newDiffHeight:h}}var bF=function(n,e,t,i,s,r,o){var l=n>e?t*(o?1:.5):0,c=i>s?r*(o?1:.5):0,u=n-e-l,h=l,d=i-s-c,f=c;return{minPositionX:u,maxPositionX:h,minPositionY:d,maxPositionY:f}},bx=function(n,e){var t=n.wrapperComponent,i=n.contentComponent,s=n.setup.centerZoomedOut;if(!t||!i)throw new Error("Components are not mounted");var r=wF(t,i,e),o=r.wrapperWidth,l=r.wrapperHeight,c=r.newContentWidth,u=r.newDiffWidth,h=r.newContentHeight,d=r.newDiffHeight,f=bF(o,c,u,l,h,d,!!s);return f},sA=function(n,e,t,i){return i?n<e?xi(e,2):n>t?xi(t,2):xi(n,2):xi(n,2)},Jl=function(n,e){var t=bx(n,e);return n.bounds=t,t};function wm(n,e,t,i,s,r,o){var l=t.minPositionX,c=t.minPositionY,u=t.maxPositionX,h=t.maxPositionY,d=0,f=0;o&&(d=s,f=r);var m=sA(n,l-d,u+d,i),y=sA(e,c-f,h+f,i);return{x:m,y}}function zw(n,e,t,i,s,r){var o=n.transformState,l=o.scale,c=o.positionX,u=o.positionY,h=i-l;if(typeof e!="number"||typeof t!="number")return console.error("Mouse X and Y position were not provided!"),{x:c,y:u};var d=c-e*h,f=u-t*h,m=wm(d,f,s,r,0,0,null);return m}function bm(n,e,t,i,s){var r=s?i:0,o=e-r;return!Number.isNaN(t)&&n>=t?t:!Number.isNaN(e)&&n<=o?o:n}var xC=function(n,e){var t=n.setup.panning.excluded,i=n.isInitialized,s=n.wrapperComponent,r=e.target,o="shadowRoot"in r&&"composedPath"in e,l=o?e.composedPath().some(function(h){return h instanceof Element?s==null?void 0:s.contains(h):!1}):s==null?void 0:s.contains(r),c=i&&r&&l;if(!c)return!1;var u=Uw(r,t);return!u},EC=function(n){var e=n.isInitialized,t=n.isPanning,i=n.setup,s=i.panning.disabled,r=e&&t&&!s;return!!r},SF=function(n,e){var t=n.transformState,i=t.positionX,s=t.positionY;n.isPanning=!0;var r=e.clientX,o=e.clientY;n.startCoords={x:r-i,y:o-s}},AF=function(n,e){var t=e.touches,i=n.transformState,s=i.positionX,r=i.positionY;n.isPanning=!0;var o=t.length===1;if(o){var l=t[0].clientX,c=t[0].clientY;n.startCoords={x:l-s,y:c-r}}};function xF(n){var e=n.transformState,t=e.positionX,i=e.positionY,s=e.scale,r=n.setup,o=r.disabled,l=r.limitToBounds,c=r.centerZoomedOut,u=n.wrapperComponent;if(!(o||!u||!n.bounds)){var h=n.bounds,d=h.maxPositionX,f=h.minPositionX,m=h.maxPositionY,y=h.minPositionY,w=t>d||t<f,x=i>m||i<y,v=t>d?u.offsetWidth:n.setup.minPositionX||0,b=i>m?u.offsetHeight:n.setup.minPositionY||0,A=zw(n,v,b,s,n.bounds,l||c),E=A.x,_=A.y;return{scale:s,positionX:w?E:t,positionY:x?_:i}}}function x2(n,e,t,i,s){var r=n.setup.limitToBounds,o=n.wrapperComponent,l=n.bounds,c=n.transformState,u=c.scale,h=c.positionX,d=c.positionY;if(!(o===null||l===null||e===h&&t===d)){var f=wm(e,t,l,r,i,s,o),m=f.x,y=f.y;n.setTransformState(u,m,y)}}var EF=function(n,e,t){var i=n.startCoords,s=n.transformState,r=n.setup.panning,o=r.lockAxisX,l=r.lockAxisY,c=s.positionX,u=s.positionY;if(!i)return{x:c,y:u};var h=e-i.x,d=t-i.y,f=o?c:h,m=l?u:d;return{x:f,y:m}},ra=function(n,e){var t=n.setup,i=n.transformState,s=i.scale,r=t.minScale,o=t.disablePadding;return e>0&&s>=r&&!o?e:0},CF=function(n){var e=n.mounted,t=n.setup,i=t.disabled,s=t.velocityAnimation,r=n.transformState.scale,o=s.disabled,l=!o||r>1||!i||e;return!!l},_F=function(n){var e=n.mounted,t=n.velocity,i=n.bounds,s=n.setup,r=s.disabled,o=s.velocityAnimation,l=n.transformState.scale,c=o.disabled,u=!c||l>1||!r||e;return!(!u||!t||!i)};function kF(n,e){var t=n.setup.velocityAnimation,i=t.equalToMove,s=t.animationTime,r=t.sensitivity;return i?s*e*r:s}function CC(n,e,t,i,s,r,o,l,c,u){if(s){if(e>o&&t>o){var h=o+(n-o)*u;return h>c?c:h<o?o:h}if(e<r&&t<r){var h=r+(n-r)*u;return h<l?l:h>r?r:h}}return i?e:sA(n,r,o,s)}function TF(n,e){var t=1;return e?Math.min(t,n.offsetWidth/window.innerWidth):t}function PF(n,e){var t=CF(n);if(t){var i=n.lastMousePosition,s=n.velocityTime,r=n.setup,o=n.wrapperComponent,l=r.velocityAnimation.equalToMove,c=Date.now();if(i&&s&&o){var u=TF(o,l),h=e.x-i.x,d=e.y-i.y,f=h/u,m=d/u,y=c-s,w=h*h+d*d,x=Math.sqrt(w)/y;n.velocity={velocityX:f,velocityY:m,total:x}}n.lastMousePosition=e,n.velocityTime=c}}function RF(n){var e=n.velocity,t=n.bounds,i=n.setup,s=n.wrapperComponent,r=_F(n);if(!(!r||!e||!t||!s)){var o=e.velocityX,l=e.velocityY,c=e.total,u=t.maxPositionX,h=t.minPositionX,d=t.maxPositionY,f=t.minPositionY,m=i.limitToBounds,y=i.alignmentAnimation,w=i.zoomAnimation,x=i.panning,v=x.lockAxisY,b=x.lockAxisX,A=w.animationType,E=y.sizeX,_=y.sizeY,k=y.velocityAlignmentTime,T=k,P=kF(n,c),N=Math.max(P,T),R=ra(n,E),L=ra(n,_),O=R*s.offsetWidth/100,$=L*s.offsetHeight/100,U=u+O,Q=h-O,j=d+$,B=f-$,D=n.transformState,z=new Date().getTime();A2(n,A,N,function(Y){var Z=n.transformState,K=Z.scale,H=Z.positionX,fe=Z.positionY,Me=new Date().getTime()-z,Ee=Me/T,re=b2[y.animationType],dn=1-re(Math.min(1,Ee)),Tt=1-Y,rt=H+o*Tt,oe=fe+l*Tt,Pn=CC(rt,D.positionX,H,b,m,h,u,Q,U,dn),ye=CC(oe,D.positionY,fe,v,m,f,d,B,j,dn);(H!==rt||fe!==oe)&&n.setTransformState(K,Pn,ye)})}}function _C(n,e){var t=n.transformState.scale;Yi(n),Jl(n,t),window.TouchEvent!==void 0&&e instanceof TouchEvent?AF(n,e):SF(n,e)}function Sx(n,e){var t=n.transformState.scale,i=n.setup,s=i.minScale,r=i.alignmentAnimation,o=r.disabled,l=r.sizeX,c=r.sizeY,u=r.animationTime,h=r.animationType,d=o||t<s||!l&&!c;if(!d){var f=xF(n);f&&ca(n,f,e??u,h)}}function kC(n,e,t){var i=n.startCoords,s=n.setup,r=s.alignmentAnimation,o=r.sizeX,l=r.sizeY;if(i){var c=EF(n,e,t),u=c.x,h=c.y,d=ra(n,o),f=ra(n,l);PF(n,{x:u,y:h}),x2(n,u,h,d,f)}}function NF(n){if(n.isPanning){var e=n.setup.panning.velocityDisabled,t=n.velocity,i=n.wrapperComponent,s=n.contentComponent;n.isPanning=!1,n.animate=!1,n.animation=null;var r=i==null?void 0:i.getBoundingClientRect(),o=s==null?void 0:s.getBoundingClientRect(),l=(r==null?void 0:r.width)||0,c=(r==null?void 0:r.height)||0,u=(o==null?void 0:o.width)||0,h=(o==null?void 0:o.height)||0,d=l<u||c<h,f=!e&&t&&(t==null?void 0:t.total)>.1&&d;f?RF(n):Sx(n)}}function Ax(n,e,t,i){var s=n.setup,r=s.minScale,o=s.maxScale,l=s.limitToBounds,c=bm(xi(e,2),r,o,0,!1),u=Jl(n,c),h=zw(n,t,i,c,u,l),d=h.x,f=h.y;return{scale:c,positionX:d,positionY:f}}function E2(n,e,t){var i=n.transformState.scale,s=n.wrapperComponent,r=n.setup,o=r.minScale,l=r.limitToBounds,c=r.zoomAnimation,u=c.disabled,h=c.animationTime,d=c.animationType,f=u||i>=o;if((i>=1||l)&&Sx(n),!(f||!s||!n.mounted)){var m=e||s.offsetWidth/2,y=t||s.offsetHeight/2,w=Ax(n,o,m,y);w&&ca(n,w,h,d)}}var ea=function(){return ea=Object.assign||function(e){for(var t,i=1,s=arguments.length;i<s;i++){t=arguments[i];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ea.apply(this,arguments)};function TC(n,e,t){if(t||arguments.length===2)for(var i=0,s=e.length,r;i<s;i++)(r||!(i in e))&&(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return n.concat(r||Array.prototype.slice.call(e))}var Km={previousScale:1,scale:1,positionX:0,positionY:0},Ad={disabled:!1,minPositionX:null,maxPositionX:null,minPositionY:null,maxPositionY:null,minScale:1,maxScale:8,limitToBounds:!0,centerZoomedOut:!1,centerOnInit:!1,disablePadding:!1,smooth:!0,wheel:{step:.2,disabled:!1,smoothStep:.001,wheelDisabled:!1,touchPadDisabled:!1,activationKeys:[],excluded:[]},panning:{disabled:!1,velocityDisabled:!1,lockAxisX:!1,lockAxisY:!1,allowLeftClickPan:!0,allowMiddleClickPan:!0,allowRightClickPan:!0,wheelPanning:!1,activationKeys:[],excluded:[]},pinch:{step:5,disabled:!1,excluded:[]},doubleClick:{disabled:!1,step:.7,mode:"zoomIn",animationType:"easeOut",animationTime:200,excluded:[]},zoomAnimation:{disabled:!1,size:.4,animationTime:200,animationType:"easeOut"},alignmentAnimation:{disabled:!1,sizeX:100,sizeY:100,animationTime:200,velocityAlignmentTime:400,animationType:"easeOut"},velocityAnimation:{disabled:!1,sensitivity:1,animationTime:400,animationType:"easeOut",equalToMove:!0}},rA={wrapperClass:"react-transform-wrapper",contentClass:"react-transform-component"},C2=function(n){var e,t,i,s;return{previousScale:(e=n.initialScale)!==null&&e!==void 0?e:Km.scale,scale:(t=n.initialScale)!==null&&t!==void 0?t:Km.scale,positionX:(i=n.initialPositionX)!==null&&i!==void 0?i:Km.positionX,positionY:(s=n.initialPositionY)!==null&&s!==void 0?s:Km.positionY}},PC=function(n){var e=ea({},Ad);return Object.keys(n).forEach(function(t){var i=typeof n[t]<"u",s=typeof Ad[t]<"u";if(s&&i){var r=Object.prototype.toString.call(Ad[t]),o=r==="[object Object]",l=r==="[object Array]";o?e[t]=ea(ea({},Ad[t]),n[t]):l?e[t]=TC(TC([],Ad[t],!0),n[t],!0):e[t]=n[t]}}),e},_2=function(n,e,t){var i=n.transformState.scale,s=n.wrapperComponent,r=n.setup,o=r.maxScale,l=r.minScale,c=r.zoomAnimation,u=r.smooth,h=c.size;if(!s)throw new Error("Wrapper is not mounted");var d=u?i*Math.exp(e*t):i+e*t,f=bm(xi(d,3),l,o,h,!1);return f};function k2(n,e,t,i,s){var r=n.wrapperComponent,o=n.transformState,l=o.scale,c=o.positionX,u=o.positionY;if(!r)return console.error("No WrapperComponent found");var h=r.offsetWidth,d=r.offsetHeight,f=(h/2-c)/l,m=(d/2-u)/l,y=_2(n,e,t),w=Ax(n,y,f,m);if(!w)return console.error("Error during zoom event. New transformation state was not calculated.");ca(n,w,i,s)}function T2(n,e,t,i){var s=n.setup,r=n.wrapperComponent,o=s.limitToBounds,l=C2(n.props),c=n.transformState,u=c.scale,h=c.positionX,d=c.positionY;if(r){var f=bx(n,l.scale),m=wm(l.positionX,l.positionY,f,o,0,0,r),y={scale:l.scale,positionX:m.x,positionY:m.y};u===l.scale&&h===l.positionX&&d===l.positionY||(i==null||i(),ca(n,y,e,t))}}function LF(n,e,t,i){var s=n.getBoundingClientRect(),r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),l=r.x*i.scale,c=r.y*i.scale;return{x:(s.x-o.x+l)/i.scale,y:(s.y-o.y+c)/i.scale}}function DF(n,e,t){var i=n.wrapperComponent,s=n.contentComponent,r=n.transformState,o=n.setup,l=o.limitToBounds,c=o.minScale,u=o.maxScale;if(!i||!s)return r;var h=i.getBoundingClientRect(),d=e.getBoundingClientRect(),f=LF(e,i,s,r),m=f.x,y=f.y,w=d.width/r.scale,x=d.height/r.scale,v=i.offsetWidth/w,b=i.offsetHeight/x,A=bm(t||Math.min(v,b),c,u,0,!1),E=(h.width-w*A)/2,_=(h.height-x*A)/2,k=(h.left-m)*A+E,T=(h.top-y)*A+_,P=bx(n,A),N=wm(k,T,P,l,0,0,i),R=N.x,L=N.y;return{positionX:R,positionY:L,scale:A}}var MF=function(n){return function(e,t,i){e===void 0&&(e=.5),t===void 0&&(t=300),i===void 0&&(i="easeOut"),k2(n,1,e,t,i)}},FF=function(n){return function(e,t,i){e===void 0&&(e=.5),t===void 0&&(t=300),i===void 0&&(i="easeOut"),k2(n,-1,e,t,i)}},IF=function(n){return function(e,t,i,s,r){s===void 0&&(s=300),r===void 0&&(r="easeOut");var o=n.transformState,l=o.positionX,c=o.positionY,u=o.scale,h=n.wrapperComponent,d=n.contentComponent,f=n.setup.disabled;if(!(f||!h||!d)){var m={positionX:Number.isNaN(e)?l:e,positionY:Number.isNaN(t)?c:t,scale:Number.isNaN(i)?u:i};ca(n,m,s,r)}}},OF=function(n){return function(e,t){e===void 0&&(e=200),t===void 0&&(t="easeOut"),T2(n,e,t)}},BF=function(n){return function(e,t,i){t===void 0&&(t=200),i===void 0&&(i="easeOut");var s=n.transformState,r=n.wrapperComponent,o=n.contentComponent;if(r&&o){var l=P2(e||s.scale,r,o);ca(n,l,t,i)}}},jF=function(n){return function(e,t,i,s){i===void 0&&(i=600),s===void 0&&(s="easeOut"),Yi(n);var r=n.wrapperComponent,o=typeof e=="string"?document.getElementById(e):e;if(r&&o&&r.contains(o)){var l=DF(n,o,t);ca(n,l,i,s)}}},oA=function(n){return{instance:n,zoomIn:MF(n),zoomOut:FF(n),setTransform:IF(n),resetTransform:OF(n),centerView:BF(n),zoomToElement:jF(n)}},zF=function(n){return{instance:n,state:n.transformState}},Ne=function(n){var e={};return Object.assign(e,zF(n)),Object.assign(e,oA(n)),e},Ob=!1;function Bb(){try{var n={get passive(){return Ob=!0,!1}};return n}catch{return Ob=!1,Ob}}var Qm=".".concat(rA.wrapperClass),Uw=function(n,e){return e.some(function(t){return n.matches("".concat(Qm," ").concat(t,", ").concat(Qm," .").concat(t,", ").concat(Qm," ").concat(t," *, ").concat(Qm," .").concat(t," *"))})},aA=function(n){n&&clearTimeout(n)},UF=function(n,e,t){return"translate(".concat(n,"px, ").concat(e,"px) scale(").concat(t,")")},P2=function(n,e,t){var i=t.offsetWidth*n,s=t.offsetHeight*n,r=(e.offsetWidth-i)/2,o=(e.offsetHeight-s)/2;return{scale:n,positionX:r,positionY:o}};function HF(n){return function(e){n.forEach(function(t){typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var $F=function(n,e){var t=n.setup.wheel,i=t.disabled,s=t.wheelDisabled,r=t.touchPadDisabled,o=t.excluded,l=n.isInitialized,c=n.isPanning,u=e.target,h=l&&!c&&!i&&u;if(!h||s&&!e.ctrlKey||r&&e.ctrlKey)return!1;var d=Uw(u,o);return!d},VF=function(n){return n?n.deltaY<0?1:-1:0};function WF(n,e){var t=VF(n),i=iF(e,t);return i}function R2(n,e,t){var i=e.getBoundingClientRect(),s=0,r=0;if("clientX"in n)s=(n.clientX-i.left)/t,r=(n.clientY-i.top)/t;else{var o=n.touches[0];s=(o.clientX-i.left)/t,r=(o.clientY-i.top)/t}return(Number.isNaN(s)||Number.isNaN(r))&&console.error("No mouse or touch offset found"),{x:s,y:r}}var XF=function(n,e,t,i,s){var r=n.transformState.scale,o=n.wrapperComponent,l=n.setup,c=l.maxScale,u=l.minScale,h=l.zoomAnimation,d=l.disablePadding,f=h.size,m=h.disabled;if(!o)throw new Error("Wrapper is not mounted");var y=r+e*t;if(s)return y;var w=i?!1:!m,x=bm(xi(y,3),u,c,f,w&&!d);return x},GF=function(n,e){var t=n.previousWheelEvent,i=n.transformState.scale,s=n.setup,r=s.maxScale,o=s.minScale;return t?i<r||i>o||Math.sign(t.deltaY)!==Math.sign(e.deltaY)||t.deltaY>0&&t.deltaY<e.deltaY||t.deltaY<0&&t.deltaY>e.deltaY||Math.sign(t.deltaY)!==Math.sign(e.deltaY):!1},YF=function(n,e){var t=n.setup.pinch,i=t.disabled,s=t.excluded,r=n.isInitialized,o=e.target,l=r&&!i&&o;if(!l)return!1;var c=Uw(o,s);return!c},qF=function(n){var e=n.setup.pinch.disabled,t=n.isInitialized,i=n.pinchStartDistance,s=t&&!e&&i;return!!s},KF=function(n,e,t){var i=t.getBoundingClientRect(),s=n.touches,r=xi(s[0].clientX-i.left,5),o=xi(s[0].clientY-i.top,5),l=xi(s[1].clientX-i.left,5),c=xi(s[1].clientY-i.top,5);return{x:(r+l)/2/e,y:(o+c)/2/e}},N2=function(n){return Math.sqrt(Math.pow(n.touches[0].pageX-n.touches[1].pageX,2)+Math.pow(n.touches[0].pageY-n.touches[1].pageY,2))},QF=function(n,e){var t=n.pinchStartScale,i=n.pinchStartDistance,s=n.setup,r=s.maxScale,o=s.minScale,l=s.zoomAnimation,c=s.disablePadding,u=l.size,h=l.disabled;if(!t||i===null||!e)throw new Error("Pinch touches distance was not provided");if(e<0)return n.transformState.scale;var d=e/i,f=d*t;return bm(xi(f,2),o,r,u,!h&&!c)},ZF=160,JF=100,eI=function(n,e){var t=n.props,i=t.onWheelStart,s=t.onZoomStart;n.wheelStopEventTimer||(Yi(n),ze(Ne(n),e,i),ze(Ne(n),e,s))},tI=function(n,e){var t=n.props,i=t.onWheel,s=t.onZoom,r=n.contentComponent,o=n.setup,l=n.transformState,c=l.scale,u=o.limitToBounds,h=o.centerZoomedOut,d=o.zoomAnimation,f=o.wheel,m=o.disablePadding,y=o.smooth,w=d.size,x=d.disabled,v=f.step,b=f.smoothStep;if(!r)throw new Error("Component not mounted");e.preventDefault(),e.stopPropagation();var A=WF(e,null),E=y?b*Math.abs(e.deltaY):v,_=XF(n,A,E,!e.ctrlKey);if(c!==_){var k=Jl(n,_),T=R2(e,r,c),P=x||w===0||h||m,N=u&&P,R=zw(n,T.x,T.y,_,k,N),L=R.x,O=R.y;n.previousWheelEvent=e,n.setTransformState(_,L,O),ze(Ne(n),e,i),ze(Ne(n),e,s)}},nI=function(n,e){var t=n.props,i=t.onWheelStop,s=t.onZoomStop;aA(n.wheelAnimationTimer),n.wheelAnimationTimer=setTimeout(function(){n.mounted&&(E2(n,e.x,e.y),n.wheelAnimationTimer=null)},JF);var r=GF(n,e);r&&(aA(n.wheelStopEventTimer),n.wheelStopEventTimer=setTimeout(function(){n.mounted&&(n.wheelStopEventTimer=null,ze(Ne(n),e,i),ze(Ne(n),e,s))},ZF))},L2=function(n){for(var e=0,t=0,i=0;i<2;i+=1)e+=n.touches[i].clientX,t+=n.touches[i].clientY;var s=e/2,r=t/2;return{x:s,y:r}},iI=function(n,e){var t=N2(e);n.pinchStartDistance=t,n.lastDistance=t,n.pinchStartScale=n.transformState.scale,n.isPanning=!1;var i=L2(e);n.pinchLastCenterX=i.x,n.pinchLastCenterY=i.y,Yi(n)},sI=function(n,e){var t=n.contentComponent,i=n.pinchStartDistance,s=n.wrapperComponent,r=n.transformState.scale,o=n.setup,l=o.limitToBounds,c=o.centerZoomedOut,u=o.zoomAnimation,h=o.alignmentAnimation,d=u.disabled,f=u.size;if(!(i===null||!t)){var m=KF(e,r,t);if(!(!Number.isFinite(m.x)||!Number.isFinite(m.y))){var y=N2(e),w=QF(n,y),x=L2(e),v=x.x-(n.pinchLastCenterX||0),b=x.y-(n.pinchLastCenterY||0);if(!(w===r&&v===0&&b===0)){n.pinchLastCenterX=x.x,n.pinchLastCenterY=x.y;var A=Jl(n,w),E=d||f===0||c,_=l&&E,k=zw(n,m.x,m.y,w,A,_),T=k.x,P=k.y;n.pinchMidpoint=m,n.lastDistance=y;var N=h.sizeX,R=h.sizeY,L=ra(n,N),O=ra(n,R),$=T+v,U=P+b,Q=wm($,U,A,l,L,O,s),j=Q.x,B=Q.y;n.setTransformState(w,j,B)}}}},rI=function(n){var e=n.pinchMidpoint;n.velocity=null,n.lastDistance=null,n.pinchMidpoint=null,n.pinchStartScale=null,n.pinchStartDistance=null,E2(n,e==null?void 0:e.x,e==null?void 0:e.y)},D2=function(n,e){var t=n.props.onZoomStop,i=n.setup.doubleClick.animationTime;aA(n.doubleClickStopEventTimer),n.doubleClickStopEventTimer=setTimeout(function(){n.doubleClickStopEventTimer=null,ze(Ne(n),e,t)},i)},oI=function(n,e){var t=n.props,i=t.onZoomStart,s=t.onZoom,r=n.setup.doubleClick,o=r.animationTime,l=r.animationType;ze(Ne(n),e,i),T2(n,o,l,function(){return ze(Ne(n),e,s)}),D2(n,e)};function aI(n,e){return n==="toggle"?e===1?1:-1:n==="zoomOut"?-1:1}function lI(n,e){var t=n.setup,i=n.doubleClickStopEventTimer,s=n.transformState,r=n.contentComponent,o=s.scale,l=n.props,c=l.onZoomStart,u=l.onZoom,h=t.doubleClick,d=h.disabled,f=h.mode,m=h.step,y=h.animationTime,w=h.animationType;if(!d&&!i){if(f==="reset")return oI(n,e);if(!r)return console.error("No ContentComponent found");var x=aI(f,n.transformState.scale),v=_2(n,x,m);if(o!==v){ze(Ne(n),e,c);var b=R2(e,r,o),A=Ax(n,v,b.x,b.y);if(!A)return console.error("Error during zoom event. New transformation state was not calculated.");ze(Ne(n),e,u),ca(n,A,y,w),D2(n,e)}}}var cI=function(n,e){var t=n.isInitialized,i=n.setup,s=n.wrapperComponent,r=i.doubleClick,o=r.disabled,l=r.excluded,c=e.target,u=s==null?void 0:s.contains(c),h=t&&c&&u&&!o;if(!h)return!1;var d=Uw(c,l);return!d},uI=function(){function n(e){var t=this;this.mounted=!0,this.pinchLastCenterX=null,this.pinchLastCenterY=null,this.onChangeCallbacks=new Set,this.onInitCallbacks=new Set,this.wrapperComponent=null,this.contentComponent=null,this.isInitialized=!1,this.bounds=null,this.previousWheelEvent=null,this.wheelStopEventTimer=null,this.wheelAnimationTimer=null,this.isPanning=!1,this.isWheelPanning=!1,this.startCoords=null,this.lastTouch=null,this.distance=null,this.lastDistance=null,this.pinchStartDistance=null,this.pinchStartScale=null,this.pinchMidpoint=null,this.doubleClickStopEventTimer=null,this.velocity=null,this.velocityTime=null,this.lastMousePosition=null,this.animate=!1,this.animation=null,this.maxBounds=null,this.pressedKeys={},this.mount=function(){t.initializeWindowEvents()},this.unmount=function(){t.cleanupWindowEvents()},this.update=function(i){t.props=i,Jl(t,t.transformState.scale),t.setup=PC(i)},this.initializeWindowEvents=function(){var i,s,r=Bb(),o=(i=t.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,l=o==null?void 0:o.defaultView;(s=t.wrapperComponent)===null||s===void 0||s.addEventListener("wheel",t.onWheelPanning,r),l==null||l.addEventListener("mousedown",t.onPanningStart,r),l==null||l.addEventListener("mousemove",t.onPanning,r),l==null||l.addEventListener("mouseup",t.onPanningStop,r),o==null||o.addEventListener("mouseleave",t.clearPanning,r),l==null||l.addEventListener("keyup",t.setKeyUnPressed,r),l==null||l.addEventListener("keydown",t.setKeyPressed,r)},this.cleanupWindowEvents=function(){var i,s,r=Bb(),o=(i=t.wrapperComponent)===null||i===void 0?void 0:i.ownerDocument,l=o==null?void 0:o.defaultView;l==null||l.removeEventListener("mousedown",t.onPanningStart,r),l==null||l.removeEventListener("mousemove",t.onPanning,r),l==null||l.removeEventListener("mouseup",t.onPanningStop,r),o==null||o.removeEventListener("mouseleave",t.clearPanning,r),l==null||l.removeEventListener("keyup",t.setKeyUnPressed,r),l==null||l.removeEventListener("keydown",t.setKeyPressed,r),document.removeEventListener("mouseleave",t.clearPanning,r),Yi(t),(s=t.observer)===null||s===void 0||s.disconnect()},this.handleInitializeWrapperEvents=function(i){var s=Bb();i.addEventListener("wheel",t.onWheelZoom,s),i.addEventListener("dblclick",t.onDoubleClick,s),i.addEventListener("touchstart",t.onTouchPanningStart,s),i.addEventListener("touchmove",t.onTouchPanning,s),i.addEventListener("touchend",t.onTouchPanningStop,s)},this.handleInitialize=function(i,s){var r=!1,o=t.setup.centerOnInit,l=function(c,u){for(var h=0,d=c;h<d.length;h++){var f=d[h];if(f.target===u)return!0}return!1};t.applyTransformation(),t.onInitCallbacks.forEach(function(c){c(Ne(t))}),t.observer=new ResizeObserver(function(c){if(l(c,i)||l(c,s))if(o&&!r){var u=s.offsetWidth,h=s.offsetHeight;(u>0||h>0)&&(r=!0,t.setCenter())}else Yi(t),Jl(t,t.transformState.scale),Sx(t,0)}),t.observer.observe(i),t.observer.observe(s)},this.onWheelZoom=function(i){var s=t.setup.disabled;if(!s){var r=$F(t,i);if(r){var o=t.isPressingKeys(t.setup.wheel.activationKeys);o&&(eI(t,i),tI(t,i),nI(t,i))}}},this.onWheelPanning=function(i){var s=t.setup,r=s.disabled,o=s.wheel,l=s.panning;if(!(!t.wrapperComponent||!t.contentComponent||r||!o.wheelDisabled||l.disabled||!l.wheelPanning||i.ctrlKey)){i.preventDefault(),i.stopPropagation();var c=t.transformState,u=c.positionX,h=c.positionY,d=u-i.deltaX,f=h-i.deltaY,m=l.lockAxisX?u:d,y=l.lockAxisY?h:f,w=t.setup.alignmentAnimation,x=w.sizeX,v=w.sizeY,b=ra(t,x),A=ra(t,v);m===u&&y===h||x2(t,m,y,b,A)}},this.onPanningStart=function(i){var s=t.setup.disabled,r=t.props.onPanningStart;if(!s){var o=xC(t,i);if(o){var l=t.isPressingKeys(t.setup.panning.activationKeys);l&&(i.button===0&&!t.setup.panning.allowLeftClickPan||i.button===1&&!t.setup.panning.allowMiddleClickPan||i.button===2&&!t.setup.panning.allowRightClickPan||(i.preventDefault(),i.stopPropagation(),Yi(t),_C(t,i),ze(Ne(t),i,r)))}}},this.onPanning=function(i){var s=t.setup.disabled,r=t.props.onPanning;if(!s){var o=EC(t);if(o){var l=t.isPressingKeys(t.setup.panning.activationKeys);l&&(i.preventDefault(),i.stopPropagation(),kC(t,i.clientX,i.clientY),ze(Ne(t),i,r))}}},this.onPanningStop=function(i){var s=t.props.onPanningStop;t.isPanning&&(NF(t),ze(Ne(t),i,s))},this.onPinchStart=function(i){var s=t.setup.disabled,r=t.props,o=r.onPinchingStart,l=r.onZoomStart;if(!s){var c=YF(t,i);c&&(iI(t,i),Yi(t),ze(Ne(t),i,o),ze(Ne(t),i,l))}},this.onPinch=function(i){var s=t.setup.disabled,r=t.props,o=r.onPinching,l=r.onZoom;if(!s){var c=qF(t);c&&(i.preventDefault(),i.stopPropagation(),sI(t,i),ze(Ne(t),i,o),ze(Ne(t),i,l))}},this.onPinchStop=function(i){var s=t.props,r=s.onPinchingStop,o=s.onZoomStop;t.pinchStartScale&&(rI(t),ze(Ne(t),i,r),ze(Ne(t),i,o))},this.onTouchPanningStart=function(i){var s=t.setup.disabled,r=t.props.onPanningStart;if(!s){var o=xC(t,i);if(o){var l=t.lastTouch&&+new Date-t.lastTouch<200&&i.touches.length===1;if(!l){t.lastTouch=+new Date,Yi(t);var c=i.touches,u=c.length===1,h=c.length===2;u&&(Yi(t),_C(t,i),ze(Ne(t),i,r)),h&&t.onPinchStart(i)}}}},this.onTouchPanning=function(i){var s=t.setup.disabled,r=t.props.onPanning;if(t.isPanning&&i.touches.length===1){if(s)return;var o=EC(t);if(!o)return;i.preventDefault(),i.stopPropagation();var l=i.touches[0];kC(t,l.clientX,l.clientY),ze(Ne(t),i,r)}else i.touches.length>1&&t.onPinch(i)},this.onTouchPanningStop=function(i){t.onPanningStop(i),t.onPinchStop(i)},this.onDoubleClick=function(i){var s=t.setup.disabled;if(!s){var r=cI(t,i);r&&lI(t,i)}},this.clearPanning=function(i){t.isPanning&&t.onPanningStop(i)},this.setKeyPressed=function(i){t.pressedKeys[i.key]=!0},this.setKeyUnPressed=function(i){t.pressedKeys[i.key]=!1},this.isPressingKeys=function(i){return i.length?!!i.find(function(s){return t.pressedKeys[s]}):!0},this.setTransformState=function(i,s,r){var o=t.props.onTransformed;if(!Number.isNaN(i)&&!Number.isNaN(s)&&!Number.isNaN(r)){i!==t.transformState.scale&&(t.transformState.previousScale=t.transformState.scale,t.transformState.scale=i),t.transformState.positionX=s,t.transformState.positionY=r,t.applyTransformation();var l=Ne(t);t.onChangeCallbacks.forEach(function(c){return c(l)}),ze(l,{scale:i,positionX:s,positionY:r},o)}else console.error("Detected NaN set state values")},this.setCenter=function(){if(t.wrapperComponent&&t.contentComponent){var i=P2(t.transformState.scale,t.wrapperComponent,t.contentComponent);t.setTransformState(i.scale,i.positionX,i.positionY)}},this.handleTransformStyles=function(i,s,r){return t.props.customTransform?t.props.customTransform(i,s,r):UF(i,s,r)},this.applyTransformation=function(){if(!(!t.mounted||!t.contentComponent)){var i=t.transformState,s=i.scale,r=i.positionX,o=i.positionY,l=t.handleTransformStyles(r,o,s);t.contentComponent.style.transform=l}},this.getContext=function(){return Ne(t)},this.onChange=function(i){return t.onChangeCallbacks.has(i)||t.onChangeCallbacks.add(i),function(){t.onChangeCallbacks.delete(i)}},this.onInit=function(i){return t.onInitCallbacks.has(i)||t.onInitCallbacks.add(i),function(){t.onInitCallbacks.delete(i)}},this.init=function(i,s){t.cleanupWindowEvents(),t.wrapperComponent=i,t.contentComponent=s,Jl(t,t.transformState.scale),t.handleInitializeWrapperEvents(i),t.handleInitialize(i,s),t.initializeWindowEvents(),t.isInitialized=!0;var r=Ne(t);ze(r,void 0,t.props.onInit)},this.props=e,this.setup=PC(this.props),this.transformState=C2(this.props)}return n}(),xx=Tr.createContext(null),hI=function(n,e){return typeof n=="function"?n(e):n},dI=Tr.forwardRef(function(n,e){var t=M.useRef(new uI(n)).current,i=hI(n.children,oA(t));return M.useImperativeHandle(e,function(){return oA(t)},[t]),M.useEffect(function(){t.update(n)},[t,n]),Tr.createElement(xx.Provider,{value:t},i)});Tr.forwardRef(function(n,e){var t=M.useRef(null),i=M.useContext(xx);return M.useEffect(function(){return i.onChange(function(s){if(t.current){var r=0,o=0;t.current.style.transform=i.handleTransformStyles(r,o,1/s.instance.transformState.scale)}})},[i]),Tr.createElement("div",ea({},n,{ref:HF([t,e])}))});function fI(n,e){e===void 0&&(e={});var t=e.insertAt;if(!(!n||typeof document>"u")){var i=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",t==="top"&&i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s),s.styleSheet?s.styleSheet.cssText=n:s.appendChild(document.createTextNode(n))}}var pI=`.transform-component-module_wrapper__SPB86 {
  position: relative;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  overflow: hidden;
  -webkit-touch-callout: none; /* iOS Safari */
  -webkit-user-select: none; /* Safari */
  -khtml-user-select: none; /* Konqueror HTML */
  -moz-user-select: none; /* Firefox */
  -ms-user-select: none; /* Internet Explorer/Edge */
  user-select: none;
  margin: 0;
  padding: 0;
  transform: translate3d(0, 0, 0);
}
.transform-component-module_content__FBWxo {
  display: flex;
  flex-wrap: wrap;
  width: -moz-fit-content;
  width: fit-content;
  height: -moz-fit-content;
  height: fit-content;
  margin: 0;
  padding: 0;
  transform-origin: 0% 0%;
}
.transform-component-module_content__FBWxo img {
  pointer-events: none;
}
`,RC={wrapper:"transform-component-module_wrapper__SPB86",content:"transform-component-module_content__FBWxo"};fI(pI);var gI=function(n){var e=n.children,t=n.wrapperClass,i=t===void 0?"":t,s=n.contentClass,r=s===void 0?"":s,o=n.wrapperStyle,l=n.contentStyle,c=n.wrapperProps,u=c===void 0?{}:c,h=n.contentProps,d=h===void 0?{}:h,f=M.useContext(xx),m=f.init,y=f.cleanupWindowEvents,w=M.useRef(null),x=M.useRef(null);return M.useEffect(function(){var v=w.current,b=x.current;return v!==null&&b!==null&&m&&(m==null||m(v,b)),function(){y==null||y()}},[]),Tr.createElement("div",ea({},u,{ref:w,className:"".concat(rA.wrapperClass," ").concat(RC.wrapper," ").concat(i),style:o}),Tr.createElement("div",ea({},d,{ref:x,className:"".concat(rA.contentClass," ").concat(RC.content," ").concat(r),style:l}),e))};Si.workerSrc=`//unpkg.com/pdfjs-dist@${px}/build/pdf.worker.min.mjs`;const NC={CONOSCENZA:"Esplorazionepreliminare.",ROMANTICA:"Tensioneattrattiva evulnerabilitemotiva.",LAVORATIVA:"Collaborazioneformale, efficienzaprioritaria.",AMICALE:"Supportoreciproco, tempononstrutturato.",FAMILIARE:"Legamediappartenenza eobblighiimpliciti.",CONVIVENZA:"Condivisionedispaziriservati."},LC=["CONOSCENZA","ROMANTICA","LAVORATIVA","AMICALE","FAMILIARE","CONVIVENZA"],mI={"Camilla Costato":{instagram:"ca.lcutta",url:"https://www.instagram.com/ca.lcutta/"},"Francesco Zanchetta":{instagram:"zjncoo",url:"https://www.instagram.com/zjncoo/"},"Camilla Vicario":{instagram:"camiivicario",url:"https://www.instagram.com/camiivicario/"},"Davide Benetton":{instagram:"davidebenetton_",url:"https://www.instagram.com/davidebenetton_/"},"Sofia Splendore":{instagram:"sofia.splendore",url:"https://www.instagram.com/sofia.splendore/"}},lA=({gsr0:n,gsr1:e,compatibility:t})=>{const i=Tr.useRef(null);return M.useEffect(()=>{const s=i.current;if(!s)return;const r=s.getContext("2d"),o=s.width,l=s.height,c=(n+e)/2,u=t,h=1+Math.floor(c/1e3*12);let d=h+1;d===h&&(d+=1);const f=u/100*Math.PI;r.clearRect(0,0,o,l),r.beginPath(),r.strokeStyle="#000000",r.lineWidth=2;const m=o/2,y=l/2,w=Math.min(o,l)/2-10,x=1e3;for(let v=0;v<=x;v++){const b=v/x*2*Math.PI,A=m+w*Math.sin(h*b+f),E=y-w*Math.sin(d*b);v===0?r.moveTo(A,E):r.lineTo(A,E)}r.stroke()},[n,e,t]),C.jsx("canvas",{ref:i,width:256,height:256,className:"w-full h-full"})},vI=n=>{if(!n)return"";let e=parseInt(n);const t={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};let i="",s;for(s in t)for(;e>=t[s];)i+=s,e-=t[s];return i},M2=n=>{if(!n)return"";const e=["il","lo","la","i","gli","le","l","un","uno","una","di","a","da","in","con","su","per","tra","fra","del","dello","della","dei","degli","delle","al","allo","alla","ai","agli","alle","dal","dallo","dalla","dai","dagli","dalle","nel","nello","nella","nei","negli","nelle","sul","sullo","sulla","sui","sugli","sulle","e","o","ma","che","se","come","quando","non","pi","gi","mai","sempre","un'","quest'","quell'","all'","dall'","nell'","sull'"];let t=n;return e.forEach(i=>{const s=new RegExp(`\\b(${i})\\s+`,"gi");t=t.replace(s,"$1")}),t=t.replace(/\s+([.,;:!?])/g,"$1"),t=t.replace(/([.!?])\s+/g,`$1
`),t},yI=({contractData:n,partyA:e,partyB:t})=>C.jsxs("div",{id:"share-story-template",className:"absolute bg-white flex flex-col items-center justify-between p-16 font-bergen-mono text-black border-[20px] border-white",style:{width:"1080px",height:"1920px",zIndex:-9999,left:"-9999px",top:"-9999px",pointerEvents:"none"},children:[C.jsxs("div",{className:"w-full flex justify-between items-start pt-16 mb-2 px-4",children:[C.jsxs("div",{className:"text-left flex flex-col justify-center",children:[C.jsx("span",{className:"text-xl uppercase tracking-widest text-gray-400",children:"Verifica parte della macchina"}),C.jsx("span",{className:"text-4xl font-bold uppercase tracking-widest mt-2",children:"EyeDeal"})]}),C.jsx("img",{src:"/logo_alua.png",alt:"ALUA",className:"w-[460px] h-auto object-contain object-right flex-shrink-0"})]}),C.jsxs("div",{className:"flex-1 w-full flex flex-col items-start justify-start gap-4",children:[C.jsxs("div",{className:"w-full flex justify-between items-center px-4 border-b-[4px] border-black pb-12 mt-16",children:[C.jsxs("div",{className:"text-left w-1/2 pr-4",children:[C.jsx("span",{className:"block text-2xl uppercase tracking-widest text-gray-400 mb-2",children:"Contraente A"}),C.jsx("span",{className:"block text-5xl font-bold uppercase break-words leading-tight",children:e})]}),C.jsxs("div",{className:"text-right w-1/2 pl-4",children:[C.jsx("span",{className:"block text-2xl uppercase tracking-widest text-gray-400 mb-2",children:"Contraente B"}),C.jsx("span",{className:"block text-5xl font-bold uppercase break-words leading-tight",children:t})]})]}),C.jsxs("div",{className:"w-full flex justify-between items-end mt-8 px-4",children:[C.jsxs("div",{className:"flex flex-col items-start space-y-16",children:[C.jsxs("div",{children:[C.jsx("span",{className:"block text-3xl uppercase tracking-widest text-gray-500 mb-4",children:"Grado di Compatibilit"}),C.jsxs("span",{className:"block text-[150px] font-bergen-mono leading-none tracking-tighter",children:[n.compatibility,"%"]})]}),C.jsxs("div",{children:[C.jsx("span",{className:"block text-3xl uppercase tracking-widest text-gray-400 mb-4",children:"Fascia Rischio"}),C.jsx("span",{className:"block text-9xl font-bold text-black font-bergen-mono leading-none",children:vI(n.riskBand)})]})]}),C.jsx("div",{className:"w-[500px] h-[500px] relative border border-gray-100 rounded-full bg-white p-0 flex-shrink-0",children:C.jsx(lA,{gsr0:n.avgScl.a,gsr1:n.avgScl.b,compatibility:n.compatibility})})]}),n.phrase&&C.jsx("div",{className:"text-left px-4 w-full mt-auto mb-4",children:C.jsxs("span",{className:"font-bergen-mono text-[40px] uppercase font-bold leading-tight block text-black whitespace-pre-line",children:['"',M2(n.phrase),'"']})})]}),C.jsxs("div",{className:"w-full text-left border-t-[4px] border-black pt-8 mt-4 flex flex-col gap-4 px-4 pb-16",children:[C.jsx("span",{className:"text-3xl uppercase tracking-widest text-gray-400 font-medium whitespace-normal leading-relaxed",children:"Analisi generativa basata su parametri biometrici reali: Conduttanza Cutanea (GSR) e Capacit Elettrica."}),C.jsxs("span",{className:"text-3xl uppercase tracking-[0.2em] text-gray-300",children:["Protocollo Verificato  ",n.date]}),C.jsx("span",{className:"text-3xl uppercase tracking-[0.2em] text-gray-300 mt-2",children:" ALUA Systems 2025"})]})]}),DC=({member:n,onClose:e})=>n?C.jsx("div",{className:"fixed inset-0 z-[70] bg-black/80 flex items-center justify-center p-6 animate-in fade-in duration-300",children:C.jsxs("div",{className:"bg-white w-full max-w-sm p-8 border-2 border-black shadow-2xl relative flex flex-col items-center text-center font-bergen-mono",children:[C.jsx("button",{onClick:e,className:"absolute top-2 right-2 p-2 hover:bg-gray-100 transition-colors",children:C.jsx(kd,{size:24})}),C.jsx("div",{className:"w-24 h-24 bg-black rounded-full flex items-center justify-center mb-6",children:C.jsx(yL,{size:48,className:"text-white"})}),C.jsx("h3",{className:"text-xs uppercase tracking-widest text-gray-500 mb-2",children:"Membro del Team"}),C.jsx("h2",{className:"text-2xl font-bold uppercase mb-4 font-neue-haas",children:n.name}),C.jsx("div",{className:"w-full h-px bg-gray-200 my-4"}),C.jsxs("a",{href:n.data.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-xl font-bold hover:text-purple-600 transition-colors",children:[C.jsxs("span",{children:["@",n.data.instagram]}),C.jsx(vL,{size:20,className:"-rotate-45"})]})]})}):null,wI=()=>{const[n,e]=M.useState(!0),[t,i]=M.useState(!1),[s,r]=M.useState(!1),[o,l]=M.useState("LOGIN"),[c,u]=M.useState("MONITORING"),[h,d]=M.useState(!1),[f,m]=M.useState(!1),[y,w]=M.useState(!1),[x,v]=M.useState(!1),[b,A]=M.useState(!1),[E,_]=M.useState(!1),[k,T]=M.useState(!1),[P,N]=M.useState(null),[R,L]=M.useState(null),O=M.useRef(null),[$,U]=M.useState(new Date),[Q,j]=M.useState(!1),[B,D]=M.useState(!1),[z,Y]=M.useState(""),[Z,K]=M.useState(""),[H,fe]=M.useState({id:"UNK-00",date:"00.00.0000",machineId:"ALUA-M-V1",sessionToken:"---",compatibility:0,riskBand:1,cost:"0,00",weakLink:null,clausesText:"Dati non disponibili.",avgScl:{a:0,b:0},relTypes:[]}),[Me,Ee]=M.useState({}),[re,dn]=M.useState(!1),[Tt,rt]=M.useState(null);M.useEffect(()=>{const pe=setTimeout(()=>{i(!0),r(!0),setTimeout(()=>{e(!1)},300)},1e3);return()=>clearTimeout(pe)},[]),M.useEffect(()=>{const pe=setInterval(()=>U(new Date),1e3),ce=new URLSearchParams(window.location.search),fn={};for(const[si,Am]of ce.entries())fn[si]=Am;Ee(fn);const ki=ce.get("id")||"UNK-00",Ut=ce.get("date")||Sm,Ir=parseInt(ce.get("comp")||"50"),Ji=parseInt(ce.get("bad")||"-1"),ld=parseInt(ce.get("fascia")||"1"),F2=ce.get("cost")||"0,00",I2=ce.get("phrase")||"",O2=parseFloat(ce.get("avg0")||"0"),B2=parseFloat(ce.get("avg1")||"0"),Ww=(ce.get("types")||"").split(",").filter(si=>si);let Xw="Clausola Default: Relazione indefinita.",Gw=[];if(Ww.length>0)Gw=Ww,Xw=Ww.map(si=>NC[si]||si).join(" ");else{const si=(ce.get("btn0")||"").split(",").filter(cd=>cd).map(Number),Am=(ce.get("btn1")||"").split(",").filter(cd=>cd).map(Number);if(si.length>0||Am.length>0){const cd=si.map(Ms=>LC[Ms]).filter(Ms=>Ms),j2=Am.map(Ms=>LC[Ms]).filter(Ms=>Ms),Qw=Array.from(new Set([...cd,...j2]));Qw.length>0&&(Gw=Qw,Xw=Qw.map(Ms=>NC[Ms]||"").join(" "))}}fe({id:ki,date:Ut,machineId:ce.get("mid")||"ALUA-M-V1",sessionToken:Math.random().toString(36).substr(2,9).toUpperCase(),compatibility:Ir,riskBand:ld,cost:F2,weakLink:Ji,clausesText:Xw,phrase:I2,avgScl:{a:O2,b:B2},relTypes:Gw});const Yw=ce.get("partyA_name"),qw=ce.get("partyB_name"),Px=localStorage.getItem("alua_partyA"),Rx=localStorage.getItem("alua_partyB");ce.get("comp")||ce.get("contact")||dn(!0);const Kw=ce.get("contact");if(Kw){const si=mI[Kw];si&&(rt({name:Kw,data:si}),e(!1))}return Yw&&qw?(Y(Yw),K(qw),localStorage.setItem("alua_partyA",Yw),localStorage.setItem("alua_partyB",qw),l("DASHBOARD")):Px&&Rx&&(Y(Px),K(Rx),l("DASHBOARD")),()=>clearInterval(pe)},[]),M.useEffect(()=>(f||b?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width=""),()=>{document.body.style.overflow="",document.body.style.position="",document.body.style.width=""}),[f,b]),M.useEffect(()=>{if(b&&O.current){const pe=()=>{var fn;const ce=(fn=O.current)==null?void 0:fn.clientWidth;ce&&L(ce-32)};return pe(),window.addEventListener("resize",pe),()=>window.removeEventListener("resize",pe)}},[b]),M.useEffect(()=>{const pe=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0,ce=localStorage.getItem("alua_install_prompt_seen");if(!pe&&!ce){const fn=setTimeout(()=>j(!0),2e3);return()=>clearTimeout(fn)}},[]);const oe=()=>{B&&localStorage.setItem("alua_install_prompt_seen","true"),j(!1)},Pn=pe=>{pe.preventDefault(),z&&Z&&(localStorage.setItem("alua_partyA",z),localStorage.setItem("alua_partyB",Z),navigator.vibrate&&navigator.vibrate(50),l("DASHBOARD"))},ye=()=>{localStorage.removeItem("alua_partyA"),localStorage.removeItem("alua_partyB"),Y(""),K(""),l("LOGIN"),u("MONITORING")},we=()=>{d(!0),navigator.vibrate&&navigator.vibrate(200),setTimeout(()=>{u("REPORTED"),d(!1),navigator.vibrate&&navigator.vibrate([50,50,50])},800)},$e=()=>{u("MONITORING")},zt=()=>{w(!0),v(!1),setTimeout(()=>{m(!1),w(!1)},500)},ot=()=>{_(!0),T(!1),setTimeout(()=>{A(!1),_(!1)},500)},Hw=M.useCallback(({numPages:pe})=>{N(pe)},[]),$w=$.toLocaleTimeString("it-IT",{hour:"2-digit",minute:"2-digit"}),ua=new Date($);ua.setFullYear(ua.getFullYear()+2);const Sm=ua.toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit",year:"2-digit"}),Ds=()=>H.weakLink===0?"NOTA CRITICA: Instabilit rilevata in CONTRAENTE A.":H.weakLink===1?"NOTA CRITICA: Instabilit rilevata in CONTRAENTE B.":null,Vw=async()=>{try{window.navigator&&window.navigator.vibrate&&window.navigator.vibrate(50);const pe=document.getElementById("share-story-template");if(!pe)return;const ce=await window.html2canvas(pe,{scale:2,useCORS:!0,backgroundColor:"#ffffff",width:1080,height:1920,windowWidth:1080,windowHeight:1920,scrollX:0,scrollY:0,onclone:fn=>{const ki=fn.getElementById("share-story-template");ki&&(ki.style.display="flex",ki.style.visibility="visible",ki.style.left="0px",ki.style.top="0px")}});ce.toBlob(async fn=>{if(!fn)return;const ki=new File([fn],`ALUA_Story_${H.id}.png`,{type:"image/png"});if(navigator.share)try{await navigator.share({files:[ki],title:"ALUA Protocol",text:`Protocollo ${H.id} completato.`})}catch(Ut){console.log("Condivisione annullata o fallita",Ut)}else{const Ut=document.createElement("a");Ut.download=`ALUA_Story_${H.id}.png`,Ut.href=ce.toDataURL(),Ut.click()}},"image/png")}catch(pe){console.error("Errore generazione story:",pe),alert("Errore nella generazione dell'immagine.")}};return n?C.jsxs("div",{className:`fixed inset-0 z-[200] bg-white flex items-center justify-center ${t?"opacity-0":"opacity-100"}`,style:{transition:"opacity 300ms ease-out",height:"100dvh"},children:[C.jsx("img",{src:"/logo_alua.svg",alt:"ALUA",className:"h-16 md:h-20 w-auto"}),C.jsx("div",{className:"absolute bottom-8 w-full text-center font-bergen-mono",children:C.jsxs("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest flex items-center justify-center gap-1",children:[C.jsx("span",{className:"text-sm font-bold",children:""})," ALUA SYSTEMS"]})})]}):o==="LOGIN"?C.jsxs("div",{className:`min-h-[100dvh] w-full flex flex-col items-center justify-center bg-white p-8 font-bergen-mono text-black ${s?"opacity-100":"opacity-0"}`,style:{transition:"opacity 300ms ease-out"},children:[C.jsx("style",{children:`
            @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');
          `}),C.jsxs("div",{className:"w-full max-w-md space-y-12 animate-in fade-in duration-700 flex flex-col items-start",children:[C.jsx("div",{className:"mb-2 w-full border-b-2 border-black pb-4",children:C.jsx("a",{href:"https://zjncoo.github.io/ALUA.IT/",target:"_blank",rel:"noopener noreferrer",children:C.jsx("img",{src:"/logo_alua.svg",alt:"ALUA",className:"h-16 w-auto hover:opacity-70 transition-opacity"})})}),C.jsx("p",{className:"text-xs uppercase tracking-widest text-gray-500 text-left font-bergen-mono",children:"Protocollo Verifica Identit"}),C.jsxs("div",{className:"w-full border-2 border-gray-200 p-6 space-y-4 mt-8",children:[C.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 pb-2 mb-4",children:[C.jsx("span",{className:"text-xs uppercase tracking-widest font-bergen-mono text-gray-500",children:"Dati Polizza"}),C.jsx("div",{className:"w-2 h-2 bg-black"})]}),C.jsxs("div",{className:"grid grid-cols-2 gap-8 font-bergen-mono",children:[C.jsxs("div",{children:[C.jsx("span",{className:"block text-xs uppercase text-gray-500 mb-1",children:"PRATICA N."}),C.jsx("span",{className:"text-sm font-bold",children:H.id})]}),C.jsxs("div",{children:[C.jsx("span",{className:"block text-xs uppercase text-gray-500 mb-1",children:"% AFFINIT"}),C.jsxs("span",{className:"text-sm font-bold",children:[H.compatibility,"%"]})]})]})]}),C.jsxs("form",{onSubmit:Pn,className:"space-y-8 w-full font-bergen-mono",children:[C.jsxs("div",{className:"space-y-6",children:[C.jsxs("div",{className:"relative group",children:[C.jsx("label",{className:"text-xs uppercase font-bold tracking-widest mb-2 block text-black",children:"Contraente A"}),C.jsx("input",{type:"text",value:z,onChange:pe=>Y(pe.target.value.toUpperCase()),placeholder:"INSERISCI NOME...",className:"w-full bg-transparent border-2 border-black p-4 text-lg focus:outline-none focus:bg-gray-50 transition-colors uppercase placeholder:text-gray-400",required:!0})]}),C.jsxs("div",{className:"relative group",children:[C.jsx("label",{className:"text-xs uppercase font-bold tracking-widest mb-2 block text-black",children:"Contraente B"}),C.jsx("input",{type:"text",value:Z,onChange:pe=>K(pe.target.value.toUpperCase()),placeholder:"INSERISCI NOME...",className:"w-full bg-transparent border-2 border-black p-4 text-lg focus:outline-none focus:bg-gray-50 transition-colors uppercase placeholder:text-gray-400",required:!0})]})]}),C.jsxs("button",{type:"submit",className:"w-full bg-black text-white py-6 mt-12 flex items-center justify-between px-6 hover:bg-gray-900 transition-all active:scale-[0.99] border-2 border-black",children:[C.jsx("span",{className:"text-sm font-bold tracking-widest uppercase font-neue-haas",children:"Inizializza Sessione"}),C.jsx("span",{className:"text-xl",children:""})]})]}),C.jsxs("div",{className:"w-full text-center pt-8 border-t-2 border-green-500/0",children:[" ",C.jsxs("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest flex items-center justify-center gap-1",children:[C.jsx("span",{className:"text-sm font-bold",children:""})," 2025 ALUA SYSTEMS"]}),C.jsx("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/deed.it",target:"_blank",rel:"noopener noreferrer",className:"text-[9px] text-gray-400 hover:text-black transition-colors underline",children:"CC BY-NC-ND (Attribuzione - Non Commerciale - Non Opere Derivate)"})]})]}),Q&&C.jsx("div",{className:"fixed bottom-0 left-0 w-full z-[100] px-4 pb-6 pt-2 animate-in slide-in-from-bottom duration-500",children:C.jsxs("div",{className:"bg-white border-2 border-black p-6 shadow-2xl flex flex-col gap-4 relative",children:[C.jsx("button",{onClick:oe,className:"absolute top-2 right-2 p-2 hover:bg-gray-100 rounded-full",children:C.jsx(kd,{size:20})}),C.jsxs("div",{className:"flex items-center gap-4 border-b border-gray-100 pb-4",children:[C.jsx("div",{className:"w-12 h-12 bg-black flex items-center justify-center text-white",children:C.jsx("img",{src:"/logo_alua.svg",alt:"App Icon",className:"w-8 h-8 invert"})}),C.jsxs("div",{children:[C.jsxs("h3",{className:"font-bold text-sm uppercase tracking-widest font-neue-haas leading-tight",children:["Installa",C.jsx("br",{}),C.jsx("span",{className:"text-base",children:"ALUA Systems"})]}),C.jsx("p",{className:"text-xs text-gray-500 font-bergen-mono mt-1",children:"Per la migliore esperienza"})]})]}),C.jsxs("div",{className:"space-y-3 text-xs font-bergen-mono uppercase tracking-wide text-gray-600",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("span",{className:"font-bold text-black",children:"1."}),C.jsxs("span",{children:["Tocca l'icona ",C.jsx(kb,{size:14,className:"inline mx-1 align-text-bottom"})," nella barra in basso"]})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("span",{className:"font-bold text-black",children:"2."}),C.jsxs("span",{children:["Scorri e seleziona ",C.jsx("span",{className:"font-bold text-black border-b border-black",children:"Aggiungi alla Home"})]})]})]}),C.jsxs("div",{className:"flex items-center gap-2 mt-2 cursor-pointer",onClick:()=>D(!B),children:[C.jsx("div",{className:`w-4 h-4 border border-black flex items-center justify-center ${B?"bg-black":"bg-white"}`,children:B&&C.jsx(Cb,{size:10,className:"text-white"})}),C.jsx("span",{className:"text-[10px] uppercase font-bergen-mono text-gray-500 select-none",children:"Non mostrare pi questo messaggio"})]}),C.jsx("button",{onClick:oe,className:"w-full bg-black text-white py-3 mt-0 text-xs uppercase tracking-widest font-bold font-neue-haas hover:bg-gray-900",children:"Ho Capito"})]})}),Tt&&C.jsx(DC,{member:Tt,onClose:()=>{rt(null);const pe=window.location.pathname;window.history.replaceState({},"",pe)}})]}):C.jsxs("div",{className:`min-h-[100dvh] w-full flex flex-col bg-white font-bergen-mono text-black overflow-hidden relative ${s?"opacity-100":"opacity-0"}`,style:{transition:"opacity 300ms ease-out"},children:[C.jsxs("header",{className:"px-8 py-8 flex justify-between items-start bg-white border-b-2 border-black z-20 sticky top-0",children:[C.jsxs("div",{className:"flex flex-col items-start font-bergen-mono",children:[C.jsx("span",{className:"text-xs block",children:Sm}),C.jsx("span",{className:"text-xs text-gray-400 block",children:$w}),C.jsx("div",{className:"flex items-center space-x-3 mt-2",children:C.jsx("div",{className:`w-3 h-3 rounded-full ${c==="MONITORING"?"animate-pulse-slow":""}`,style:{backgroundColor:c==="MONITORING"?"#342152":"#ef4444"}})})]}),C.jsx("a",{href:"https://zjncoo.github.io/ALUA.IT/",target:"_blank",rel:"noopener noreferrer",children:C.jsx("img",{src:"/logo_alua.svg",alt:"ALUA",className:"h-10 w-auto hover:opacity-70 transition-opacity"})})]}),C.jsxs("main",{className:"flex-1 flex flex-col relative z-10 overflow-y-auto p-8",children:[H.phrase&&C.jsxs("div",{className:"flex flex-col items-start justify-start gap-4 mb-8 w-full animate-in fade-in slide-in-from-top-4 duration-700",children:[C.jsx("div",{className:"w-48 h-48 relative",children:C.jsx(lA,{gsr0:H.avgScl.a,gsr1:H.avgScl.b,compatibility:H.compatibility})}),C.jsx("div",{className:"text-left max-w-lg",children:C.jsx("span",{className:"font-bergen-mono text-[16pt] font-bold uppercase leading-tight block text-black whitespace-pre-line",children:M2(H.phrase)})})]}),C.jsxs("div",{className:"border-2 border-black p-8 mb-8 space-y-8 bg-white",children:[C.jsxs("div",{className:"flex justify-between items-start border-b border-gray-200 pb-6",children:[C.jsxs("div",{children:[C.jsx("span",{className:"text-xs uppercase tracking-widest text-gray-500 block mb-2 font-bergen-mono",children:"Rif. Contratto"}),C.jsx("span",{className:"font-bergen-mono text-lg tracking-wider font-bold",children:H.id})]}),C.jsx("button",{onClick:Vw,className:"text-black hover:opacity-70 transition-opacity",children:C.jsx(kb,{size:24,strokeWidth:1.5})})]}),C.jsxs("button",{onClick:()=>{m(!0),requestAnimationFrame(()=>{v(!0)})},className:"bg-white hover:bg-gray-50 transition-colors py-3 text-xs uppercase tracking-widest border-b border-black font-bergen-mono flex items-center gap-2",children:[C.jsx(_b,{size:16}),"Contratto Digitale"]}),C.jsxs("div",{className:"grid grid-cols-2 gap-8 font-bergen-mono",children:[C.jsx("div",{children:C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-xs uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-2",children:"Contraente A"}),C.jsx("span",{className:"text-xl font-bold uppercase",children:z})]})}),C.jsx("div",{children:C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-xs uppercase tracking-widest text-gray-500 mb-2 flex items-center gap-2",children:"Contraente B"}),C.jsx("span",{className:"text-xl font-bold uppercase",children:Z})]})})]}),Ds()&&C.jsxs("div",{className:"w-full bg-gray-100 border-2 border-black p-4 mb-6 flex items-center justify-center gap-3",children:[C.jsx(zE,{size:16,className:"text-black"}),C.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-black",children:Ds()})]}),C.jsxs("div",{className:"pt-6 border-t border-gray-100 flex items-end justify-between",children:[C.jsxs("div",{children:[C.jsx("span",{className:"text-xs uppercase tracking-widest text-gray-400 block pb-2",children:"AFFINIT INTERPERSONALE"}),C.jsxs("span",{className:"text-6xl font-bold font-bergen-mono",children:[H.compatibility,"%"]})]}),C.jsxs("div",{className:"text-right",children:[C.jsx("span",{className:"text-[10px] uppercase tracking-widest text-gray-400 block pb-1",children:"FASCIA DI RISCHIO"}),C.jsx("span",{className:"text-2xl font-bold",children:H.riskBand})]})]})]}),C.jsxs("div",{className:`flex-1 flex flex-col items-center justify-center py-12 transition-colors duration-700 ${c==="REPORTED"?"bg-gray-50":""} border-2 border-black`,children:[C.jsx("div",{className:"mb-12 text-center px-8 h-24 flex items-center justify-center w-full",children:c==="MONITORING"?C.jsxs("div",{className:"text-sm uppercase tracking-[0.15em] text-gray-500 leading-loose font-bergen-mono",children:["Premi per segnalare",C.jsx("br",{}),C.jsx("span",{className:"text-black font-bold font-neue-haas",children:"violazione contrattuale"})]}):C.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-500 bg-white border-2 border-black p-4 w-full max-w-md shadow-lg mb-8",children:C.jsxs("div",{className:"flex items-center gap-3 text-black",children:[C.jsx(Cb,{size:16}),C.jsx("span",{className:"text-sm font-bold uppercase tracking-widest font-neue-haas",children:"Segnalazione Registrata"})]})})}),C.jsxs("div",{className:"relative group w-64 h-64 flex items-center justify-center",children:[C.jsx("div",{className:"absolute -inset-4 border border-black rounded-full pointer-events-none"}),C.jsxs("button",{onClick:we,disabled:c==="REPORTED",className:`
                  w-full h-full rounded-full transition-all duration-200 ease-out outline-none
                  flex flex-col items-center justify-center relative overflow-hidden
                  ${c==="REPORTED"?"cursor-not-allowed":"cursor-pointer active:scale-[0.95] hover:shadow-xl"}
                  border-4 border-white/20 shadow-lg
                `,style:{background:c==="MONITORING"?"#C3000C":"#f3f4f6",color:c==="MONITORING"?"white":"#9ca3af"},children:[c==="MONITORING"&&C.jsx("img",{src:"/logo_alua.svg",alt:"ALUA",className:"w-32 h-auto opacity-100",style:{filter:"brightness(0) invert(1)"}}),c==="REPORTED"&&C.jsx("span",{className:"font-neue-haas text-lg tracking-[0.1em] font-bold",children:"SEGNALATO"})]})]}),c==="REPORTED"&&C.jsx("button",{onClick:$e,className:"mt-8 px-6 py-3 border-2 border-black bg-white text-black hover:bg-black hover:text-white transition-all text-xs uppercase tracking-widest font-bold font-neue-haas animate-in fade-in slide-in-from-bottom-4 duration-500",children:"Invia Nuova Segnalazione"})]})]}),C.jsxs("footer",{className:"px-8 py-6 border-t-2 border-black bg-white text-black flex flex-col font-bergen-mono z-20",children:[C.jsx("div",{className:"w-full flex flex-col items-center gap-4 mb-6",children:C.jsx("button",{onClick:ye,className:"text-xs uppercase tracking-widest text-gray-400 hover:text-red-600 transition-colors cursor-pointer border-b border-gray-300 hover:border-red-600 pb-1",children:"Reset Sessione"})}),C.jsxs("div",{className:"w-[calc(100%+4rem)] -mx-8 text-center py-4 border-t-2 border-black px-8",children:[C.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest mb-1",children:"Certificato Digitalmente da ALUA Systems"}),C.jsxs("p",{className:"text-[10px] text-gray-300 font-mono",children:["ID: ",H.id,"  Stipulato il ",H.date]})]}),C.jsxs("div",{className:"w-[calc(100%+4rem)] -mx-8 py-4 border-t-2 border-black text-[9px] leading-relaxed text-gray-400 normal-case text-left font-sans px-8",children:[C.jsx("p",{className:"font-bold text-black mb-2",children:"Alua S.p.A."}),C.jsxs("p",{className:"leading-tight",children:["Sede Legale: Via Cordusio 7, 20123 Milano - assicurazioni@pec.alua.it - tel +39 045 8172117 - fax +39 045 8172630",C.jsx("br",{}),"Capitale sociale i.v. Euro 69.000.000,00 - Registro delle Imprese di Milano, CF 01947090273 - P.IVA 03740811205 - R.E.A. 207330 - Societ autorizzata all'esercizio delle assicurazioni con D.M. 05/02/27 N.18331, G.U. 05/02/2027 - Societ iscritta all'Albo imprese di Assicurazione e riassicurazione Sez. I al n.1.00082, soggetta all'attivit di direzione e coordinamento di Alua S.p.A. e facente parte del Gruppo Assicurativo iscritto all'Albo delle societ capogruppo al n.046 - www.alua.it"]})]}),C.jsxs("div",{className:"w-[calc(100%+4rem)] -mx-8 text-center pb-4 px-8",children:[C.jsxs("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest flex items-center justify-center gap-1",children:[C.jsx("span",{className:"text-sm font-bold",children:""})," 2025 ALUA SYSTEMS"]}),C.jsx("a",{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/deed.it",target:"_blank",rel:"noopener noreferrer",className:"text-[9px] text-gray-400 hover:text-black transition-colors underline",children:"CC BY-NC-ND (Attribuzione - Non Commerciale - Non Opere Derivate)"})]})]}),f&&C.jsxs("div",{className:`fixed inset-0 z-50 bg-white flex flex-col font-bergen-mono overflow-hidden ${y?"translate-y-full":x?"translate-y-0":"translate-y-full"}`,style:{transition:"transform 500ms cubic-bezier(0.4, 0, 0.2, 1)"},children:[C.jsxs("div",{className:"z-10 p-6 border-b-2 border-black flex justify-between items-center bg-white shadow-sm",children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-[10px] uppercase tracking-widest text-gray-500",children:"Contratto Digitale"}),C.jsxs("span",{className:"text-xl font-bold tracking-tight font-neue-haas",children:["CONTRATTO ",H.id]})]}),C.jsx("button",{onClick:zt,className:"w-12 h-12 flex items-center justify-center hover:bg-gray-100 transition-colors",children:C.jsx(kd,{size:20})})]}),C.jsxs("div",{className:"flex-1 overflow-y-auto p-8 pb-12 space-y-12 bg-white",style:{WebkitOverflowScrolling:"touch"},children:[C.jsxs("button",{onClick:()=>{A(!0),requestAnimationFrame(()=>{T(!0)})},className:"w-full bg-white text-black py-4 flex items-center justify-center gap-3 px-6 hover:bg-black hover:text-white transition-all border-2 border-black group cursor-pointer",children:[C.jsx(_b,{size:18}),C.jsx("span",{className:"text-sm font-bold tracking-widest uppercase font-neue-haas group-hover:underline decoration-white underline-offset-4",children:"VISUALIZZA CONTRATTO COMPLETO"})]}),Ds()&&C.jsxs("div",{className:"w-full bg-gray-100 border-2 border-black p-4 mb-0 flex items-center justify-center gap-3",children:[C.jsx(zE,{size:16,className:"text-black"}),C.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-black",children:Ds()})]}),C.jsxs("div",{className:"grid grid-cols-2 border-2 border-black bg-white",children:[C.jsxs("div",{className:"py-6 px-4 flex flex-col items-center justify-center border-r-2 border-black",children:[C.jsx("span",{className:"text-[10px] uppercase tracking-widest text-gray-500 block mb-2",children:"Fascia di Rischio"}),C.jsx("span",{className:"text-4xl font-bold font-bergen-mono",children:H.riskBand})]}),C.jsxs("div",{className:"py-6 px-4 flex flex-col items-center justify-center",children:[C.jsx("span",{className:"text-[10px] uppercase tracking-widest text-gray-500 block mb-2",children:"Premio Annuo"}),C.jsx("span",{className:"text-4xl font-bold font-bergen-mono",children:H.cost})]})]}),C.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4",children:[C.jsxs("div",{className:"flex items-center gap-2 mb-2 w-full",children:[C.jsx("div",{className:"w-2 h-2 bg-black"}),C.jsx("span",{className:"text-sm font-bold uppercase tracking-widest font-neue-haas",children:"Risonanza Emotiva (Lissajous)"})]}),C.jsx("div",{className:"w-48 h-48 relative bg-white",children:C.jsx(lA,{gsr0:H.avgScl.a,gsr1:H.avgScl.b,compatibility:H.compatibility})}),C.jsx("p",{className:"text-[10px] uppercase tracking-widest text-gray-400 text-center max-w-xs",children:"Visualizzazione generativa basata sui valori SCL medi e sulla compatibilit rilevata."})]}),C.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[C.jsx("div",{className:"w-2 h-2 bg-black"}),C.jsx("span",{className:"text-sm font-bold uppercase tracking-widest font-neue-haas",children:"Clausole Concordate"})]}),H.relTypes&&H.relTypes.length>0&&C.jsx("div",{className:"flex flex-wrap gap-2 mb-3 px-6",children:H.relTypes.map((pe,ce)=>C.jsx("span",{className:"bg-black text-white text-[10px] font-bold uppercase px-2 py-1 tracking-widest",children:pe},ce))}),C.jsxs("div",{className:"pt-12 mt-8 text-center border-t-2 border-black",children:[C.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest mb-1",children:"Certificato Digitalmente da ALUA Systems"}),C.jsxs("p",{className:"text-[10px] text-gray-300 font-mono",children:["ID: ",H.id,"  Stipulato il ",H.date]})]})]})]}),b&&C.jsxs("div",{className:`fixed inset-0 z-50 bg-white flex flex-col font-bergen-mono overflow-hidden ${E?"translate-y-full":k?"translate-y-0":"translate-y-full"}`,style:{transition:"transform 500ms cubic-bezier(0.4, 0, 0.2, 1)"},children:[C.jsxs("div",{className:"z-10 p-4 md:p-6 border-b-2 border-black flex justify-between items-center bg-white shadow-sm",children:[C.jsxs("div",{className:"flex flex-col",children:[C.jsx("span",{className:"text-[10px] uppercase tracking-widest text-gray-500",children:"Documento Ufficiale"}),C.jsx("span",{className:"text-base md:text-xl font-bold tracking-tight font-neue-haas leading-tight",children:"ALUA - CONDIZIONI GENERALI"})]}),C.jsx("button",{onClick:ot,className:"w-10 h-10 md:w-12 md:h-12 flex items-center justify-center hover:bg-gray-100 transition-colors flex-shrink-0",children:C.jsx(kd,{size:20})})]}),C.jsxs("div",{className:"z-10 px-4 py-2 border-b border-gray-200 flex items-center justify-between bg-gray-50",children:[C.jsx("span",{className:"text-[10px] uppercase tracking-widest text-gray-500",children:"Pizzica per zoomare"}),P&&C.jsxs("span",{className:"text-[10px] uppercase tracking-widest text-gray-500",children:[P," ",P===1?"pagina":"pagine"]})]}),C.jsx("div",{ref:O,className:"flex-1 overflow-auto bg-gray-200",style:{WebkitOverflowScrolling:"touch"},children:C.jsx(dI,{initialScale:1,minScale:.5,maxScale:3,centerOnInit:!1,wheel:{disabled:!0},pinch:{step:5},doubleClick:{mode:"reset"},panning:{disabled:!1},children:C.jsx(gI,{wrapperStyle:{width:"100%",height:"100%",overflow:"auto"},contentStyle:{width:"100%"},children:C.jsx("div",{className:"p-4",children:C.jsx(WM,{file:"/contratto.pdf",onLoadSuccess:Hw,loading:C.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[C.jsx("div",{className:"w-8 h-8 border-2 border-black border-t-transparent rounded-full animate-spin mb-4"}),C.jsx("span",{className:"text-xs uppercase tracking-widest text-gray-500",children:"Caricamento PDF..."})]}),error:C.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[C.jsx(_b,{size:48,className:"text-gray-400 mb-4"}),C.jsx("p",{className:"text-sm text-gray-600 mb-6 font-bergen-mono uppercase tracking-widest",children:"Errore nel caricamento del PDF."}),C.jsx("a",{href:"/contratto.pdf",target:"_blank",rel:"noopener noreferrer",className:"bg-black text-white py-3 px-6 text-xs font-bold tracking-widest uppercase font-neue-haas hover:bg-gray-900 transition-colors",children:"Apri PDF in Nuova Scheda"})]}),children:P&&R&&Array.from(new Array(P),(pe,ce)=>C.jsx("div",{className:"mb-4 bg-white shadow-lg mx-auto",style:{width:"fit-content"},children:C.jsx(nF,{pageNumber:ce+1,width:R,renderTextLayer:!0,renderAnnotationLayer:!0,devicePixelRatio:window.devicePixelRatio||2,className:"mx-auto"},`page_${ce+1}`)},`page_container_${ce+1}`))})})})})})]}),re&&C.jsx("div",{className:"fixed top-0 left-0 w-full bg-red-600 text-white z-[100] p-4 text-center font-bold uppercase tracking-widest text-xs animate-pulse",children:" ATTENZIONE: NESSUN DATO DAL QR (USA DEFAULT)"}),Q&&C.jsx("div",{className:"fixed bottom-0 left-0 w-full z-[100] px-4 pb-6 pt-2 animate-in slide-in-from-bottom duration-500",children:C.jsxs("div",{className:"bg-white border-2 border-black p-6 shadow-2xl flex flex-col gap-4 relative",children:[C.jsx("button",{onClick:oe,className:"absolute top-2 right-2 p-2 hover:bg-gray-100 rounded-full",children:C.jsx(kd,{size:20})}),C.jsxs("div",{className:"flex items-center gap-4 border-b border-gray-100 pb-4",children:[C.jsx("div",{className:"w-12 h-12 bg-black flex items-center justify-center text-white",children:C.jsx("img",{src:"/logo_alua.svg",alt:"App Icon",className:"w-8 h-8 invert"})}),C.jsxs("div",{children:[C.jsx("h3",{className:"font-bold text-sm uppercase tracking-widest font-neue-haas",children:"Installa Applicazione"}),C.jsx("p",{className:"text-xs text-gray-500 font-bergen-mono",children:"Per la migliore esperienza ALUA"})]})]}),C.jsxs("div",{className:"space-y-3 text-xs font-bergen-mono uppercase tracking-wide text-gray-600",children:[C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("span",{className:"font-bold text-black",children:"1."}),C.jsxs("span",{children:["Tocca l'icona ",C.jsx(kb,{size:14,className:"inline mx-1 align-text-bottom"})," nella barra in basso"]})]}),C.jsxs("div",{className:"flex items-center gap-3",children:[C.jsx("span",{className:"font-bold text-black",children:"2."}),C.jsxs("span",{children:["Scorri e seleziona ",C.jsx("span",{className:"font-bold text-black border-b border-black",children:"Aggiungi alla Home"})]})]})]}),C.jsxs("div",{className:"flex items-center gap-2 mt-2 cursor-pointer",onClick:()=>D(!B),children:[C.jsx("div",{className:`w-4 h-4 border border-black flex items-center justify-center ${B?"bg-black":"bg-white"}`,children:B&&C.jsx(Cb,{size:10,className:"text-white"})}),C.jsx("span",{className:"text-[10px] uppercase font-bergen-mono text-gray-500 select-none",children:"Non mostrare pi questo messaggio"})]}),C.jsx("button",{onClick:oe,className:"w-full bg-black text-white py-3 mt-0 text-xs uppercase tracking-widest font-bold font-neue-haas hover:bg-gray-900",children:"Ho Capito"})]})}),C.jsx(yI,{contractData:H,partyA:z,partyB:Z}),Tt&&C.jsx(DC,{member:Tt,onClose:()=>{rt(null);const pe=window.location.pathname;window.history.replaceState({},"",pe)}})]})};jb.createRoot(document.getElementById("root")).render(C.jsx(Tr.StrictMode,{children:C.jsx(wI,{})}));
